{"version":3,"sources":["gallery/messenger/1.4.1/messenger-debug.js"],"names":["define","require","localMessenger","_prevMessenger","window","Messenger","_call","apply","this","arguments","noConflict","_","ArrayProto","Array","prototype","ObjProto","Object","FuncProto","Function","slice","push","toString","concat","nativeForEach","hasOwnProperty","forEach","nativeFilter","map","reduce","reduceRight","filter","nativeKeys","every","some","indexOf","lastIndexOf","isArray","keys","nativeBind","bind","breaker","each","obj","iterator","context","length","i","l","call","key","has","result","object","property","value","isFunction","once","func","memo","ran","idCounter","uniqueId","prefix","id","select","results","index","list","name","defaults","source","prop","extend","TypeError","args","isObject","Events","Backbone","eventsShim","eventSplitter","eventsApi","action","rest","test","names","split","triggerEvents","events","ev","callback","ctx","on","_events","self","off","_callback","j","k","trigger","allEvents","all","listenTo","listeners","_listeners","_listenerId","stopListening","unbind","$","ActionMessenger","BaseView","RetryingMessage","_Message","_Messenger","_ref","_ref1","_ref2","__hasProp","__extends","child","parent","ctor","constructor","__super__","__slice","__indexOf","item","jQuery","options","el","setElement","model","initialize","$el","delegateEvents","delegateEventSplitter","eventName","match","method","selector","_results","undelegateEvents","Error","cid","jqon","delegate","jqoff","undelegate","remove","_super","hideAfter","scroll","closeButtonText","opts","shown","rendered","messenger","show","wasShown","render","$message","removeClass","hide","addClass","cancel","update","_this","isString","message","lastUpdate","Date","actionsToEvents","checkClickable","_hideTimeout","clearTimeout","setTimeout","hideOnNavigate","history","scrollTo","duration","offset","left","top","timeSinceUpdate","act","actions","e","preventDefault","stopPropagation","evt","parseActions","n_act","_ref3","label","template","$action","$actions","$cancel","$link","$text","_i","_len","type","showCloseButton","html","click","append","attr","_hasSlot","_reserveMessageSlot","_timers","clearTimers","_actionInstance","abort","timer","auto","startCountdown","renderPhrase","time","phrase","replace","formatTime","pluralize","num","str","Math","floor","$phrase","remaining","tick","find","delay","delta","text","min","tagName","className","messageDefaults","updateMessageSlotClasses","findById","rec","msg","$slot","dmsg","prepend","_enforceIdConstraint","maxMessages","shift","entry","_msg","singleton","newMessage","_ref4","themes","theme","Message","css","anyShown","last","willBeFirst","hideAll","post","doDefaults","progressMessage","successMessage","errorMessage","showSuccessWithoutError","retry","allow","ajax","hookBackboneAjax","msgr_opts","_ajax","sync_msgr_opts","_withoutMessenger","sync","wrap","_old_ajax","_old_sync","_getHandlerResponse","returnVal","_parseEvents","desc","firstSpace","out","substring","_normalizeResponse","data","elem","resp","xhr","readyState","responseText","run","getMessageText","handler","handlers","m_opts","old","messageInstance","originalHandler","defaultOpts","handlerResp","msgOpts","reason","responseOpts","_ref5","_ref6","_ref7","_ref8","_ref9","errorCount","returnsPromise","status","ignoredErrorCodes","_hideAfter","_retryActions","instance","then","success","error","expectPromise","info","fn","$parent","choosen_loc","chosen_loc","classes","inst","loc","locations","extraClasses","parentLocations","_messengerDefaults","_location","is","detach","_addedClasses","globalMessenger","seajs","importStyle"],"mappings":"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","file":"gallery/messenger/1.4.1/messenger-debug.js","sourcesContent":["define(\"gumutianqi/messenger/1.4.1/messenger-debug\", [ \"$-debug\", \"./messenger-debug.css\" ], function(require, exports, module) {\n    var $ = require(\"$-debug\");\n    require(\"./messenger-debug.css\");\n    /*! messenger 1.4.1 */\n    /*\n     * This file begins the output concatenated into messenger.js\n     *\n     * It establishes the Messenger object while preserving whatever it was before\n     * (for noConflict), and making it a callable function.\n     */\n    (function() {\n        var _prevMessenger = window.Messenger;\n        var localMessenger;\n        localMessenger = window.Messenger = function() {\n            return localMessenger._call.apply(this, arguments);\n        };\n        window.Messenger.noConflict = function() {\n            window.Messenger = _prevMessenger;\n            return localMessenger;\n        };\n    })();\n    /*\n     * This file contains shims for when Underscore and Backbone\n     * are not included.\n     *\n     * Portions taken from Underscore.js and Backbone.js\n     * Both of which are Copyright (c) 2009-2013 Jeremy Ashkenas, DocumentCloud\n     */\n    window.Messenger._ = function() {\n        if (window._) return window._;\n        var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n        // Create quick reference variables for speed access to core prototypes.\n        var push = ArrayProto.push, slice = ArrayProto.slice, concat = ArrayProto.concat, toString = ObjProto.toString, hasOwnProperty = ObjProto.hasOwnProperty;\n        // All **ECMAScript 5** native function implementations that we hope to use\n        // are declared here.\n        var nativeForEach = ArrayProto.forEach, nativeMap = ArrayProto.map, nativeReduce = ArrayProto.reduce, nativeReduceRight = ArrayProto.reduceRight, nativeFilter = ArrayProto.filter, nativeEvery = ArrayProto.every, nativeSome = ArrayProto.some, nativeIndexOf = ArrayProto.indexOf, nativeLastIndexOf = ArrayProto.lastIndexOf, nativeIsArray = Array.isArray, nativeKeys = Object.keys, nativeBind = FuncProto.bind;\n        // Create a safe reference to the Underscore object for use below.\n        var _ = {};\n        // Establish the object that gets returned to break out of a loop iteration.\n        var breaker = {};\n        var each = _.each = _.forEach = function(obj, iterator, context) {\n            if (obj == null) return;\n            if (nativeForEach && obj.forEach === nativeForEach) {\n                obj.forEach(iterator, context);\n            } else if (obj.length === +obj.length) {\n                for (var i = 0, l = obj.length; i < l; i++) {\n                    if (iterator.call(context, obj[i], i, obj) === breaker) return;\n                }\n            } else {\n                for (var key in obj) {\n                    if (_.has(obj, key)) {\n                        if (iterator.call(context, obj[key], key, obj) === breaker) return;\n                    }\n                }\n            }\n        };\n        _.result = function(object, property) {\n            if (object == null) return null;\n            var value = object[property];\n            return _.isFunction(value) ? value.call(object) : value;\n        };\n        _.once = function(func) {\n            var ran = false, memo;\n            return function() {\n                if (ran) return memo;\n                ran = true;\n                memo = func.apply(this, arguments);\n                func = null;\n                return memo;\n            };\n        };\n        var idCounter = 0;\n        _.uniqueId = function(prefix) {\n            var id = ++idCounter + \"\";\n            return prefix ? prefix + id : id;\n        };\n        _.filter = _.select = function(obj, iterator, context) {\n            var results = [];\n            if (obj == null) return results;\n            if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\n            each(obj, function(value, index, list) {\n                if (iterator.call(context, value, index, list)) results[results.length] = value;\n            });\n            return results;\n        };\n        // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n        each([ \"Arguments\", \"Function\", \"String\", \"Number\", \"Date\", \"RegExp\" ], function(name) {\n            _[\"is\" + name] = function(obj) {\n                return toString.call(obj) == \"[object \" + name + \"]\";\n            };\n        });\n        _.defaults = function(obj) {\n            each(slice.call(arguments, 1), function(source) {\n                if (source) {\n                    for (var prop in source) {\n                        if (obj[prop] == null) obj[prop] = source[prop];\n                    }\n                }\n            });\n            return obj;\n        };\n        _.extend = function(obj) {\n            each(slice.call(arguments, 1), function(source) {\n                if (source) {\n                    for (var prop in source) {\n                        obj[prop] = source[prop];\n                    }\n                }\n            });\n            return obj;\n        };\n        _.keys = nativeKeys || function(obj) {\n            if (obj !== Object(obj)) throw new TypeError(\"Invalid object\");\n            var keys = [];\n            for (var key in obj) if (_.has(obj, key)) keys[keys.length] = key;\n            return keys;\n        };\n        _.bind = function(func, context) {\n            if (func.bind === nativeBind && nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n            var args = slice.call(arguments, 2);\n            return function() {\n                return func.apply(context, args.concat(slice.call(arguments)));\n            };\n        };\n        _.isObject = function(obj) {\n            return obj === Object(obj);\n        };\n        return _;\n    }();\n    window.Messenger.Events = function() {\n        if (window.Backbone && Backbone.Events) {\n            return Backbone.Events;\n        }\n        var eventsShim = function() {\n            var eventSplitter = /\\s+/;\n            var eventsApi = function(obj, action, name, rest) {\n                if (!name) return true;\n                if (typeof name === \"object\") {\n                    for (var key in name) {\n                        obj[action].apply(obj, [ key, name[key] ].concat(rest));\n                    }\n                } else if (eventSplitter.test(name)) {\n                    var names = name.split(eventSplitter);\n                    for (var i = 0, l = names.length; i < l; i++) {\n                        obj[action].apply(obj, [ names[i] ].concat(rest));\n                    }\n                } else {\n                    return true;\n                }\n            };\n            var triggerEvents = function(events, args) {\n                var ev, i = -1, l = events.length;\n                switch (args.length) {\n                  case 0:\n                    while (++i < l) (ev = events[i]).callback.call(ev.ctx);\n                    return;\n\n                  case 1:\n                    while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0]);\n                    return;\n\n                  case 2:\n                    while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0], args[1]);\n                    return;\n\n                  case 3:\n                    while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0], args[1], args[2]);\n                    return;\n\n                  default:\n                    while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args);\n                }\n            };\n            var Events = {\n                on: function(name, callback, context) {\n                    if (!(eventsApi(this, \"on\", name, [ callback, context ]) && callback)) return this;\n                    this._events || (this._events = {});\n                    var list = this._events[name] || (this._events[name] = []);\n                    list.push({\n                        callback: callback,\n                        context: context,\n                        ctx: context || this\n                    });\n                    return this;\n                },\n                once: function(name, callback, context) {\n                    if (!(eventsApi(this, \"once\", name, [ callback, context ]) && callback)) return this;\n                    var self = this;\n                    var once = _.once(function() {\n                        self.off(name, once);\n                        callback.apply(this, arguments);\n                    });\n                    once._callback = callback;\n                    this.on(name, once, context);\n                    return this;\n                },\n                off: function(name, callback, context) {\n                    var list, ev, events, names, i, l, j, k;\n                    if (!this._events || !eventsApi(this, \"off\", name, [ callback, context ])) return this;\n                    if (!name && !callback && !context) {\n                        this._events = {};\n                        return this;\n                    }\n                    names = name ? [ name ] : _.keys(this._events);\n                    for (i = 0, l = names.length; i < l; i++) {\n                        name = names[i];\n                        if (list = this._events[name]) {\n                            events = [];\n                            if (callback || context) {\n                                for (j = 0, k = list.length; j < k; j++) {\n                                    ev = list[j];\n                                    if (callback && callback !== ev.callback && callback !== ev.callback._callback || context && context !== ev.context) {\n                                        events.push(ev);\n                                    }\n                                }\n                            }\n                            this._events[name] = events;\n                        }\n                    }\n                    return this;\n                },\n                trigger: function(name) {\n                    if (!this._events) return this;\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (!eventsApi(this, \"trigger\", name, args)) return this;\n                    var events = this._events[name];\n                    var allEvents = this._events.all;\n                    if (events) triggerEvents(events, args);\n                    if (allEvents) triggerEvents(allEvents, arguments);\n                    return this;\n                },\n                listenTo: function(obj, name, callback) {\n                    var listeners = this._listeners || (this._listeners = {});\n                    var id = obj._listenerId || (obj._listenerId = _.uniqueId(\"l\"));\n                    listeners[id] = obj;\n                    obj.on(name, typeof name === \"object\" ? this : callback, this);\n                    return this;\n                },\n                stopListening: function(obj, name, callback) {\n                    var listeners = this._listeners;\n                    if (!listeners) return;\n                    if (obj) {\n                        obj.off(name, typeof name === \"object\" ? this : callback, this);\n                        if (!name && !callback) delete listeners[obj._listenerId];\n                    } else {\n                        if (typeof name === \"object\") callback = this;\n                        for (var id in listeners) {\n                            listeners[id].off(name, callback, this);\n                        }\n                        this._listeners = {};\n                    }\n                    return this;\n                }\n            };\n            Events.bind = Events.on;\n            Events.unbind = Events.off;\n            return Events;\n        };\n        return eventsShim();\n    }();\n    (function() {\n        var $, ActionMessenger, BaseView, Events, RetryingMessage, _, _Message, _Messenger, _ref, _ref1, _ref2, __hasProp = {}.hasOwnProperty, __extends = function(child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key)) child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        }, __slice = [].slice, __indexOf = [].indexOf || function(item) {\n            for (var i = 0, l = this.length; i < l; i++) {\n                if (i in this && this[i] === item) return i;\n            }\n            return -1;\n        };\n        $ = jQuery;\n        _ = (_ref = window._) != null ? _ref : window.Messenger._;\n        Events = (_ref1 = typeof Backbone !== \"undefined\" && Backbone !== null ? Backbone.Events : void 0) != null ? _ref1 : window.Messenger.Events;\n        BaseView = function() {\n            function BaseView(options) {\n                $.extend(this, Events);\n                if (_.isObject(options)) {\n                    if (options.el) {\n                        this.setElement(options.el);\n                    }\n                    this.model = options.model;\n                }\n                this.initialize.apply(this, arguments);\n            }\n            BaseView.prototype.setElement = function(el) {\n                this.$el = $(el);\n                return this.el = this.$el[0];\n            };\n            BaseView.prototype.delegateEvents = function(events) {\n                var delegateEventSplitter, eventName, key, match, method, selector, _results;\n                if (!(events || (events = _.result(this, \"events\")))) {\n                    return;\n                }\n                this.undelegateEvents();\n                delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n                _results = [];\n                for (key in events) {\n                    method = events[key];\n                    if (!_.isFunction(method)) {\n                        method = this[events[key]];\n                    }\n                    if (!method) {\n                        throw new Error('Method \"' + events[key] + '\" does not exist');\n                    }\n                    match = key.match(delegateEventSplitter);\n                    eventName = match[1];\n                    selector = match[2];\n                    method = _.bind(method, this);\n                    eventName += \".delegateEvents\" + this.cid;\n                    if (selector === \"\") {\n                        _results.push(this.jqon(eventName, method));\n                    } else {\n                        _results.push(this.jqon(eventName, selector, method));\n                    }\n                }\n                return _results;\n            };\n            BaseView.prototype.jqon = function(eventName, selector, method) {\n                var _ref2;\n                if (this.$el.on != null) {\n                    return (_ref2 = this.$el).on.apply(_ref2, arguments);\n                } else {\n                    if (!(method != null)) {\n                        method = selector;\n                        selector = void 0;\n                    }\n                    if (selector != null) {\n                        return this.$el.delegate(selector, eventName, method);\n                    } else {\n                        return this.$el.bind(eventName, method);\n                    }\n                }\n            };\n            BaseView.prototype.jqoff = function(eventName) {\n                var _ref2;\n                if (this.$el.off != null) {\n                    return (_ref2 = this.$el).off.apply(_ref2, arguments);\n                } else {\n                    this.$el.undelegate();\n                    return this.$el.unbind(eventName);\n                }\n            };\n            BaseView.prototype.undelegateEvents = function() {\n                return this.jqoff(\".delegateEvents\" + this.cid);\n            };\n            BaseView.prototype.remove = function() {\n                this.undelegateEvents();\n                return this.$el.remove();\n            };\n            return BaseView;\n        }();\n        _Message = function(_super) {\n            __extends(_Message, _super);\n            function _Message() {\n                return _Message.__super__.constructor.apply(this, arguments);\n            }\n            _Message.prototype.defaults = {\n                hideAfter: 10,\n                scroll: true,\n                closeButtonText: \"&times;\"\n            };\n            _Message.prototype.initialize = function(opts) {\n                if (opts == null) {\n                    opts = {};\n                }\n                this.shown = false;\n                this.rendered = false;\n                this.messenger = opts.messenger;\n                return this.options = $.extend({}, this.options, opts, this.defaults);\n            };\n            _Message.prototype.show = function() {\n                var wasShown;\n                if (!this.rendered) {\n                    this.render();\n                }\n                this.$message.removeClass(\"messenger-hidden\");\n                wasShown = this.shown;\n                this.shown = true;\n                if (!wasShown) {\n                    return this.trigger(\"show\");\n                }\n            };\n            _Message.prototype.hide = function() {\n                var wasShown;\n                if (!this.rendered) {\n                    return;\n                }\n                this.$message.addClass(\"messenger-hidden\");\n                wasShown = this.shown;\n                this.shown = false;\n                if (wasShown) {\n                    return this.trigger(\"hide\");\n                }\n            };\n            _Message.prototype.cancel = function() {\n                return this.hide();\n            };\n            _Message.prototype.update = function(opts) {\n                var _ref2, _this = this;\n                if (_.isString(opts)) {\n                    opts = {\n                        message: opts\n                    };\n                }\n                $.extend(this.options, opts);\n                this.lastUpdate = new Date();\n                this.rendered = false;\n                this.events = (_ref2 = this.options.events) != null ? _ref2 : {};\n                this.render();\n                this.actionsToEvents();\n                this.delegateEvents();\n                this.checkClickable();\n                if (this.options.hideAfter) {\n                    this.$message.addClass(\"messenger-will-hide-after\");\n                    if (this._hideTimeout != null) {\n                        clearTimeout(this._hideTimeout);\n                    }\n                    this._hideTimeout = setTimeout(function() {\n                        return _this.hide();\n                    }, this.options.hideAfter * 1e3);\n                } else {\n                    this.$message.removeClass(\"messenger-will-hide-after\");\n                }\n                if (this.options.hideOnNavigate) {\n                    this.$message.addClass(\"messenger-will-hide-on-navigate\");\n                    if ((typeof Backbone !== \"undefined\" && Backbone !== null ? Backbone.history : void 0) != null) {\n                        Backbone.history.on(\"route\", function() {\n                            return _this.hide();\n                        });\n                    }\n                } else {\n                    this.$message.removeClass(\"messenger-will-hide-on-navigate\");\n                }\n                return this.trigger(\"update\", this);\n            };\n            _Message.prototype.scrollTo = function() {\n                if (!this.options.scroll) {\n                    return;\n                }\n                return $.scrollTo(this.$el, {\n                    duration: 400,\n                    offset: {\n                        left: 0,\n                        top: -20\n                    }\n                });\n            };\n            _Message.prototype.timeSinceUpdate = function() {\n                if (this.lastUpdate) {\n                    return new Date() - this.lastUpdate;\n                } else {\n                    return null;\n                }\n            };\n            _Message.prototype.actionsToEvents = function() {\n                var act, name, _ref2, _results, _this = this;\n                _ref2 = this.options.actions;\n                _results = [];\n                for (name in _ref2) {\n                    act = _ref2[name];\n                    _results.push(this.events['click [data-action=\"' + name + '\"] a'] = function(act) {\n                        return function(e) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            _this.trigger(\"action:\" + name, act, e);\n                            return act.action.call(_this, e, _this);\n                        };\n                    }(act));\n                }\n                return _results;\n            };\n            _Message.prototype.checkClickable = function() {\n                var evt, name, _ref2, _results;\n                _ref2 = this.events;\n                _results = [];\n                for (name in _ref2) {\n                    evt = _ref2[name];\n                    if (name === \"click\") {\n                        _results.push(this.$message.addClass(\"messenger-clickable\"));\n                    } else {\n                        _results.push(void 0);\n                    }\n                }\n                return _results;\n            };\n            _Message.prototype.undelegateEvents = function() {\n                var _ref2;\n                _Message.__super__.undelegateEvents.apply(this, arguments);\n                return (_ref2 = this.$message) != null ? _ref2.removeClass(\"messenger-clickable\") : void 0;\n            };\n            _Message.prototype.parseActions = function() {\n                var act, actions, n_act, name, _ref2, _ref3;\n                actions = [];\n                _ref2 = this.options.actions;\n                for (name in _ref2) {\n                    act = _ref2[name];\n                    n_act = $.extend({}, act);\n                    n_act.name = name;\n                    if ((_ref3 = n_act.label) == null) {\n                        n_act.label = name;\n                    }\n                    actions.push(n_act);\n                }\n                return actions;\n            };\n            _Message.prototype.template = function(opts) {\n                var $action, $actions, $cancel, $link, $message, $text, action, _i, _len, _ref2, _this = this;\n                $message = $(\"<div class='messenger-message message alert \" + opts.type + \" message-\" + opts.type + \" alert-\" + opts.type + \"'>\");\n                if (opts.showCloseButton) {\n                    $cancel = $('<button type=\"button\" class=\"messenger-close\" data-dismiss=\"alert\">');\n                    $cancel.html(opts.closeButtonText);\n                    $cancel.click(function() {\n                        _this.cancel();\n                        return true;\n                    });\n                    $message.append($cancel);\n                }\n                $text = $('<div class=\"messenger-message-inner\">' + opts.message + \"</div>\");\n                $message.append($text);\n                if (opts.actions.length) {\n                    $actions = $('<div class=\"messenger-actions\">');\n                }\n                _ref2 = opts.actions;\n                for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n                    action = _ref2[_i];\n                    $action = $(\"<span>\");\n                    $action.attr(\"data-action\", \"\" + action.name);\n                    $link = $(\"<a>\");\n                    $link.html(action.label);\n                    $action.append($('<span class=\"messenger-phrase\">'));\n                    $action.append($link);\n                    $actions.append($action);\n                }\n                $message.append($actions);\n                return $message;\n            };\n            _Message.prototype.render = function() {\n                var opts;\n                if (this.rendered) {\n                    return;\n                }\n                if (!this._hasSlot) {\n                    this.setElement(this.messenger._reserveMessageSlot(this));\n                    this._hasSlot = true;\n                }\n                opts = $.extend({}, this.options, {\n                    actions: this.parseActions()\n                });\n                this.$message = $(this.template(opts));\n                this.$el.html(this.$message);\n                this.shown = true;\n                this.rendered = true;\n                return this.trigger(\"render\");\n            };\n            return _Message;\n        }(BaseView);\n        RetryingMessage = function(_super) {\n            __extends(RetryingMessage, _super);\n            function RetryingMessage() {\n                return RetryingMessage.__super__.constructor.apply(this, arguments);\n            }\n            RetryingMessage.prototype.initialize = function() {\n                RetryingMessage.__super__.initialize.apply(this, arguments);\n                return this._timers = {};\n            };\n            RetryingMessage.prototype.cancel = function() {\n                this.clearTimers();\n                this.hide();\n                if (this._actionInstance != null && this._actionInstance.abort != null) {\n                    return this._actionInstance.abort();\n                }\n            };\n            RetryingMessage.prototype.clearTimers = function() {\n                var name, timer, _ref2, _ref3;\n                _ref2 = this._timers;\n                for (name in _ref2) {\n                    timer = _ref2[name];\n                    clearTimeout(timer);\n                }\n                this._timers = {};\n                return (_ref3 = this.$message) != null ? _ref3.removeClass(\"messenger-retry-soon messenger-retry-later\") : void 0;\n            };\n            RetryingMessage.prototype.render = function() {\n                var action, name, _ref2, _results;\n                RetryingMessage.__super__.render.apply(this, arguments);\n                this.clearTimers();\n                _ref2 = this.options.actions;\n                _results = [];\n                for (name in _ref2) {\n                    action = _ref2[name];\n                    if (action.auto) {\n                        _results.push(this.startCountdown(name, action));\n                    } else {\n                        _results.push(void 0);\n                    }\n                }\n                return _results;\n            };\n            RetryingMessage.prototype.renderPhrase = function(action, time) {\n                var phrase;\n                phrase = action.phrase.replace(\"TIME\", this.formatTime(time));\n                return phrase;\n            };\n            RetryingMessage.prototype.formatTime = function(time) {\n                var pluralize;\n                pluralize = function(num, str) {\n                    num = Math.floor(num);\n                    if (num !== 1) {\n                        str = str + \"s\";\n                    }\n                    return \"in \" + num + \" \" + str;\n                };\n                if (Math.floor(time) === 0) {\n                    return \"now...\";\n                }\n                if (time < 60) {\n                    return pluralize(time, \"second\");\n                }\n                time /= 60;\n                if (time < 60) {\n                    return pluralize(time, \"minute\");\n                }\n                time /= 60;\n                return pluralize(time, \"hour\");\n            };\n            RetryingMessage.prototype.startCountdown = function(name, action) {\n                var $phrase, remaining, tick, _ref2, _this = this;\n                if (this._timers[name] != null) {\n                    return;\n                }\n                $phrase = this.$message.find(\"[data-action='\" + name + \"'] .messenger-phrase\");\n                remaining = (_ref2 = action.delay) != null ? _ref2 : 3;\n                if (remaining <= 10) {\n                    this.$message.removeClass(\"messenger-retry-later\");\n                    this.$message.addClass(\"messenger-retry-soon\");\n                } else {\n                    this.$message.removeClass(\"messenger-retry-soon\");\n                    this.$message.addClass(\"messenger-retry-later\");\n                }\n                tick = function() {\n                    var delta;\n                    $phrase.text(_this.renderPhrase(action, remaining));\n                    if (remaining > 0) {\n                        delta = Math.min(remaining, 1);\n                        remaining -= delta;\n                        return _this._timers[name] = setTimeout(tick, delta * 1e3);\n                    } else {\n                        _this.$message.removeClass(\"messenger-retry-soon messenger-retry-later\");\n                        delete _this._timers[name];\n                        return action.action();\n                    }\n                };\n                return tick();\n            };\n            return RetryingMessage;\n        }(_Message);\n        _Messenger = function(_super) {\n            __extends(_Messenger, _super);\n            function _Messenger() {\n                return _Messenger.__super__.constructor.apply(this, arguments);\n            }\n            _Messenger.prototype.tagName = \"ul\";\n            _Messenger.prototype.className = \"messenger\";\n            _Messenger.prototype.messageDefaults = {\n                type: \"info\"\n            };\n            _Messenger.prototype.initialize = function(options) {\n                this.options = options != null ? options : {};\n                this.history = [];\n                return this.messageDefaults = $.extend({}, this.messageDefaults, this.options.messageDefaults);\n            };\n            _Messenger.prototype.render = function() {\n                return this.updateMessageSlotClasses();\n            };\n            _Messenger.prototype.findById = function(id) {\n                return _.filter(this.history, function(rec) {\n                    return rec.msg.options.id === id;\n                });\n            };\n            _Messenger.prototype._reserveMessageSlot = function(msg) {\n                var $slot, dmsg, _this = this;\n                $slot = $(\"<li>\");\n                $slot.addClass(\"messenger-message-slot\");\n                this.$el.prepend($slot);\n                this.history.push({\n                    msg: msg,\n                    $slot: $slot\n                });\n                this._enforceIdConstraint(msg);\n                msg.on(\"update\", function() {\n                    return _this._enforceIdConstraint(msg);\n                });\n                while (this.options.maxMessages && this.history.length > this.options.maxMessages) {\n                    dmsg = this.history.shift();\n                    dmsg.msg.remove();\n                    dmsg.$slot.remove();\n                }\n                return $slot;\n            };\n            _Messenger.prototype._enforceIdConstraint = function(msg) {\n                var entry, _i, _len, _msg, _ref2;\n                if (msg.options.id == null) {\n                    return;\n                }\n                _ref2 = this.history;\n                for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n                    entry = _ref2[_i];\n                    _msg = entry.msg;\n                    if (_msg.options.id != null && _msg.options.id === msg.options.id && msg !== _msg) {\n                        if (msg.options.singleton) {\n                            msg.hide();\n                            return;\n                        } else {\n                            _msg.hide();\n                        }\n                    }\n                }\n            };\n            _Messenger.prototype.newMessage = function(opts) {\n                var msg, _ref2, _ref3, _ref4, _this = this;\n                if (opts == null) {\n                    opts = {};\n                }\n                opts.messenger = this;\n                _Message = (_ref2 = (_ref3 = Messenger.themes[(_ref4 = opts.theme) != null ? _ref4 : this.options.theme]) != null ? _ref3.Message : void 0) != null ? _ref2 : RetryingMessage;\n                msg = new _Message(opts);\n                msg.on(\"show\", function() {\n                    if (opts.scrollTo && _this.$el.css(\"position\") !== \"fixed\") {\n                        return msg.scrollTo();\n                    }\n                });\n                msg.on(\"hide show render\", this.updateMessageSlotClasses, this);\n                return msg;\n            };\n            _Messenger.prototype.updateMessageSlotClasses = function() {\n                var anyShown, last, rec, willBeFirst, _i, _len, _ref2;\n                willBeFirst = true;\n                last = null;\n                anyShown = false;\n                _ref2 = this.history;\n                for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n                    rec = _ref2[_i];\n                    rec.$slot.removeClass(\"messenger-first messenger-last messenger-shown\");\n                    if (rec.msg.shown && rec.msg.rendered) {\n                        rec.$slot.addClass(\"messenger-shown\");\n                        anyShown = true;\n                        last = rec;\n                        if (willBeFirst) {\n                            willBeFirst = false;\n                            rec.$slot.addClass(\"messenger-first\");\n                        }\n                    }\n                }\n                if (last != null) {\n                    last.$slot.addClass(\"messenger-last\");\n                }\n                return this.$el[\"\" + (anyShown ? \"remove\" : \"add\") + \"Class\"](\"messenger-empty\");\n            };\n            _Messenger.prototype.hideAll = function() {\n                var rec, _i, _len, _ref2, _results;\n                _ref2 = this.history;\n                _results = [];\n                for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n                    rec = _ref2[_i];\n                    _results.push(rec.msg.hide());\n                }\n                return _results;\n            };\n            _Messenger.prototype.post = function(opts) {\n                var msg;\n                if (_.isString(opts)) {\n                    opts = {\n                        message: opts\n                    };\n                }\n                opts = $.extend(true, {}, this.messageDefaults, opts);\n                msg = this.newMessage(opts);\n                msg.update(opts);\n                return msg;\n            };\n            return _Messenger;\n        }(BaseView);\n        ActionMessenger = function(_super) {\n            __extends(ActionMessenger, _super);\n            function ActionMessenger() {\n                return ActionMessenger.__super__.constructor.apply(this, arguments);\n            }\n            ActionMessenger.prototype.doDefaults = {\n                progressMessage: null,\n                successMessage: null,\n                errorMessage: \"Error connecting to the server.\",\n                showSuccessWithoutError: true,\n                retry: {\n                    auto: true,\n                    allow: true\n                },\n                action: $.ajax\n            };\n            ActionMessenger.prototype.hookBackboneAjax = function(msgr_opts) {\n                var _ajax, _this = this;\n                if (msgr_opts == null) {\n                    msgr_opts = {};\n                }\n                if (!(window.Backbone != null)) {\n                    throw \"Expected Backbone to be defined\";\n                }\n                msgr_opts = _.defaults(msgr_opts, {\n                    id: \"BACKBONE_ACTION\",\n                    errorMessage: false,\n                    successMessage: \"Request completed successfully.\",\n                    showSuccessWithoutError: false\n                });\n                _ajax = function(options) {\n                    var sync_msgr_opts;\n                    sync_msgr_opts = _.extend({}, msgr_opts, options.messenger);\n                    return _this[\"do\"](sync_msgr_opts, options);\n                };\n                if (Backbone.ajax != null) {\n                    if (Backbone.ajax._withoutMessenger) {\n                        Backbone.ajax = Backbone.ajax._withoutMessenger;\n                    }\n                    if (!(msgr_opts.action != null) || msgr_opts.action === this.doDefaults.action) {\n                        msgr_opts.action = Backbone.ajax;\n                    }\n                    _ajax._withoutMessenger = Backbone.ajax;\n                    return Backbone.ajax = _ajax;\n                } else {\n                    return Backbone.sync = _.wrap(Backbone.sync, function() {\n                        var args, _old_ajax, _old_sync;\n                        _old_sync = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n                        _old_ajax = $.ajax;\n                        $.ajax = _ajax;\n                        _old_sync.call.apply(_old_sync, [ this ].concat(__slice.call(args)));\n                        return $.ajax = _old_ajax;\n                    });\n                }\n            };\n            ActionMessenger.prototype._getHandlerResponse = function(returnVal) {\n                if (returnVal === false) {\n                    return false;\n                }\n                if (returnVal === true || !(returnVal != null)) {\n                    return true;\n                }\n                return returnVal;\n            };\n            ActionMessenger.prototype._parseEvents = function(events) {\n                var desc, firstSpace, func, label, out, type, _ref2;\n                if (events == null) {\n                    events = {};\n                }\n                out = {};\n                for (label in events) {\n                    func = events[label];\n                    firstSpace = label.indexOf(\" \");\n                    type = label.substring(0, firstSpace);\n                    desc = label.substring(firstSpace + 1);\n                    if ((_ref2 = out[type]) == null) {\n                        out[type] = {};\n                    }\n                    out[type][desc] = func;\n                }\n                return out;\n            };\n            ActionMessenger.prototype._normalizeResponse = function() {\n                var data, elem, resp, type, xhr, _i, _len;\n                resp = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                type = null;\n                xhr = null;\n                data = null;\n                for (_i = 0, _len = resp.length; _i < _len; _i++) {\n                    elem = resp[_i];\n                    if (elem === \"success\" || elem === \"timeout\" || elem === \"abort\") {\n                        type = elem;\n                    } else if ((elem != null ? elem.readyState : void 0) != null && (elem != null ? elem.responseText : void 0) != null) {\n                        xhr = elem;\n                    } else if (_.isObject(elem)) {\n                        data = elem;\n                    }\n                }\n                return [ type, data, xhr ];\n            };\n            ActionMessenger.prototype.run = function() {\n                var args, events, getMessageText, handler, handlers, m_opts, msg, old, opts, type, _ref2, _this = this;\n                m_opts = arguments[0], opts = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n                if (opts == null) {\n                    opts = {};\n                }\n                m_opts = $.extend(true, {}, this.messageDefaults, this.doDefaults, m_opts != null ? m_opts : {});\n                events = this._parseEvents(m_opts.events);\n                getMessageText = function(type, xhr) {\n                    var message;\n                    message = m_opts[type + \"Message\"];\n                    if (_.isFunction(message)) {\n                        return message.call(_this, type, xhr);\n                    }\n                    return message;\n                };\n                msg = (_ref2 = m_opts.messageInstance) != null ? _ref2 : this.newMessage(m_opts);\n                if (m_opts.id != null) {\n                    msg.options.id = m_opts.id;\n                }\n                if (m_opts.progressMessage != null) {\n                    msg.update($.extend({}, m_opts, {\n                        message: getMessageText(\"progress\", null),\n                        type: \"info\"\n                    }));\n                }\n                handlers = {};\n                _.each([ \"error\", \"success\" ], function(type) {\n                    var originalHandler;\n                    originalHandler = opts[type];\n                    return handlers[type] = function() {\n                        var data, defaultOpts, handlerResp, msgOpts, reason, resp, responseOpts, xhr, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;\n                        resp = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                        _ref3 = _this._normalizeResponse.apply(_this, resp), reason = _ref3[0], data = _ref3[1], \n                        xhr = _ref3[2];\n                        if (type === \"success\" && !(msg.errorCount != null) && m_opts.showSuccessWithoutError === false) {\n                            m_opts[\"successMessage\"] = null;\n                        }\n                        if (type === \"error\") {\n                            if ((_ref4 = m_opts.errorCount) == null) {\n                                m_opts.errorCount = 0;\n                            }\n                            m_opts.errorCount += 1;\n                        }\n                        handlerResp = m_opts.returnsPromise ? resp[0] : typeof originalHandler === \"function\" ? originalHandler.apply(null, resp) : void 0;\n                        responseOpts = _this._getHandlerResponse(handlerResp);\n                        if (_.isString(responseOpts)) {\n                            responseOpts = {\n                                message: responseOpts\n                            };\n                        }\n                        if (type === \"error\" && ((xhr != null ? xhr.status : void 0) === 0 || reason === \"abort\")) {\n                            msg.hide();\n                            return;\n                        }\n                        if (type === \"error\" && m_opts.ignoredErrorCodes != null && (_ref5 = xhr != null ? xhr.status : void 0, \n                        __indexOf.call(m_opts.ignoredErrorCodes, _ref5) >= 0)) {\n                            msg.hide();\n                            return;\n                        }\n                        defaultOpts = {\n                            message: getMessageText(type, xhr),\n                            type: type,\n                            events: (_ref6 = events[type]) != null ? _ref6 : {},\n                            hideOnNavigate: type === \"success\"\n                        };\n                        msgOpts = $.extend({}, m_opts, defaultOpts, responseOpts);\n                        if (typeof ((_ref7 = msgOpts.retry) != null ? _ref7.allow : void 0) === \"number\") {\n                            msgOpts.retry.allow--;\n                        }\n                        if (type === \"error\" && (xhr != null ? xhr.status : void 0) >= 500 && ((_ref8 = msgOpts.retry) != null ? _ref8.allow : void 0)) {\n                            if (msgOpts.retry.delay == null) {\n                                if (msgOpts.errorCount < 4) {\n                                    msgOpts.retry.delay = 10;\n                                } else {\n                                    msgOpts.retry.delay = 5 * 60;\n                                }\n                            }\n                            if (msgOpts.hideAfter) {\n                                if ((_ref9 = msgOpts._hideAfter) == null) {\n                                    msgOpts._hideAfter = msgOpts.hideAfter;\n                                }\n                                msgOpts.hideAfter = msgOpts._hideAfter + msgOpts.retry.delay;\n                            }\n                            msgOpts._retryActions = true;\n                            msgOpts.actions = {\n                                retry: {\n                                    label: \"retry now\",\n                                    phrase: \"Retrying TIME\",\n                                    auto: msgOpts.retry.auto,\n                                    delay: msgOpts.retry.delay,\n                                    action: function() {\n                                        msgOpts.messageInstance = msg;\n                                        return setTimeout(function() {\n                                            return _this[\"do\"].apply(_this, [ msgOpts, opts ].concat(__slice.call(args)));\n                                        }, 0);\n                                    }\n                                },\n                                cancel: {\n                                    action: function() {\n                                        return msg.cancel();\n                                    }\n                                }\n                            };\n                        } else if (msgOpts._retryActions) {\n                            delete msgOpts.actions.retry;\n                            delete msgOpts.actions.cancel;\n                            delete m_opts._retryActions;\n                        }\n                        msg.update(msgOpts);\n                        if (responseOpts && msgOpts.message) {\n                            Messenger(_.extend({}, _this.options, {\n                                instance: _this\n                            }));\n                            return msg.show();\n                        } else {\n                            return msg.hide();\n                        }\n                    };\n                });\n                if (!m_opts.returnsPromise) {\n                    for (type in handlers) {\n                        handler = handlers[type];\n                        old = opts[type];\n                        opts[type] = handler;\n                    }\n                }\n                msg._actionInstance = m_opts.action.apply(m_opts, [ opts ].concat(__slice.call(args)));\n                if (m_opts.returnsPromise) {\n                    msg._actionInstance.then(handlers.success, handlers.error);\n                }\n                return msg;\n            };\n            ActionMessenger.prototype[\"do\"] = ActionMessenger.prototype.run;\n            ActionMessenger.prototype.ajax = function() {\n                var args, m_opts;\n                m_opts = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n                m_opts.action = $.ajax;\n                return this.run.apply(this, [ m_opts ].concat(__slice.call(args)));\n            };\n            ActionMessenger.prototype.expectPromise = function(action, m_opts) {\n                m_opts = _.extend({}, m_opts, {\n                    action: action,\n                    returnsPromise: true\n                });\n                return this.run(m_opts);\n            };\n            ActionMessenger.prototype.error = function(m_opts) {\n                if (m_opts == null) {\n                    m_opts = {};\n                }\n                if (typeof m_opts === \"string\") {\n                    m_opts = {\n                        message: m_opts\n                    };\n                }\n                m_opts.type = \"error\";\n                return this.post(m_opts);\n            };\n            ActionMessenger.prototype.info = function(m_opts) {\n                if (m_opts == null) {\n                    m_opts = {};\n                }\n                if (typeof m_opts === \"string\") {\n                    m_opts = {\n                        message: m_opts\n                    };\n                }\n                m_opts.type = \"info\";\n                return this.post(m_opts);\n            };\n            ActionMessenger.prototype.success = function(m_opts) {\n                if (m_opts == null) {\n                    m_opts = {};\n                }\n                if (typeof m_opts === \"string\") {\n                    m_opts = {\n                        message: m_opts\n                    };\n                }\n                m_opts.type = \"success\";\n                return this.post(m_opts);\n            };\n            return ActionMessenger;\n        }(_Messenger);\n        $.fn.messenger = function() {\n            var $el, args, func, instance, opts, _ref2, _ref3, _ref4;\n            func = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            if (func == null) {\n                func = {};\n            }\n            $el = this;\n            if (!(func != null) || !_.isString(func)) {\n                opts = func;\n                if (!($el.data(\"messenger\") != null)) {\n                    _Messenger = (_ref2 = (_ref3 = Messenger.themes[opts.theme]) != null ? _ref3.Messenger : void 0) != null ? _ref2 : ActionMessenger;\n                    $el.data(\"messenger\", instance = new _Messenger($.extend({\n                        el: $el\n                    }, opts)));\n                    instance.render();\n                }\n                return $el.data(\"messenger\");\n            } else {\n                return (_ref4 = $el.data(\"messenger\"))[func].apply(_ref4, args);\n            }\n        };\n        window.Messenger._call = function(opts) {\n            var $el, $parent, choosen_loc, chosen_loc, classes, defaultOpts, inst, loc, locations, _i, _len;\n            defaultOpts = {\n                extraClasses: \"messenger-fixed messenger-on-bottom messenger-on-right\",\n                theme: \"future\",\n                maxMessages: 9,\n                parentLocations: [ \"body\" ]\n            };\n            opts = $.extend(defaultOpts, $._messengerDefaults, Messenger.options, opts);\n            if (opts.theme != null) {\n                opts.extraClasses += \" messenger-theme-\" + opts.theme;\n            }\n            inst = opts.instance || Messenger.instance;\n            if (opts.instance == null) {\n                locations = opts.parentLocations;\n                $parent = null;\n                choosen_loc = null;\n                for (_i = 0, _len = locations.length; _i < _len; _i++) {\n                    loc = locations[_i];\n                    $parent = $(loc);\n                    if ($parent.length) {\n                        chosen_loc = loc;\n                        break;\n                    }\n                }\n                if (!inst) {\n                    $el = $(\"<ul>\");\n                    $parent.prepend($el);\n                    inst = $el.messenger(opts);\n                    inst._location = chosen_loc;\n                    Messenger.instance = inst;\n                } else if (!$(inst._location).is($(chosen_loc))) {\n                    inst.$el.detach();\n                    $parent.prepend(inst.$el);\n                }\n            }\n            if (inst._addedClasses != null) {\n                inst.$el.removeClass(inst._addedClasses);\n            }\n            inst.$el.addClass(classes = \"\" + inst.className + \" \" + opts.extraClasses);\n            inst._addedClasses = classes;\n            return inst;\n        };\n        $.extend(Messenger, {\n            Message: RetryingMessage,\n            Messenger: ActionMessenger,\n            themes: (_ref2 = Messenger.themes) != null ? _ref2 : {}\n        });\n        $.globalMessenger = window.Messenger = Messenger;\n    }).call(this);\n});\n\ndefine(\"gumutianqi/messenger/1.4.1/messenger-debug.css\", [], function() {\n    seajs.importStyle(\"ul.messenger{margin:0;padding:0}ul.messenger>li{list-style:none;margin:0;padding:0}ul.messenger.messenger-empty{display:none}ul.messenger .messenger-message{overflow:hidden;*zoom:1}ul.messenger .messenger-message.messenger-hidden{display:none}ul.messenger .messenger-message .messenger-phrase,ul.messenger .messenger-message .messenger-actions a{padding-right:5px}ul.messenger .messenger-message .messenger-actions{float:right}ul.messenger .messenger-message .messenger-actions a{cursor:pointer;text-decoration:underline}ul.messenger .messenger-message ul,ul.messenger .messenger-message ol{margin:10px 18px 0}ul.messenger.messenger-fixed{position:fixed;z-index:10000}ul.messenger.messenger-fixed .messenger-message{min-width:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}ul.messenger.messenger-fixed .message .messenger-actions{float:left}ul.messenger.messenger-fixed.messenger-on-top{top:20px}ul.messenger.messenger-fixed.messenger-on-bottom{bottom:20px}ul.messenger.messenger-fixed.messenger-on-top,ul.messenger.messenger-fixed.messenger-on-bottom{left:50%;width:800px;margin-left:-400px}@media (max-width:960px){ul.messenger.messenger-fixed.messenger-on-top,ul.messenger.messenger-fixed.messenger-on-bottom{left:10%;width:80%;margin-left:0}}ul.messenger.messenger-fixed.messenger-on-top.messenger-on-right,ul.messenger.messenger-fixed.messenger-on-bottom.messenger-on-right{right:20px;left:auto}ul.messenger.messenger-fixed.messenger-on-top.messenger-on-left,ul.messenger.messenger-fixed.messenger-on-bottom.messenger-on-left{left:20px;margin-left:0}ul.messenger.messenger-fixed.messenger-on-right,ul.messenger.messenger-fixed.messenger-on-left{width:350px}ul.messenger.messenger-fixed.messenger-on-right .messenger-actions,ul.messenger.messenger-fixed.messenger-on-left .messenger-actions{float:left}ul.messenger .messenger-spinner{display:none}\");\n});\n"],"sourceRoot":"/source/"}