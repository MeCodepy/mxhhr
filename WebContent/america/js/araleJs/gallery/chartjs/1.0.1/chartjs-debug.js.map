{"version":3,"sources":["gallery/chartjs/1.0.1/chartjs-debug.js"],"names":["define","require","exports","module","root","this","previous","Chart","context","canvas","ctx","width","height","aspectRatio","helpers","retinaScale","defaults","global","animation","animationSteps","animationEasing","showScale","scaleOverride","scaleSteps","scaleStepWidth","scaleStartValue","scaleLineColor","scaleLineWidth","scaleShowLabels","scaleLabel","scaleIntegersOnly","scaleBeginAtZero","scaleFontFamily","scaleFontSize","scaleFontStyle","scaleFontColor","responsive","maintainAspectRatio","showTooltips","tooltipEvents","tooltipFillColor","tooltipFontFamily","tooltipFontSize","tooltipFontStyle","tooltipFontColor","tooltipTitleFontFamily","tooltipTitleFontSize","tooltipTitleFontStyle","tooltipTitleFontColor","tooltipYPadding","tooltipXPadding","tooltipCaretSize","tooltipCornerRadius","tooltipXOffset","tooltipTemplate","multiTooltipTemplate","multiTooltipKeyBackground","onAnimationProgress","onAnimationComplete","types","each","loopable","callback","self","additionalArgs","Array","prototype","slice","call","arguments","length","i","apply","concat","item","clone","obj","objClone","value","key","hasOwnProperty","extend","base","extensionObject","merge","args","unshift","indexOf","arrayToSearch","inherits","where","collection","filterCallback","filtered","push","findNextWhere","startIndex","currentItem","findPreviousWhere","extensions","parent","ChartElement","constructor","Surrogate","__super__","noop","uid","id","warn","str","window","console","amd","isNumber","n","isNaN","parseFloat","isFinite","max","array","Math","min","getDecimalPlaces","cap","valueToCap","maxValue","minValue","num","toString","split","toRadians","radians","degrees","PI","aliasPixel","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","x","distanceFromYCenter","y","radialDistanceFromCenter","sqrt","angle","atan2","distance","pixelWidth","calculateOrderOfMagnitude","splineCurve","FirstPoint","MiddlePoint","AfterPoint","t","d01","pow","d12","fa","fb","inner","outer","val","floor","log","LN10","template","calculateScaleRange","valuesArray","drawingSize","textSize","startFromZero","integersOnly","minSteps","maxSteps","skipFitting","valueRange","abs","rangeOrderOfMagnitude","graphMax","ceil","graphMin","graphRange","stepValue","numberOfSteps","round","steps","templateString","valuesObject","tmpl","data","fn","test","Function","replace","join","cache","easingEffects","generateLabels","labelsArray","labelTemplateString","index","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","s","p","a","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","addEvent","cancelAnimFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","animationLoop","totalSteps","easingString","onProgress","onComplete","chartInstance","currentStep","easingFunction","animationFrame","stepDecimal","easeDecimal","getRelativePosition","evt","mouseX","mouseY","e","originalEvent","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","left","clientY","top","node","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","unbindEvents","bindEvents","arrayOfEvents","events","eventName","chart","getMaximumWidth","domNode","container","parentNode","clientWidth","getMaximumHeight","clientHeight","getMaximumSize","devicePixelRatio","style","scale","clear","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfStrings","longest","string","textWidth","measureText","drawRoundedRectangle","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","instances","Type","options","resize","initialize","stop","newWidth","newHeight","reflow","render","draw","generateLegend","legendTemplate","destroy","showTooltip","ChartElements","forceRedraw","activeElements","isChanged","Elements","changed","element","datasets","dataArray","dataIndex","points","bars","segments","tooltipLabels","tooltipColors","medianPosition","dataCollection","xMax","yMax","xMin","yMin","xPositions","yPositions","dataset","hasValue","fill","_saved","fillColor","stroke","strokeColor","MultiTooltip","xPadding","yPadding","xOffset","textColor","fontSize","titleTextColor","titleFontFamily","titleFontStyle","titleFontSize","cornerRadius","labels","legendColors","legendColorBackground","title","label","Element","tooltipPosition","Tooltip","caretHeight","text","toBase64Image","toDataURL","ChartType","name","chartName","baseDefaults","config","configuration","save","restore","props","update","newProps","transition","ease","Point","display","inRange","chartX","chartY","hitDetectionRange","hitDetectionRadius","arc","strokeStyle","lineWidth","strokeWidth","fillStyle","Arc","pointRelativePosition","betweenAngles","startAngle","endAngle","withinRadius","innerRadius","outerRadius","centreAngle","rangeFromCentre","animationPercent","lineJoin","showStroke","Rectangle","halfWidth","leftX","rightX","halfStroke","xAlign","yAlign","caretPadding","tooltipWidth","tooltipRectHeight","tooltipHeight","tooltipX","tooltipY","textAlign","textBaseline","fillText","titleFont","titleWidth","labelWidth","longestTextWidth","halfHeight","getLineHeight","baseLineHeight","afterTitleIndex","fillRect","Scale","fit","buildYLabels","yLabels","stepDecimalPlaces","toFixed","yLabelWidth","showLabels","addXLabel","xLabels","valuesCount","removeXLabel","shift","startPoint","endPoint","padding","cachedYLabelWidth","cachedHeight","calculateYRange","calculateXLabelRotation","firstRotated","lastRotated","firstWidth","lastWidth","xScalePaddingRight","xScalePaddingLeft","xLabelRotation","cosRotation","originalLabelWidth","xLabelWidth","xGridWidth","calculateX","drawingArea","calculateY","scalingFactor","innerWidth","valueWidth","valueOffset","offsetGridLines","yLabelGap","xStart","labelString","yLabelCenter","linePositionY","gridLineWidth","gridLineColor","lineColor","xPos","linePos","isRotated","translate","rotate","RadialScale","size","backdropPaddingY","calculateCenterOffset","lineArc","setScaleSize","getCircumference","pointPosition","halfTextWidth","furthestRightIndex","furthestRightAngle","furthestLeftIndex","furthestLeftAngle","xProtrusionLeft","xProtrusionRight","radiusReductionRight","radiusReductionLeft","largestPossibleRadius","pointLabelFontSize","furthestRight","furthestLeft","pointLabelFontStyle","pointLabelFontFamily","getPointPosition","getIndexAngle","setCenterPoint","leftMovement","rightMovement","maxRight","maxLeft","xCenter","yCenter","angleMultiplier","distanceFromCenter","thisAngle","yCenterOffset","yHeight","showLabelBackdrop","backdropColor","backdropPaddingX","fontColor","angleLineWidth","angleLineColor","outerPosition","pointLabelPosition","pointLabelFontColor","labelsCount","halfLabelsCount","quarterLabelsCount","upperHalf","exactQuarter","timeout","instance","noConflict","defaultConfig","scaleShowGridLines","scaleGridLineColor","scaleGridLineWidth","barShowStroke","barStrokeWidth","barValueSpacing","barDatasetSpacing","ScaleClass","calculateBarX","datasetCount","datasetIndex","barIndex","xWidth","calculateBaseWidth","xAbsolute","barWidth","calculateBarWidth","baseWidth","activeBars","type","getBarsAtEvent","eachBars","bar","activeBar","highlightFill","highlightStroke","BarClass","datasetObject","dataPoint","datasetLabel","buildScale","activeElement","barsArray","eventPosition","datasetIterator","dataTotal","values","scaleOptions","beginAtZero","currentHeight","updatedRanges","addData","removeData","newScaleProps","easingDecimal","segmentShowStroke","segmentStrokeColor","segmentStrokeWidth","percentageInnerCutout","animateRotate","animateScale","SegmentArc","activeSegments","getSegmentsAtEvent","segment","activeSegment","highlightColor","calculateTotal","datapoint","segmentsArray","location","atIndex","silent","splice","color","highlight","circumference","calculateCircumference","total","indexToDelete","animDecimal","Doughnut","bezierCurve","bezierCurveTension","pointDot","pointDotRadius","pointDotStrokeWidth","pointHitDetectionRadius","datasetStroke","datasetStrokeWidth","datasetFill","PointClass","activePoints","getPointsAtEvent","eachPoints","point","activePoint","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","pointsArray","nextPoint","previousPoint","pointsWithValues","tension","controlPoints","bezierCurveTo","scaleShowLabelBackdrop","scaleBackdropColor","scaleBackdropPaddingY","scaleBackdropPaddingX","scaleShowLine","updateScaleRange","datapoints","scaleSizes","angleShowLineOut","activePointsCollection","mousePosition","fromCenter","anglePerIndex","pointIndex","totalDataArray"],"mappings":"AAUAA,OAAO,SAASC,EAASC,EAASC,IAClC,WAEC,YAGA,IAAIC,GAAOC,KACVC,EAAWF,EAAKG,MAGbA,EAAQ,SAASC,GAEpBH,KAAKI,OAASD,EAAQC,OAEtBJ,KAAKK,IAAMF,CAGCH,MAAKM,MAAQH,EAAQC,OAAOE,MAC3BN,KAAKO,OAASJ,EAAQC,OAAOG,MAK1C,OAJAP,MAAKQ,YAAcR,KAAKM,MAAQN,KAAKO,OAErCE,EAAQC,YAAYV,MAEbA,KAGRE,GAAMS,UACLC,QAECC,WAAW,EAGXC,eAAgB,GAGhBC,gBAAiB,eAGjBC,WAAW,EAGXC,eAAe,EAIfC,WAAY,KAEZC,eAAgB,KAEhBC,gBAAiB,KAGjBC,eAAgB,iBAGhBC,eAAgB,EAGhBC,iBAAiB,EAGjBC,WAAY,aAGZC,mBAAmB,EAGnBC,kBAAkB,EAGlBC,gBAAiB,qDAGjBC,cAAe,GAGfC,eAAgB,SAGhBC,eAAgB,OAGhBC,YAAY,EAGSC,qBAAqB,EAG1CC,cAAc,EAGdC,eAAgB,YAAa,aAAc,YAAa,YAGxDC,iBAAkB,kBAGlBC,kBAAmB,qDAGnBC,gBAAiB,GAGjBC,iBAAkB,SAGlBC,iBAAkB,OAGlBC,uBAAwB,qDAGxBC,qBAAsB,GAGtBC,sBAAuB,OAGvBC,sBAAuB,OAGvBC,gBAAiB,EAGjBC,gBAAiB,EAGjBC,iBAAkB,EAGlBC,oBAAqB,EAGrBC,eAAgB,GAGhBC,gBAAiB,+CAGjBC,qBAAsB,eAGtBC,0BAA2B,OAG3BC,oBAAqB,aAGrBC,oBAAqB,eAMvBnD,EAAMoD,QAGN,IAAI7C,GAAUP,EAAMO,WAGhB8C,EAAO9C,EAAQ8C,KAAO,SAASC,EAASC,EAASC,GACnD,GAAIC,GAAiBC,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,EAE3D,IAAIR,EACH,GAAIA,EAASS,UAAYT,EAASS,OAAO,CACxC,GAAIC,EACJ,KAAKA,EAAE,EAAGA,EAAEV,EAASS,OAAQC,IAC5BT,EAASU,MAAMT,GAAMF,EAASU,GAAIA,GAAGE,OAAOT,QAI7C,KAAK,GAAIU,KAAQb,GAChBC,EAASU,MAAMT,GAAMF,EAASa,GAAMA,GAAMD,OAAOT,KAKrDW,EAAQ7D,EAAQ6D,MAAQ,SAASC,GAChC,GAAIC,KAIJ,OAHAjB,GAAKgB,EAAI,SAASE,EAAMC,GACnBH,EAAII,eAAeD,KAAMF,EAASE,GAAOD,KAEvCD,GAERI,EAASnE,EAAQmE,OAAS,SAASC,GAMlC,MALAtB,GAAKK,MAAMC,UAAUC,MAAMC,KAAKC,UAAU,GAAI,SAASc,GACtDvB,EAAKuB,EAAgB,SAASL,EAAMC,GAC/BI,EAAgBH,eAAeD,KAAMG,EAAKH,GAAOD,OAGhDI,GAERE,EAAQtE,EAAQsE,MAAQ,WAEvB,GAAIC,GAAOpB,MAAMC,UAAUC,MAAMC,KAAKC,UAAU,EAEhD,OADAgB,GAAKC,YACEL,EAAOT,MAAM,KAAMa,IAE3BE,EAAUzE,EAAQyE,QAAU,SAASC,EAAed,GACnD,GAAIT,MAAMC,UAAUqB,QACnB,MAAOC,GAAcD,QAAQb,EAG7B,KAAK,GAAIH,GAAI,EAAGA,EAAIiB,EAAclB,OAAQC,IACzC,GAAIiB,EAAcjB,KAAOG,EAAM,MAAOH,EAEvC,OAAO,IAsCTkB,GAnCQ3E,EAAQ4E,MAAQ,SAASC,EAAYC,GAC5C,GAAIC,KAQJ,OANA/E,GAAQ8C,KAAK+B,EAAY,SAASjB,GAC7BkB,EAAelB,IAClBmB,EAASC,KAAKpB,KAITmB,GAEQ/E,EAAQiF,cAAgB,SAASP,EAAeI,EAAgBI,GAE1EA,IACJA,EAAa,GAEd,KAAK,GAAIzB,GAAIyB,EAAa,EAAGzB,EAAIiB,EAAclB,OAAQC,IAAK,CAC3D,GAAI0B,GAAcT,EAAcjB,EAChC,IAAIqB,EAAeK,GAClB,MAAOA,KAIUnF,EAAQoF,kBAAoB,SAASV,EAAeI,EAAgBI,GAElFA,IACJA,EAAaR,EAAclB,OAE5B,KAAK,GAAIC,GAAIyB,EAAa,EAAGzB,GAAK,EAAGA,IAAK,CACzC,GAAI0B,GAAcT,EAAcjB,EAChC,IAAIqB,EAAeK,GAClB,MAAOA,KAICnF,EAAQ2E,SAAW,SAASU,GAEtC,GAAIC,GAAS/F,KACTgG,EAAgBF,GAAcA,EAAWnB,eAAe,eAAkBmB,EAAWG,YAAc,WAAY,MAAOF,GAAO5B,MAAMnE,KAAMgE,YAEzIkC,EAAY,WAAYlG,KAAKiG,YAAcD,EAU/C,OATAE,GAAUrC,UAAYkC,EAAOlC,UAC7BmC,EAAanC,UAAY,GAAIqC,GAE7BF,EAAapB,OAASQ,EAElBU,GAAYlB,EAAOoB,EAAanC,UAAWiC,GAE/CE,EAAaG,UAAYJ,EAAOlC,UAEzBmC,IAERI,EAAO3F,EAAQ2F,KAAO,aACtBC,EAAM5F,EAAQ4F,IAAM,WACnB,GAAIC,GAAG,CACP,OAAO,YACN,MAAO,SAAWA,QAGpBC,EAAO9F,EAAQ8F,KAAO,SAASC,GAE1BC,OAAOC,SAAyC,kBAAvBD,QAAOC,QAAQH,MAAoBG,QAAQH,KAAKC,IAE9EG,EAAMlG,EAAQkG,IAAwB,kBAAVhH,SAAwBA,OAAOgH,IAE3DC,EAAWnG,EAAQmG,SAAW,SAASC,GACtC,OAAQC,MAAMC,WAAWF,KAAOG,SAASH,IAE1CI,EAAMxG,EAAQwG,IAAM,SAASC,GAC5B,MAAOC,MAAKF,IAAI9C,MAAOgD,KAAMD,IAE9BE,EAAM3G,EAAQ2G,IAAM,SAASF,GAC5B,MAAOC,MAAKC,IAAIjD,MAAOgD,KAAMD,IAe9BG,GAbM5G,EAAQ6G,IAAM,SAASC,EAAWC,EAASC,GAChD,GAAGb,EAASY,IACX,GAAID,EAAaC,EAChB,MAAOA,OAGJ,IAAGZ,EAASa,IACEA,EAAbF,EACJ,MAAOE,EAGT,OAAOF,IAEW9G,EAAQ4G,iBAAmB,SAASK,GACtD,MAAIA,GAAI,IAAI,GAAKd,EAASc,GAClBA,EAAIC,WAAWC,MAAM,KAAK,GAAG3D,OAG7B,IAGT4D,EAAYpH,EAAQqH,QAAU,SAASC,GACtC,MAAOA,IAAWZ,KAAKa,GAAG,MAqB3BC,GAlBoBxH,EAAQyH,kBAAoB,SAASC,EAAaC,GACrE,GAAIC,GAAsBD,EAAWE,EAAIH,EAAYG,EACpDC,EAAsBH,EAAWI,EAAIL,EAAYK,EACjDC,EAA2BtB,KAAKuB,KAAML,EAAsBA,EAAsBE,EAAsBA,GAGrGI,EAAkB,EAAVxB,KAAKa,GAASb,KAAKyB,MAAML,EAAqBF,EAO1D,OAJ0B,GAAtBA,GAAiD,EAAtBE,IAC9BI,GAAiB,EAARxB,KAAKa,KAIdW,MAAOA,EACPE,SAAUJ,IAGChI,EAAQwH,WAAa,SAASa,GAC1C,MAAQA,GAAa,IAAM,EAAK,EAAI,KAoBrCC,GAlBctI,EAAQuI,YAAc,SAASC,EAAWC,EAAYC,EAAWC,GAG9E,GAAIC,GAAIlC,KAAKuB,KAAKvB,KAAKmC,IAAIJ,EAAYZ,EAAEW,EAAWX,EAAE,GAAGnB,KAAKmC,IAAIJ,EAAYV,EAAES,EAAWT,EAAE,IAC5Fe,EAAIpC,KAAKuB,KAAKvB,KAAKmC,IAAIH,EAAWb,EAAEY,EAAYZ,EAAE,GAAGnB,KAAKmC,IAAIH,EAAWX,EAAEU,EAAYV,EAAE,IACzFgB,EAAGJ,EAAEC,GAAKA,EAAIE,GACdE,EAAGL,EAAEG,GAAKF,EAAIE,EACf,QACCG,OACCpB,EAAIY,EAAYZ,EAAEkB,GAAIL,EAAWb,EAAEW,EAAWX,GAC9CE,EAAIU,EAAYV,EAAEgB,GAAIL,EAAWX,EAAES,EAAWT,IAE/CmB,OACCrB,EAAGY,EAAYZ,EAAEmB,GAAIN,EAAWb,EAAEW,EAAWX,GAC7CE,EAAIU,EAAYV,EAAEiB,GAAIN,EAAWX,EAAES,EAAWT,MAIrB/H,EAAQsI,0BAA4B,SAASa,GACxE,MAAOzC,MAAK0C,MAAM1C,KAAK2C,IAAIF,GAAOzC,KAAK4C,QAoFxCC,GAlFsBvJ,EAAQwJ,oBAAsB,SAASC,EAAaC,EAAaC,EAAUC,EAAeC,GAG/G,GAAIC,GAAW,EACdC,EAAWrD,KAAK0C,MAAMM,GAAwB,IAAXC,IACnCK,EAAeF,GAAYC,EAExBhD,EAAWP,EAAIiD,GAClBzC,EAAWL,EAAI8C,EAIZ1C,KAAaC,IAChBD,GAAY,GAERC,GAAY,KAAQ4C,EACvB5C,GAAY,GAIZD,GAAY,GAad,KATA,GAAIkD,GAAavD,KAAKwD,IAAInD,EAAWC,GACpCmD,EAAwB7B,EAA0B2B,GAClDG,EAAW1D,KAAK2D,KAAKtD,GAAY,EAAIL,KAAKmC,IAAI,GAAIsB,KAA2BzD,KAAKmC,IAAI,GAAIsB,GAC1FG,EAAW,EAAkB,EAAI5D,KAAK0C,MAAMpC,GAAY,EAAIN,KAAKmC,IAAI,GAAIsB,KAA2BzD,KAAKmC,IAAI,GAAIsB,GACjHI,EAAaH,EAAWE,EACxBE,EAAY9D,KAAKmC,IAAI,GAAIsB,GACzBM,EAAgB/D,KAAKgE,MAAMH,EAAaC,IAGlCC,EAAgBV,GAAkCA,EAAL,EAAhBU,KAAmCT,GACtE,GAAGS,EAAgBV,EAClBS,GAAY,EACZC,EAAgB/D,KAAKgE,MAAMH,EAAWC,GAElCC,EAAgB,IAAM,IACzBT,GAAc,OAMf,IAAIH,GAAgBM,GAAyB,EAAE,CAE9C,GAAGK,EAAU,EAAI,IAAM,EAMtB,KALAA,IAAY,EACZC,EAAgB/D,KAAKgE,MAAMH,EAAWC,OASvCA,IAAY,EACZC,EAAgB/D,KAAKgE,MAAMH,EAAWC,EAWzC,OALIR,KACHS,EAAgBX,EAChBU,EAAYD,EAAaE,IAIzBE,MAAQF,EACRD,UAAYA,EACZ7D,IAAM2D,EACN9D,IAAM8D,EAAYG,EAAgBD,IAQzBxK,EAAQuJ,SAAW,SAASqB,EAAgBC,GAOtD,QAASC,GAAK/E,EAAKgF,GAGlB,GAAIC,GAAM,KAAKC,KAAKlF,GAKpB,GAAImF,UAAS,MACZ,2EAMAnF,EACEoF,QAAQ,YAAa,KACrBhE,MAAM,MAAMiE,KAAK,KACjBD,QAAQ,mBAAoB,QAC5BA,QAAQ,cAAe,UACvBhE,MAAM,KAAMiE,KAAK,OACjBjE,MAAM,MAAMiE,KAAK,YACjBjE,MAAM,MAAMiE,KAAK,OACnB,0BAnBDC,EAAMtF,GAAOsF,EAAMtF,EAuBnB,OAAOgF,GAAOC,EAAID,GAASC,EAhC5B,GAAGJ,YAA0BM,UAC3B,MAAON,GAAeC,EAGxB,IAAIQ,KA8BJ,OAAOP,GAAKF,EAAeC,KAe5BS,GAZiBtL,EAAQuL,eAAiB,SAASX,EAAeH,EAAcH,EAASE,GACxF,GAAIgB,GAAc,GAAIrI,OAAMsH,EAM5B,OALIgB,sBACH3I,EAAK0I,EAAY,SAASrC,EAAIuC,GAC7BF,EAAYE,GAASnC,EAASqB,GAAgB5G,MAAQsG,EAAYE,GAAWkB,EAAM,OAG9EF,GAKQxL,EAAQsL,eACvBK,OAAQ,SAAUhD,GACjB,MAAOA,IAERiD,WAAY,SAAUjD,GACrB,MAAOA,GAAIA,GAEZkD,YAAa,SAAUlD,GACtB,MAAO,GAAKA,GAAKA,EAAI,IAEtBmD,cAAe,SAAUnD,GACxB,OAAKA,GAAK,IAAS,EAAU,GAAQA,EAAIA,EAClC,QAAaA,GAAMA,EAAI,GAAK,IAEpCoD,YAAa,SAAUpD,GACtB,MAAOA,GAAIA,EAAIA,GAEhBqD,aAAc,SAAUrD,GACvB,MAAO,KAAMA,EAAIA,EAAI,EAAI,GAAKA,EAAIA,EAAI,IAEvCsD,eAAgB,SAAUtD,GACzB,OAAKA,GAAK,IAAS,EAAU,GAAQA,EAAIA,EAAIA,EACtC,KAAUA,GAAK,GAAKA,EAAIA,EAAI,IAEpCuD,YAAa,SAAUvD,GACtB,MAAOA,GAAIA,EAAIA,EAAIA,GAEpBwD,aAAc,SAAUxD,GACvB,MAAO,KAAOA,EAAIA,EAAI,EAAI,GAAKA,EAAIA,EAAIA,EAAI,IAE5CyD,eAAgB,SAAUzD,GACzB,OAAKA,GAAK,IAAS,EAAU,GAAQA,EAAIA,EAAIA,EAAIA,EAC1C,OAAWA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,IAEzC0D,YAAa,SAAU1D,GACtB,MAAO,IAAKA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,GAEnC2D,aAAc,SAAU3D,GACvB,MAAO,KAAMA,EAAIA,EAAI,EAAI,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,IAE/C4D,eAAgB,SAAU5D,GACzB,OAAKA,GAAK,IAAS,EAAU,GAAQA,EAAIA,EAAIA,EAAIA,EAAIA,EAC9C,KAAUA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,IAE5C6D,WAAY,SAAU7D,GACrB,MAAO,GAAKjC,KAAK+F,IAAI9D,EAAI,GAAKjC,KAAKa,GAAK,IAAM,GAE/CmF,YAAa,SAAU/D,GACtB,MAAO,GAAIjC,KAAKiG,IAAIhE,EAAI,GAAKjC,KAAKa,GAAK,KAExCqF,cAAe,SAAUjE,GACxB,MAAO,MAAUjC,KAAK+F,IAAI/F,KAAKa,GAAKoB,EAAI,GAAK,IAE9CkE,WAAY,SAAUlE,GACrB,MAAc,KAANA,EAAW,EAAI,EAAIjC,KAAKmC,IAAI,EAAG,IAAMF,EAAI,EAAI,KAEtDmE,YAAa,SAAUnE,GACtB,MAAc,KAANA,EAAW,EAAI,IAAMjC,KAAKmC,IAAI,EAAG,IAAMF,EAAI,GAAK,IAEzDoE,cAAe,SAAUpE,GACxB,MAAU,KAANA,EAAgB,EACV,IAANA,EAAgB,GACfA,GAAK,IAAS,EAAU,GAAQjC,KAAKmC,IAAI,EAAG,IAAMF,EAAI,IACpD,KAAUjC,KAAKmC,IAAI,EAAG,MAAQF,GAAK,IAE3CqE,WAAY,SAAUrE,GACrB,MAAIA,IAAK,EAAUA,EACZ,IAAMjC,KAAKuB,KAAK,GAAKU,GAAK,GAAKA,GAAK,IAE5CsE,YAAa,SAAUtE,GACtB,MAAO,GAAIjC,KAAKuB,KAAK,GAAKU,EAAIA,EAAI,EAAI,GAAKA,IAE5CuE,cAAe,SAAUvE,GACxB,OAAKA,GAAK,IAAS,EAAU,MAAUjC,KAAKuB,KAAK,EAAIU,EAAIA,GAAK,GACvD,IAASjC,KAAKuB,KAAK,GAAKU,GAAK,GAAKA,GAAK,IAE/CwE,cAAe,SAAUxE,GACxB,GAAIyE,GAAI,QACJC,EAAI,EACJC,EAAI,CACR,OAAU,KAAN3E,EAAgB,EACJ,IAAXA,GAAK,GAAgB,GACrB0E,IAAGA,EAAI,IACRC,EAAI5G,KAAKwD,IAAI,IAChBoD,EAAI,EACJF,EAAIC,EAAI,GACFD,EAAIC,GAAK,EAAI3G,KAAKa,IAAMb,KAAK6G,KAAK,EAAID,KACpCA,EAAI5G,KAAKmC,IAAI,EAAG,IAAMF,GAAK,IAAMjC,KAAKiG,IAAmB,GAAV,EAAJhE,EAAQyE,GAAU1G,KAAKa,GAAM8F,MAElFG,eAAgB,SAAU7E,GACzB,GAAIyE,GAAI,QACJC,EAAI,EACJC,EAAI,CACR,OAAU,KAAN3E,EAAgB,EACJ,IAAXA,GAAK,GAAgB,GACrB0E,IAAGA,EAAI,IACRC,EAAI5G,KAAKwD,IAAI,IAChBoD,EAAI,EACJF,EAAIC,EAAI,GACFD,EAAIC,GAAK,EAAI3G,KAAKa,IAAMb,KAAK6G,KAAK,EAAID,GACtCA,EAAI5G,KAAKmC,IAAI,EAAG,IAAMF,GAAKjC,KAAKiG,IAAmB,GAAV,EAAJhE,EAAQyE,GAAU1G,KAAKa,GAAM8F,GAAK,IAE/EI,iBAAkB,SAAU9E,GAC3B,GAAIyE,GAAI,QACJC,EAAI,EACJC,EAAI,CACR,OAAU,KAAN3E,EAAgB,EACA,IAAfA,GAAK,IAAoB,GACzB0E,IAAGA,EAAI,GAAW,KACnBC,EAAI5G,KAAKwD,IAAI,IAChBoD,EAAI,EACJF,EAAIC,EAAI,GACFD,EAAIC,GAAK,EAAI3G,KAAKa,IAAMb,KAAK6G,KAAK,EAAID,GACrC,EAAJ3E,GAAe,GAAO2E,EAAI5G,KAAKmC,IAAI,EAAG,IAAMF,GAAK,IAAMjC,KAAKiG,IAAmB,GAAV,EAAJhE,EAAQyE,GAAU1G,KAAKa,GAAM8F,GAC3FC,EAAI5G,KAAKmC,IAAI,EAAG,KAAOF,GAAK,IAAMjC,KAAKiG,IAAmB,GAAV,EAAJhE,EAAQyE,GAAU1G,KAAKa,GAAM8F,GAAK,GAAM,IAE5FK,WAAY,SAAU/E,GACrB,GAAIyE,GAAI,OACR,OAAO,IAAKzE,GAAK,GAAKA,IAAMyE,EAAI,GAAKzE,EAAIyE,IAE1CO,YAAa,SAAUhF,GACtB,GAAIyE,GAAI,OACR,OAAO,KAAMzE,EAAIA,EAAI,EAAI,GAAKA,IAAMyE,EAAI,GAAKzE,EAAIyE,GAAK,IAEvDQ,cAAe,SAAUjF,GACxB,GAAIyE,GAAI,OACR,QAAKzE,GAAK,IAAS,EAAU,GAASA,EAAIA,KAAOyE,GAAK,OAAW,GAAKzE,EAAIyE,GACnE,KAAUzE,GAAK,GAAKA,KAAOyE,GAAK,OAAW,GAAKzE,EAAIyE,GAAK,IAEjES,aAAc,SAAUlF,GACvB,MAAO,GAAI2C,EAAcwC,cAAc,EAAInF,IAE5CmF,cAAe,SAAUnF,GACxB,OAAKA,GAAK,GAAM,EAAI,KACZ,OAAcA,EAAIA,EACV,EAAI,KAATA,EACH,GAAK,QAAUA,GAAM,IAAM,MAASA,EAAI,KAChC,IAAM,KAAXA,EACH,GAAK,QAAUA,GAAM,KAAO,MAASA,EAAI,OAEzC,GAAK,QAAUA,GAAM,MAAQ,MAASA,EAAI,UAGnDoF,gBAAiB,SAAUpF,GAC1B,MAAQ,GAAJA,EAAsD,GAApC2C,EAAcuC,aAAiB,EAAJlF,GACD,GAAzC2C,EAAcwC,cAAkB,EAAJnF,EAAQ,GAAW,MAIxDqF,EAAmBhO,EAAQgO,iBAAmB,WAC7C,MAAOhI,QAAOiI,uBACbjI,OAAOkI,6BACPlI,OAAOmI,0BACPnI,OAAOoI,wBACPpI,OAAOqI,yBACP,SAASrL,GACR,MAAOgD,QAAOsI,WAAWtL,EAAU,IAAO,QAwD7CuL,GArDkBvO,EAAQwO,gBAAkB,WAC3C,MAAOxI,QAAOyI,sBACbzI,OAAO0I,4BACP1I,OAAO2I,yBACP3I,OAAO4I,uBACP5I,OAAO6I,wBACP,SAAS7L,GACR,MAAOgD,QAAO8I,aAAa9L,EAAU,IAAO,QAG/BhD,EAAQ+O,cAAgB,SAAS/L,EAASgM,EAAWC,EAAaC,EAAWC,EAAWC,GAEvG,GAAIC,GAAc,EACjBC,EAAiBhE,EAAc2D,IAAiB3D,EAAcK,OAE3D4D,EAAiB,WACpBF,GACA,IAAIG,GAAcH,EAAYL,EAC1BS,EAAcH,EAAeE,EAEjCxM,GAASM,KAAK8L,EAAcK,EAAYD,EAAaH,GACrDH,EAAW5L,KAAK8L,EAAcK,EAAYD,GACxBR,EAAdK,EACHD,EAAcG,eAAiBvB,EAAiBuB,GAEhDJ,EAAWzL,MAAM0L,GAGnBpB,GAAiBuB,IAGIvP,EAAQ0P,oBAAsB,SAASC,GAC5D,GAAIC,GAAQC,EACRC,EAAIH,EAAII,eAAiBJ,EAC5BhQ,EAASgQ,EAAIK,eAAiBL,EAAIM,WAClCC,EAAevQ,EAAOwQ,uBAYvB,OAVIL,GAAEM,SACLR,EAASE,EAAEM,QAAQ,GAAGC,QAAUH,EAAaI,KAC7CT,EAASC,EAAEM,QAAQ,GAAGG,QAAUL,EAAaM,MAI7CZ,EAASE,EAAEO,QAAUH,EAAaI,KAClCT,EAASC,EAAES,QAAUL,EAAaM,MAIlC3I,EAAI+H,EACJ7H,EAAI8H,IAIK7P,EAAQuO,SAAW,SAASkC,EAAKC,EAAUC,GACjDF,EAAKG,iBACRH,EAAKG,iBAAiBF,EAAUC,GACtBF,EAAKI,YACfJ,EAAKI,YAAY,KAAKH,EAAWC,GAEjCF,EAAK,KAAKC,GAAaC,IAGzBG,EAAc9Q,EAAQ8Q,YAAc,SAASL,EAAMC,EAAWK,GACzDN,EAAKO,oBACRP,EAAKO,oBAAoBN,EAAWK,GAAS,GACnCN,EAAKQ,YACfR,EAAKQ,YAAY,KAAKP,EAAUK,GAEhCN,EAAK,KAAOC,GAAa/K,GAc3BuL,GAXalR,EAAQmR,WAAa,SAAS/B,EAAegC,EAAeL,GAEnE3B,EAAciC,SAAQjC,EAAciC,WAEzCvO,EAAKsO,EAAc,SAASE,GAC3BlC,EAAciC,OAAOC,GAAa,WACjCP,EAAQrN,MAAM0L,EAAe7L,YAE9BgL,EAASa,EAAcmC,MAAM5R,OAAO2R,EAAUlC,EAAciC,OAAOC,OAGtDtR,EAAQkR,aAAe,SAAU9B,EAAegC,GAC9DtO,EAAKsO,EAAe,SAASL,EAAQO,GACpCR,EAAY1B,EAAcmC,MAAM5R,OAAQ2R,EAAWP,OAGrDS,EAAkBxR,EAAQwR,gBAAkB,SAASC,GACpD,GAAIC,GAAYD,EAAQE,UAExB,OAAOD,GAAUE,aAElBC,EAAmB7R,EAAQ6R,iBAAmB,SAASJ,GACtD,GAAIC,GAAYD,EAAQE,UAExB,OAAOD,GAAUI,cAGlB7R,GADiBD,EAAQ+R,eAAiB/R,EAAQwR,gBACpCxR,EAAQC,YAAc,SAASsR,GAC5C,GAAI3R,GAAM2R,EAAM3R,IACfC,EAAQ0R,EAAM5R,OAAOE,MACrBC,EAASyR,EAAM5R,OAAOG,MAEnBkG,QAAOgM,mBACVpS,EAAID,OAAOsS,MAAMpS,MAAQA,EAAQ,KACjCD,EAAID,OAAOsS,MAAMnS,OAASA,EAAS,KACnCF,EAAID,OAAOG,OAASA,EAASkG,OAAOgM,iBACpCpS,EAAID,OAAOE,MAAQA,EAAQmG,OAAOgM,iBAClCpS,EAAIsS,MAAMlM,OAAOgM,iBAAkBhM,OAAOgM,qBAI5CG,EAAQnS,EAAQmS,MAAQ,SAASZ,GAChCA,EAAM3R,IAAIwS,UAAU,EAAE,EAAEb,EAAM1R,MAAM0R,EAAMzR,SAE3CuS,EAAarS,EAAQqS,WAAa,SAASC,EAAUC,EAAUC,GAC9D,MAAOD,GAAY,IAAMD,EAAU,MAAQE,GAE5CC,EAAczS,EAAQyS,YAAc,SAAS7S,EAAI8S,EAAKC,GACrD/S,EAAI8S,KAAOA,CACX,IAAIE,GAAU,CAKd,OAJA9P,GAAK6P,EAAe,SAASE,GAC5B,GAAIC,GAAYlT,EAAImT,YAAYF,GAAQhT,KACxC+S,GAAWE,EAAYF,EAAWE,EAAYF,IAExCA,GAERI,EAAuBhT,EAAQgT,qBAAuB,SAASpT,EAAIiI,EAAEE,EAAElI,EAAMC,EAAOmT,GACnFrT,EAAIsT,YACJtT,EAAIuT,OAAOtL,EAAIoL,EAAQlL,GACvBnI,EAAIwT,OAAOvL,EAAIhI,EAAQoT,EAAQlL,GAC/BnI,EAAIyT,iBAAiBxL,EAAIhI,EAAOkI,EAAGF,EAAIhI,EAAOkI,EAAIkL,GAClDrT,EAAIwT,OAAOvL,EAAIhI,EAAOkI,EAAIjI,EAASmT,GACnCrT,EAAIyT,iBAAiBxL,EAAIhI,EAAOkI,EAAIjI,EAAQ+H,EAAIhI,EAAQoT,EAAQlL,EAAIjI,GACpEF,EAAIwT,OAAOvL,EAAIoL,EAAQlL,EAAIjI,GAC3BF,EAAIyT,iBAAiBxL,EAAGE,EAAIjI,EAAQ+H,EAAGE,EAAIjI,EAASmT,GACpDrT,EAAIwT,OAAOvL,EAAGE,EAAIkL,GAClBrT,EAAIyT,iBAAiBxL,EAAGE,EAAGF,EAAIoL,EAAQlL,GACvCnI,EAAI0T,YAMN7T,GAAM8T,aAEN9T,EAAM+T,KAAO,SAASzI,EAAK0I,EAAQlC,GAClChS,KAAKkU,QAAUA,EACflU,KAAKgS,MAAQA,EACbhS,KAAKsG,GAAKD,IAEVnG,EAAM8T,UAAUhU,KAAKsG,IAAMtG,KAIvBkU,EAAQnS,YACX/B,KAAKmU,SAENnU,KAAKoU,WAAWrQ,KAAK/D,KAAKwL,IAI3B5G,EAAO1E,EAAM+T,KAAKpQ,WACjBuQ,WAAa,WAAW,MAAOpU,OAC/B4S,MAAQ,WAEP,MADAA,GAAM5S,KAAKgS,OACJhS,MAERqU,KAAO,WAGN,MADA5T,GAAQwO,gBAAgBlL,KAAKhE,EAAMC,KAAKgQ,gBACjChQ,MAERmU,OAAS,SAAS1Q,GACjBzD,KAAKqU,MACL,IAAIjU,GAASJ,KAAKgS,MAAM5R,OACvBkU,EAAWrC,EAAgBjS,KAAKgS,MAAM5R,QACtCmU,EAAYvU,KAAKkU,QAAQlS,oBAAsBsS,EAAWtU,KAAKgS,MAAMxR,YAAc8R,EAAiBtS,KAAKgS,MAAM5R,OAUhH,OARAA,GAAOE,MAAQN,KAAKgS,MAAM1R,MAAQgU,EAClClU,EAAOG,OAAUP,KAAKgS,MAAMzR,OAASgU,EAErC7T,EAAYV,KAAKgS,OAEO,kBAAbvO,IACVA,EAASU,MAAMnE,KAAM4D,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,IAErDhE,MAERwU,OAASpO,EACTqO,OAAS,SAASD,GAkBjB,MAjBIA,IACHxU,KAAKwU,SAEFxU,KAAKkU,QAAQrT,YAAc2T,EAC9B/T,EAAQ+O,cACPxP,KAAK0U,KACL1U,KAAKkU,QAAQpT,eACbd,KAAKkU,QAAQnT,gBACbf,KAAKkU,QAAQ9Q,oBACbpD,KAAKkU,QAAQ7Q,oBACbrD,OAIDA,KAAK0U,OACL1U,KAAKkU,QAAQ7Q,oBAAoBU,KAAK/D,OAEhCA,MAER2U,eAAiB,WAChB,MAAO3K,GAAShK,KAAKkU,QAAQU,eAAe5U,OAE7C6U,QAAU,WACT7U,KAAK4S,QACLjB,EAAa3R,KAAMA,KAAK8R,cACjB5R,GAAM8T,UAAUhU,KAAKsG,KAE7BwO,YAAc,SAASC,EAAeC,GAEF,mBAAxBhV,MAAKiV,iBAAgCjV,KAAKiV,kBAErD,IAAIC,GAAY,SAAUC,GACzB,GAAIC,IAAU,CAEd,OAAID,GAASlR,SAAWjE,KAAKiV,eAAehR,OAC3CmR,GAAU,GAIX7R,EAAK4R,EAAU,SAASE,EAASlJ,GAC5BkJ,IAAYrV,KAAKiV,eAAe9I,KACnCiJ,GAAU,IAETpV,MACIoV,IACLrR,KAAK/D,KAAM+U,EAEd,IAAKG,GAAcF,EAAnB,CAOA,GAHChV,KAAKiV,eAAiBF,EAEvB/U,KAAK0U,OACDK,EAAc9Q,OAAS,EAE1B,GAAIjE,KAAKsV,UAAYtV,KAAKsV,SAASrR,OAAS,EAAG,CAI9C,IAAK,GAHDsR,GACHC,EAEQtR,EAAIlE,KAAKsV,SAASrR,OAAS,EAAGC,GAAK,IAC3CqR,EAAYvV,KAAKsV,SAASpR,GAAGuR,QAAUzV,KAAKsV,SAASpR,GAAGwR,MAAQ1V,KAAKsV,SAASpR,GAAGyR,SACjFH,EAAYtQ,EAAQqQ,EAAWR,EAAc,IAC3B,KAAdS,GAH0CtR,KAO/C,GAAI0R,MACHC,KACAC,EAAiB,WAGhB,GACCC,GAGAC,EACAC,EACAC,EACAC,EAPGhB,KAEHiB,KACAC,IAgCD,OA3BA5V,GAAQ8C,KAAKvD,KAAKsV,SAAU,SAASgB,GACpCP,EAAiBO,EAAQb,QAAUa,EAAQZ,MAAQY,EAAQX,SACvDI,EAAeP,IAAcO,EAAeP,GAAWe,YAC1DpB,EAAS1P,KAAKsQ,EAAeP,MAI/B/U,EAAQ8C,KAAK4R,EAAU,SAASE,GAC/Be,EAAW3Q,KAAK4P,EAAQ/M,GACxB+N,EAAW5Q,KAAK4P,EAAQ7M,GAIxBoN,EAAcnQ,KAAKhF,EAAQuJ,SAAShK,KAAKkU,QAAQhR,qBAAsBmS,IACvEQ,EAAcpQ,MACb+Q,KAAMnB,EAAQoB,OAAOC,WAAarB,EAAQqB,UAC1CC,OAAQtB,EAAQoB,OAAOG,aAAevB,EAAQuB,eAG7C5W,MAEHmW,EAAO/O,EAAIiP,GACXJ,EAAOhP,EAAIoP,GAEXH,EAAO9O,EAAIgP,GACXJ,EAAO/O,EAAImP,IAGV9N,EAAI4N,EAAOlW,KAAKgS,MAAM1R,MAAM,EAAK4V,EAAOF,EACxCxN,GAAI2N,EAAOF,GAAM,IAEhBlS,KAAK/D,KAAMwV,EAEf,IAAItV,GAAM2W,cACTvO,EAAGwN,EAAexN,EAClBE,EAAGsN,EAAetN,EAClBsO,SAAU9W,KAAKkU,QAAQrR,gBACvBkU,SAAU/W,KAAKkU,QAAQtR,gBACvBoU,QAAShX,KAAKkU,QAAQlR,eACtB0T,UAAW1W,KAAKkU,QAAQ/R,iBACxB8U,UAAWjX,KAAKkU,QAAQ3R,iBACxB0Q,WAAYjT,KAAKkU,QAAQ9R,kBACzB4Q,UAAWhT,KAAKkU,QAAQ5R,iBACxB4U,SAAUlX,KAAKkU,QAAQ7R,gBACvB8U,eAAgBnX,KAAKkU,QAAQvR,sBAC7ByU,gBAAiBpX,KAAKkU,QAAQ1R,uBAC9B6U,eAAgBrX,KAAKkU,QAAQxR,sBAC7B4U,cAAetX,KAAKkU,QAAQzR,qBAC5B8U,aAAcvX,KAAKkU,QAAQnR,oBAC3ByU,OAAQ5B,EACR6B,aAAc5B,EACd6B,sBAAwB1X,KAAKkU,QAAQ/Q,0BACrCwU,MAAO5C,EAAc,GAAG6C,MACxB5F,MAAOhS,KAAKgS,MACZ3R,IAAKL,KAAKgS,MAAM3R,MACdqU,WAGHnR,GAAKwR,EAAe,SAAS8C,GAC5B,GAAIC,GAAkBD,EAAQC,iBAC9B,IAAI5X,GAAM6X,SACTzP,EAAGnB,KAAKgE,MAAM2M,EAAgBxP,GAC9BE,EAAGrB,KAAKgE,MAAM2M,EAAgBtP,GAC9BsO,SAAU9W,KAAKkU,QAAQrR,gBACvBkU,SAAU/W,KAAKkU,QAAQtR,gBACvB8T,UAAW1W,KAAKkU,QAAQ/R,iBACxB8U,UAAWjX,KAAKkU,QAAQ3R,iBACxB0Q,WAAYjT,KAAKkU,QAAQ9R,kBACzB4Q,UAAWhT,KAAKkU,QAAQ5R,iBACxB4U,SAAUlX,KAAKkU,QAAQ7R,gBACvB2V,YAAahY,KAAKkU,QAAQpR,iBAC1ByU,aAAcvX,KAAKkU,QAAQnR,oBAC3BkV,KAAMjO,EAAShK,KAAKkU,QAAQjR,gBAAiB4U,GAC7C7F,MAAOhS,KAAKgS,QACV0C,QACD1U,KAGL,OAAOA,QAERkY,cAAgB,WACf,MAAOlY,MAAKgS,MAAM5R,OAAO+X,UAAUhU,MAAMnE,KAAKgS,MAAM5R,OAAQ4D,cAI9D9D,EAAM+T,KAAKrP,OAAS,SAASkB,GAE5B,GAAIC,GAAS/F,KAEToY,EAAY,WACf,MAAOrS,GAAO5B,MAAMnE,KAAKgE,WAU1B,IANAoU,EAAUvU,UAAYS,EAAMyB,EAAOlC,WAEnCe,EAAOwT,EAAUvU,UAAWiC,GAE5BsS,EAAUxT,OAAS1E,EAAM+T,KAAKrP,OAE1BkB,EAAWuS,MAAQtS,EAAOlC,UAAUwU,KAAK,CAE5C,GAAIC,GAAYxS,EAAWuS,MAAQtS,EAAOlC,UAAUwU,KAOhDE,EAAgBrY,EAAMS,SAASoF,EAAOlC,UAAUwU,MAAS/T,EAAMpE,EAAMS,SAASoF,EAAOlC,UAAUwU,SAEnGnY,GAAMS,SAAS2X,GAAa1T,EAAO2T,EAAazS,EAAWnF,UAE3DT,EAAMoD,MAAMgV,GAAaF,EAGzBlY,EAAM2D,UAAUyU,GAAa,SAAS9M,EAAK0I,GAC1C,GAAIsE,GAASzT,EAAM7E,EAAMS,SAASC,OAAQV,EAAMS,SAAS2X,GAAYpE,MACrE,OAAO,IAAIkE,GAAU5M,EAAKgN,EAAOxY,WAGlCuG,GAAK,iEAEN,OAAOR,IAGR7F,EAAM2X,QAAU,SAASY,GACxB7T,EAAO5E,KAAKyY,GACZzY,KAAKoU,WAAWjQ,MAAMnE,KAAKgE,WAC3BhE,KAAK0Y,QAEN9T,EAAO1E,EAAM2X,QAAQhU,WACpBuQ,WAAa,aACbuE,QAAU,SAASC,GAQlB,MAPKA,GAGJrV,EAAKqV,EAAM,SAASlU,GACnB1E,KAAK0E,GAAO1E,KAAKyW,OAAO/R,IACvB1E,MAJF4E,EAAO5E,KAAKA,KAAKyW,QAMXzW,MAER0Y,KAAO,WAGN,MAFA1Y,MAAKyW,OAASnS,EAAMtE,YACbA,MAAKyW,OAAOA,OACZzW,MAER6Y,OAAS,SAASC,GAKjB,MAJAvV,GAAKuV,EAAS,SAASrU,EAAMC,GAC5B1E,KAAKyW,OAAO/R,GAAO1E,KAAK0E,GACxB1E,KAAK0E,GAAOD,GACXzE,MACKA,MAER+Y,WAAa,SAASH,EAAMI,GAI3B,MAHAzV,GAAKqV,EAAM,SAASnU,EAAMC,GACzB1E,KAAK0E,IAASD,EAAQzE,KAAKyW,OAAO/R,IAAQsU,EAAQhZ,KAAKyW,OAAO/R,IAC7D1E,MACKA,MAER8X,gBAAkB,WACjB,OACCxP,EAAItI,KAAKsI,EACTE,EAAIxI,KAAKwI,IAGX+N,SAAU,WACT,MAAO3P,GAAS5G,KAAKyE,UAIvBvE,EAAM2X,QAAQjT,OAASQ,EAGvBlF,EAAM+Y,MAAQ/Y,EAAM2X,QAAQjT,QAC3BsU,SAAS,EACTC,QAAS,SAASC,EAAOC,GACxB,GAAIC,GAAoBtZ,KAAKuZ,mBAAqBvZ,KAAK0T,MACvD,OAASvM,MAAKmC,IAAI8P,EAAOpZ,KAAKsI,EAAG,GAAGnB,KAAKmC,IAAI+P,EAAOrZ,KAAKwI,EAAG,GAAMrB,KAAKmC,IAAIgQ,EAAkB,IAE9F5E,KAAO,WACN,GAAI1U,KAAKkZ,QAAQ,CAChB,GAAI7Y,GAAML,KAAKK,GACfA,GAAIsT,YAEJtT,EAAImZ,IAAIxZ,KAAKsI,EAAGtI,KAAKwI,EAAGxI,KAAK0T,OAAQ,EAAW,EAARvM,KAAKa,IAC7C3H,EAAI0T,YAEJ1T,EAAIoZ,YAAczZ,KAAK4W,YACvBvW,EAAIqZ,UAAY1Z,KAAK2Z,YAErBtZ,EAAIuZ,UAAY5Z,KAAK0W,UAErBrW,EAAImW,OACJnW,EAAIsW,aA+BPzW,EAAM2Z,IAAM3Z,EAAM2X,QAAQjT,QACzBuU,QAAU,SAASC,EAAOC,GAEzB,GAAIS,GAAwBrZ,EAAQyH,kBAAkBlI,MACrDsI,EAAG8Q,EACH5Q,EAAG6Q,IAIAU,EAAiBD,EAAsBnR,OAAS3I,KAAKga,YAAcF,EAAsBnR,OAAS3I,KAAKia,SAC1GC,EAAgBJ,EAAsBjR,UAAY7I,KAAKma,aAAeL,EAAsBjR,UAAY7I,KAAKoa,WAE9G,OAAQL,IAAiBG,GAG1BpC,gBAAkB,WACjB,GAAIuC,GAAcra,KAAKga,YAAeha,KAAKia,SAAWja,KAAKga,YAAc,EACxEM,GAAmBta,KAAKoa,YAAcpa,KAAKma,aAAe,EAAIna,KAAKma,WACpE,QACC7R,EAAItI,KAAKsI,EAAKnB,KAAK+F,IAAImN,GAAeC,EACtC9R,EAAIxI,KAAKwI,EAAKrB,KAAKiG,IAAIiN,GAAeC,IAGxC5F,KAAO,SAAS6F,GAEf,GAEIla,GAAML,KAAKK,GAEfA,GAAIsT,YAEJtT,EAAImZ,IAAIxZ,KAAKsI,EAAGtI,KAAKwI,EAAGxI,KAAKoa,YAAapa,KAAKga,WAAYha,KAAKia,UAEhE5Z,EAAImZ,IAAIxZ,KAAKsI,EAAGtI,KAAKwI,EAAGxI,KAAKma,YAAana,KAAKia,SAAUja,KAAKga,YAAY,GAE1E3Z,EAAI0T,YACJ1T,EAAIoZ,YAAczZ,KAAK4W,YACvBvW,EAAIqZ,UAAY1Z,KAAK2Z,YAErBtZ,EAAIuZ,UAAY5Z,KAAK0W,UAErBrW,EAAImW,OACJnW,EAAIma,SAAW,QAEXxa,KAAKya,YACRpa,EAAIsW,YAKPzW,EAAMwa,UAAYxa,EAAM2X,QAAQjT,QAC/B8P,KAAO,WACN,GAAIrU,GAAML,KAAKK,IACdsa,EAAY3a,KAAKM,MAAM,EACvBsa,EAAQ5a,KAAKsI,EAAIqS,EACjBE,EAAS7a,KAAKsI,EAAIqS,EAClB1J,EAAMjR,KAAK6E,MAAQ7E,KAAK6E,KAAO7E,KAAKwI,GACpCsS,EAAa9a,KAAK2Z,YAAc,CAI7B3Z,MAAKya,aACRG,GAASE,EACTD,GAAUC,EACV7J,GAAO6J,GAGRza,EAAIsT,YAEJtT,EAAIuZ,UAAY5Z,KAAK0W,UACrBrW,EAAIoZ,YAAczZ,KAAK4W,YACvBvW,EAAIqZ,UAAY1Z,KAAK2Z,YAIrBtZ,EAAIuT,OAAOgH,EAAO5a,KAAK6E,MACvBxE,EAAIwT,OAAO+G,EAAO3J,GAClB5Q,EAAIwT,OAAOgH,EAAQ5J,GACnB5Q,EAAIwT,OAAOgH,EAAQ7a,KAAK6E,MACxBxE,EAAImW,OACAxW,KAAKya,YACRpa,EAAIsW,UAGNpW,OAAS,WACR,MAAOP,MAAK6E,KAAO7E,KAAKwI,GAEzB2Q,QAAU,SAASC,EAAOC,GACzB,MAAQD,IAAUpZ,KAAKsI,EAAItI,KAAKM,MAAM,GAAK8Y,GAAUpZ,KAAKsI,EAAItI,KAAKM,MAAM,GAAO+Y,GAAUrZ,KAAKwI,GAAK6Q,GAAUrZ,KAAK6E,QAIrH3E,EAAM6X,QAAU7X,EAAM2X,QAAQjT,QAC7B8P,KAAO,WAEN,GAAIrU,GAAML,KAAKgS,MAAM3R,GAErBA,GAAI8S,KAAOL,EAAW9S,KAAKkX,SAASlX,KAAKgT,UAAUhT,KAAKiT,YAExDjT,KAAK+a,OAAS,SACd/a,KAAKgb,OAAS,OAGd,IAAIC,GAAe,EAEfC,EAAe7a,EAAImT,YAAYxT,KAAKiY,MAAM3X,MAAQ,EAAEN,KAAK8W,SAC5DqE,EAAoBnb,KAAKkX,SAAW,EAAElX,KAAK+W,SAC3CqE,EAAgBD,EAAoBnb,KAAKgY,YAAciD,CAEpDjb,MAAKsI,EAAI4S,EAAa,EAAGlb,KAAKgS,MAAM1R,MACvCN,KAAK+a,OAAS,OACJ/a,KAAKsI,EAAI4S,EAAa,EAAI,IACpClb,KAAK+a,OAAS,SAGX/a,KAAKwI,EAAI4S,EAAgB,IAC5Bpb,KAAKgb,OAAS,QAIf,IAAIK,GAAWrb,KAAKsI,EAAI4S,EAAa,EACpCI,EAAWtb,KAAKwI,EAAI4S,CAIrB,QAFA/a,EAAIuZ,UAAY5Z,KAAK0W,UAEd1W,KAAKgb,QAEZ,IAAK,QAEJ3a,EAAIsT,YACJtT,EAAIuT,OAAO5T,KAAKsI,EAAEtI,KAAKwI,EAAIyS,GAC3B5a,EAAIwT,OAAO7T,KAAKsI,EAAItI,KAAKgY,YAAahY,KAAKwI,GAAKyS,EAAejb,KAAKgY,cACpE3X,EAAIwT,OAAO7T,KAAKsI,EAAItI,KAAKgY,YAAahY,KAAKwI,GAAKyS,EAAejb,KAAKgY,cACpE3X,EAAI0T,YACJ1T,EAAImW,MACJ,MACD,KAAK,QACJ8E,EAAWtb,KAAKwI,EAAIyS,EAAejb,KAAKgY,YAExC3X,EAAIsT,YACJtT,EAAIuT,OAAO5T,KAAKsI,EAAGtI,KAAKwI,EAAIyS,GAC5B5a,EAAIwT,OAAO7T,KAAKsI,EAAItI,KAAKgY,YAAahY,KAAKwI,EAAIyS,EAAejb,KAAKgY,aACnE3X,EAAIwT,OAAO7T,KAAKsI,EAAItI,KAAKgY,YAAahY,KAAKwI,EAAIyS,EAAejb,KAAKgY,aACnE3X,EAAI0T,YACJ1T,EAAImW,OAIL,OAAOxW,KAAK+a,QAEZ,IAAK,OACJM,EAAWrb,KAAKsI,EAAI4S,GAAgBlb,KAAKuX,aAAevX,KAAKgY,YAC7D,MACD,KAAK,QACJqD,EAAWrb,KAAKsI,GAAKtI,KAAKuX,aAAevX,KAAKgY,aAI/CvE,EAAqBpT,EAAIgb,EAASC,EAASJ,EAAaC,EAAkBnb,KAAKuX,cAE/ElX,EAAImW,OAEJnW,EAAIuZ,UAAY5Z,KAAKiX,UACrB5W,EAAIkb,UAAY,SAChBlb,EAAImb,aAAe,SACnBnb,EAAIob,SAASzb,KAAKiY,KAAMoD,EAAWH,EAAa,EAAGI,EAAWH,EAAkB,MAIlFjb,EAAM2W,aAAe3W,EAAM2X,QAAQjT,QAClCwP,WAAa,WACZpU,KAAKmT,KAAOL,EAAW9S,KAAKkX,SAASlX,KAAKgT,UAAUhT,KAAKiT,YAEzDjT,KAAK0b,UAAY5I,EAAW9S,KAAKsX,cAActX,KAAKqX,eAAerX,KAAKoX,iBAExEpX,KAAKO,OAAUP,KAAKwX,OAAOvT,OAASjE,KAAKkX,UAAclX,KAAKwX,OAAOvT,OAAO,IAAMjE,KAAKkX,SAAS,GAAqB,EAAdlX,KAAK+W,SAAkC,IAApB/W,KAAKsX,cAE7HtX,KAAKK,IAAI8S,KAAOnT,KAAK0b,SAErB,IAAIC,GAAa3b,KAAKK,IAAImT,YAAYxT,KAAK2X,OAAOrX,MAEjDsb,EAAa1I,EAAYlT,KAAKK,IAAIL,KAAKmT,KAAKnT,KAAKwX,QAAUxX,KAAKkX,SAAW,EAC3E2E,EAAmB5U,GAAK2U,EAAWD,GAEpC3b,MAAKM,MAAQub,EAAkC,EAAd7b,KAAK8W,QAGtC,IAAIgF,GAAa9b,KAAKO,OAAO,CAIzBP,MAAKwI,EAAIsT,EAAa,EACzB9b,KAAKwI,EAAIsT,EACC9b,KAAKwI,EAAIsT,EAAa9b,KAAKgS,MAAMzR,SAC3CP,KAAKwI,EAAIxI,KAAKgS,MAAMzR,OAASub,GAI1B9b,KAAKsI,EAAItI,KAAKgS,MAAM1R,MAAM,EAC7BN,KAAKsI,GAAKtI,KAAKgX,QAAUhX,KAAKM,MAE9BN,KAAKsI,GAAKtI,KAAKgX,SAKjB+E,cAAgB,SAAS5P,GACxB,GAAI6P,GAAiBhc,KAAKwI,EAAKxI,KAAKO,OAAO,EAAKP,KAAK+W,SACpDkF,EAAkB9P,EAAM,CAGzB,OAAc,KAAVA,EACI6P,EAAiBhc,KAAKsX,cAAc,EAEpC0E,GAAiC,IAAdhc,KAAKkX,SAAa+E,EAAmBjc,KAAKkX,SAAS,GAA0B,IAArBlX,KAAKsX,eAIzF5C,KAAO,WACNjB,EAAqBzT,KAAKK,IAAIL,KAAKsI,EAAEtI,KAAKwI,EAAIxI,KAAKO,OAAO,EAAEP,KAAKM,MAAMN,KAAKO,OAAOP,KAAKuX,aACxF,IAAIlX,GAAML,KAAKK,GACfA,GAAIuZ,UAAY5Z,KAAK0W,UACrBrW,EAAImW,OACJnW,EAAI0T,YAEJ1T,EAAIkb,UAAY,OAChBlb,EAAImb,aAAe,SACnBnb,EAAIuZ,UAAY5Z,KAAKmX,eACrB9W,EAAI8S,KAAOnT,KAAK0b,UAEhBrb,EAAIob,SAASzb,KAAK2X,MAAM3X,KAAKsI,EAAItI,KAAK8W,SAAU9W,KAAK+b,cAAc,IAEnE1b,EAAI8S,KAAOnT,KAAKmT,KAChB1S,EAAQ8C,KAAKvD,KAAKwX,OAAO,SAASI,EAAMzL,GACvC9L,EAAIuZ,UAAY5Z,KAAKiX,UACrB5W,EAAIob,SAAS7D,EAAM5X,KAAKsI,EAAItI,KAAK8W,SAAW9W,KAAKkX,SAAW,EAAGlX,KAAK+b,cAAc5P,EAAQ,IAM1F9L,EAAIuZ,UAAY5Z,KAAK0X,sBACrBrX,EAAI6b,SAASlc,KAAKsI,EAAItI,KAAK8W,SAAU9W,KAAK+b,cAAc5P,EAAQ,GAAKnM,KAAKkX,SAAS,EAAGlX,KAAKkX,SAAUlX,KAAKkX,UAE1G7W,EAAIuZ,UAAY5Z,KAAKyX,aAAatL,GAAOqK,KACzCnW,EAAI6b,SAASlc,KAAKsI,EAAItI,KAAK8W,SAAU9W,KAAK+b,cAAc5P,EAAQ,GAAKnM,KAAKkX,SAAS,EAAGlX,KAAKkX,SAAUlX,KAAKkX,WAGzGlX,SAIJE,EAAMic,MAAQjc,EAAM2X,QAAQjT,QAC3BwP,WAAa,WACZpU,KAAKoc,OAENC,aAAe,WACdrc,KAAKsc,UAIL,KAAK,GAFDC,GAAoBlV,EAAiBrH,KAAKiL,WAErC/G,EAAE,EAAGA,GAAGlE,KAAKoL,MAAOlH,IAC5BlE,KAAKsc,QAAQ7W,KAAKuE,EAAShK,KAAKqL,gBAAgB5G,OAAOzE,KAAKoH,IAAOlD,EAAIlE,KAAKiL,WAAYuR,QAAQD,KAEjGvc,MAAKyc,YAAezc,KAAKkZ,SAAWlZ,KAAK0c,WAAcxJ,EAAYlT,KAAKK,IAAIL,KAAKmT,KAAKnT,KAAKsc,SAAW,GAEvGK,UAAY,SAAS/E,GACpB5X,KAAK4c,QAAQnX,KAAKmS,GAClB5X,KAAK6c,cACL7c,KAAKoc,OAENU,aAAe,WACd9c,KAAK4c,QAAQG,QACb/c,KAAK6c,cACL7c,KAAKoc,OAGNA,IAAK,WAIJpc,KAAKgd,WAAchd,KAAY,QAAIA,KAAKkX,SAAW,EACnDlX,KAAKid,SAAYjd,KAAY,QAAIA,KAAKO,OAA0B,IAAhBP,KAAKkX,SAAkB,EAAIlX,KAAKO,OAGhFP,KAAKgd,YAAchd,KAAKkd,QACxBld,KAAKid,UAAYjd,KAAKkd,OAGtB,IACCC,GADGC,EAAepd,KAAKid,SAAWjd,KAAKgd,UAqBxC,KARAhd,KAAKqd,gBAAgBD,GAIrBpd,KAAKqc,eAELrc,KAAKsd,0BAEEF,EAAepd,KAAKid,SAAWjd,KAAKgd,YAC1CI,EAAepd,KAAKid,SAAWjd,KAAKgd,WACpCG,EAAoBnd,KAAKyc,YAEzBzc,KAAKqd,gBAAgBD,GACrBpd,KAAKqc,eAGDc,EAAoBnd,KAAKyc,aAC5Bzc,KAAKsd,2BAKRA,wBAA0B,WAIzBtd,KAAKK,IAAI8S,KAAOnT,KAAKmT,IAErB,IAECoK,GACAC,EAHGC,EAAazd,KAAKK,IAAImT,YAAYxT,KAAK4c,QAAQ,IAAItc,MACtDod,EAAY1d,KAAKK,IAAImT,YAAYxT,KAAK4c,QAAQ5c,KAAK4c,QAAQ3Y,OAAS,IAAI3D,KASzE,IAJAN,KAAK2d,mBAAqBD,EAAU,EAAI,EACxC1d,KAAK4d,kBAAqBH,EAAW,EAAIzd,KAAKyc,YAAc,GAAMgB,EAAW,EAAIzd,KAAKyc,YAAc,GAEpGzc,KAAK6d,eAAiB,EAClB7d,KAAKkZ,QAAQ,CAChB,GACC4E,GADGC,EAAqB7K,EAAYlT,KAAKK,IAAIL,KAAKmT,KAAKnT,KAAK4c,QAG7D5c,MAAKge,YAAcD,CAKnB,KAHA,GAAIE,GAAa9W,KAAK0C,MAAM7J,KAAKke,WAAW,GAAKle,KAAKke,WAAW,IAAM,EAG/Dle,KAAKge,YAAcC,GAAsC,IAAxBje,KAAK6d,gBAA0B7d,KAAKge,YAAcC,GAAcje,KAAK6d,gBAAkB,IAAM7d,KAAK6d,eAAiB,GAC3JC,EAAc3W,KAAK+F,IAAIrF,EAAU7H,KAAK6d,iBAEtCN,EAAeO,EAAcL,EAC7BD,EAAcM,EAAcJ,EAGxBH,EAAevd,KAAKkX,SAAW,EAAIlX,KAAKyc,YAAc,IACzDzc,KAAK4d,kBAAoBL,EAAevd,KAAKkX,SAAW,GAEzDlX,KAAK2d,mBAAqB3d,KAAKkX,SAAS,EAGxClX,KAAK6d,iBACL7d,KAAKge,YAAcF,EAAcC,CAG9B/d,MAAK6d,eAAiB,IACzB7d,KAAKid,UAAY9V,KAAKiG,IAAIvF,EAAU7H,KAAK6d,iBAAiBE,EAAqB,OAIhF/d,MAAKge,YAAc,EACnBhe,KAAK2d,mBAAqB3d,KAAKkd,QAC/Bld,KAAK4d,kBAAoB5d,KAAKkd,SAMhCG,gBAAiBjX,EACjB+X,YAAa,WACZ,MAAOne,MAAKgd,WAAahd,KAAKid,UAE/BmB,WAAa,SAAS3Z,GACrB,GAAI4Z,GAAgBre,KAAKme,eAAiBne,KAAKoH,IAAMpH,KAAKiH,IAC1D,OAAOjH,MAAKid,SAAYoB,GAAiB5Z,EAAQzE,KAAKoH,MAEvD8W,WAAa,SAAS/R,GACrB,GAECmS,IAFgBte,KAAK6d,eAAiB,EAEzB7d,KAAKM,OAASN,KAAK4d,kBAAoB5d,KAAK2d,qBACzDY,EAAaD,GAAYte,KAAK6c,aAAgB7c,KAAoB,gBAAI,EAAI,IAC1Ewe,EAAeD,EAAapS,EAASnM,KAAK4d,iBAM3C,OAJI5d,MAAKye,kBACRD,GAAgBD,EAAW,GAGrBpX,KAAKgE,MAAMqT,IAEnB3F,OAAS,SAASC,GACjBrY,EAAQmE,OAAO5E,KAAM8Y,GACrB9Y,KAAKoc,OAEN1H,KAAO,WACN,GAAIrU,GAAML,KAAKK,IACdqe,GAAa1e,KAAKid,SAAWjd,KAAKgd,YAAchd,KAAKoL,MACrDuT,EAASxX,KAAKgE,MAAMnL,KAAK4d,kBACtB5d,MAAKkZ,UACR7Y,EAAIuZ,UAAY5Z,KAAKiX,UACrB5W,EAAI8S,KAAOnT,KAAKmT,KAChB5P,EAAKvD,KAAKsc,QAAQ,SAASsC,EAAYzS,GACtC,GAAI0S,GAAe7e,KAAKid,SAAYyB,EAAYvS,EAC/C2S,EAAgB3X,KAAKgE,MAAM0T,EAE5Bxe,GAAIkb,UAAY,QAChBlb,EAAImb,aAAe,SACfxb,KAAK0c,YACRrc,EAAIob,SAASmD,EAAYD,EAAS,GAAGE,GAEtCxe,EAAIsT,YACAxH,EAAQ,GAEX9L,EAAIqZ,UAAY1Z,KAAK+e,cACrB1e,EAAIoZ,YAAczZ,KAAKgf,gBAGvB3e,EAAIqZ,UAAY1Z,KAAK0Z,UACrBrZ,EAAIoZ,YAAczZ,KAAKif,WAGxBH,GAAiBre,EAAQwH,WAAW5H,EAAIqZ,WAExCrZ,EAAIuT,OAAO+K,EAAQG,GACnBze,EAAIwT,OAAO7T,KAAKM,MAAOwe,GACvBze,EAAIsW,SACJtW,EAAI0T,YAEJ1T,EAAIqZ,UAAY1Z,KAAK0Z,UACrBrZ,EAAIoZ,YAAczZ,KAAKif,UACvB5e,EAAIsT,YACJtT,EAAIuT,OAAO+K,EAAS,EAAGG,GACvBze,EAAIwT,OAAO8K,EAAQG,GACnBze,EAAIsW,SACJtW,EAAI0T,aAEH/T,MAEFuD,EAAKvD,KAAK4c,QAAQ,SAAShF,EAAMzL,GAChC,GAAI+S,GAAOlf,KAAKke,WAAW/R,GAASlE,EAAWjI,KAAK0Z,WAEnDyF,EAAUnf,KAAKke,WAAW/R,GAASnM,KAAKye,gBAAkB,GAAM,IAAMxW,EAAWjI,KAAK0Z,WACtF0F,EAAapf,KAAK6d,eAAiB,CAEpCxd,GAAIsT,YAEAxH,EAAQ,GAEX9L,EAAIqZ,UAAY1Z,KAAK+e,cACrB1e,EAAIoZ,YAAczZ,KAAKgf,gBAGvB3e,EAAIqZ,UAAY1Z,KAAK0Z,UACrBrZ,EAAIoZ,YAAczZ,KAAKif,WAExB5e,EAAIuT,OAAOuL,EAAQnf,KAAKid,UACxB5c,EAAIwT,OAAOsL,EAAQnf,KAAKgd,WAAa,GACrC3c,EAAIsW,SACJtW,EAAI0T,YAGJ1T,EAAIqZ,UAAY1Z,KAAK0Z,UACrBrZ,EAAIoZ,YAAczZ,KAAKif,UAIvB5e,EAAIsT,YACJtT,EAAIuT,OAAOuL,EAAQnf,KAAKid,UACxB5c,EAAIwT,OAAOsL,EAAQnf,KAAKid,SAAW,GACnC5c,EAAIsW,SACJtW,EAAI0T,YAEJ1T,EAAIqY,OACJrY,EAAIgf,UAAUH,EAAK,EAAclf,KAAKid,SAAW,GAAKjd,KAAKid,SAAW,GACtE5c,EAAIif,OAAsC,GAA/BzX,EAAU7H,KAAK6d,iBAC1Bxd,EAAI8S,KAAOnT,KAAKmT,KAChB9S,EAAIkb,UAAY,EAAc,QAAU,SACxClb,EAAImb,aAAe,EAAc,SAAW,MAC5Cnb,EAAIob,SAAS7D,EAAO,EAAG,GACvBvX,EAAIsY,WACH3Y,UAOLE,EAAMqf,YAAcrf,EAAM2X,QAAQjT,QACjCwP,WAAY,WACXpU,KAAKwf,KAAOpY,GAAKpH,KAAKO,OAAQP,KAAKM,QACnCN,KAAKme,YAAene,KAAY,QAAKA,KAAKwf,KAAK,GAAMxf,KAAKkX,SAAS,EAAIlX,KAAKyf,kBAAqBzf,KAAKwf,KAAK,GAE5GE,sBAAuB,SAASjb,GAE/B,GAAI4Z,GAAgBre,KAAKme,aAAene,KAAKiH,IAAMjH,KAAKoH,IAExD,QAAQ3C,EAAQzE,KAAKoH,KAAOiX,GAE7BxF,OAAS,WACH7Y,KAAK2f,QAGT3f,KAAKme,YAAene,KAAY,QAAKA,KAAKwf,KAAK,GAAMxf,KAAKkX,SAAS,EAAIlX,KAAKyf,kBAAqBzf,KAAKwf,KAAK,EAF3Gxf,KAAK4f,eAIN5f,KAAKqc,gBAENA,aAAc,WACbrc,KAAKsc,UAIL,KAAK,GAFDC,GAAoBlV,EAAiBrH,KAAKiL,WAErC/G,EAAE,EAAGA,GAAGlE,KAAKoL,MAAOlH,IAC5BlE,KAAKsc,QAAQ7W,KAAKuE,EAAShK,KAAKqL,gBAAgB5G,OAAOzE,KAAKoH,IAAOlD,EAAIlE,KAAKiL,WAAYuR,QAAQD,OAGlGsD,iBAAmB,WAClB,MAAiB,GAAR1Y,KAAKa,GAAQhI,KAAK6c,aAE5B+C,aAAc,WAgCb,GACCE,GACA5b,EACAqP,EACAwM,EAEAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAdGC,EAAwBpZ,GAAMpH,KAAKO,OAAO,EAAIP,KAAKygB,mBAAqB,EAAIzgB,KAAKM,MAAM,IAK1FogB,EAAgB1gB,KAAKM,MAGrBqgB,EAAe,CAShB,KADA3gB,KAAKK,IAAI8S,KAAOL,EAAW9S,KAAKygB,mBAAmBzgB,KAAK4gB,oBAAoB5gB,KAAK6gB,sBAC5E3c,EAAE,EAAEA,EAAElE,KAAK6c,YAAY3Y,IAE3B4b,EAAgB9f,KAAK8gB,iBAAiB5c,EAAGsc,GACzCjN,EAAYvT,KAAKK,IAAImT,YAAYxJ,EAAShK,KAAKqL,gBAAkB5G,MAAOzE,KAAKwX,OAAOtT,MAAO5D,MAAQ,EACzF,IAAN4D,GAAWA,IAAMlE,KAAK6c,YAAY,GAIrCkD,EAAgBxM,EAAU,EACtBuM,EAAcxX,EAAIyX,EAAgBW,IACrCA,EAAgBZ,EAAcxX,EAAIyX,EAClCC,EAAqB9b,GAElB4b,EAAcxX,EAAIyX,EAAgBY,IACrCA,EAAeb,EAAcxX,EAAIyX,EACjCG,EAAoBhc,IAGbA,EAAIlE,KAAK6c,YAAY,EAEzBiD,EAAcxX,EAAIiL,EAAYmN,IACjCA,EAAgBZ,EAAcxX,EAAIiL,EAClCyM,EAAqB9b,GAGdA,EAAIlE,KAAK6c,YAAY,GAEzBiD,EAAcxX,EAAIiL,EAAYoN,IACjCA,EAAeb,EAAcxX,EAAIiL,EACjC2M,EAAoBhc,EAKvBkc,GAAkBO,EAElBN,EAAmBlZ,KAAK2D,KAAK4V,EAAgB1gB,KAAKM,OAElD2f,EAAqBjgB,KAAK+gB,cAAcf,GAExCG,EAAoBngB,KAAK+gB,cAAcb,GAEvCI,EAAuBD,EAAmBlZ,KAAKiG,IAAI6S,EAAqB9Y,KAAKa,GAAG,GAEhFuY,EAAsBH,EAAkBjZ,KAAKiG,IAAI+S,EAAoBhZ,KAAKa,GAAG,GAG7EsY,EAAwB1Z,EAAS0Z,GAAyBA,EAAuB,EACjFC,EAAuB3Z,EAAS2Z,GAAwBA,EAAsB,EAE9EvgB,KAAKme,YAAcqC,GAAyBD,EAAsBD,GAAsB,EAGxFtgB,KAAKghB,eAAeT,EAAqBD,IAG1CU,eAAgB,SAASC,EAAcC,GAEtC,GAAIC,GAAWnhB,KAAKM,MAAQ4gB,EAAgBlhB,KAAKme,YAChDiD,EAAUH,EAAejhB,KAAKme,WAE/Bne,MAAKqhB,SAAWD,EAAUD,GAAU,EAEpCnhB,KAAKshB,QAAWthB,KAAKO,OAAO,GAG7BwgB,cAAgB,SAAS5U,GACxB,GAAIoV,GAA6B,EAAVpa,KAAKa,GAAUhI,KAAK6c,WAG3C,OAAO1Q,GAAQoV,EAAmBpa,KAAKa,GAAG,GAE3C8Y,iBAAmB,SAAS3U,EAAOqV,GAClC,GAAIC,GAAYzhB,KAAK+gB,cAAc5U,EACnC,QACC7D,EAAKnB,KAAK+F,IAAIuU,GAAaD,EAAsBxhB,KAAKqhB,QACtD7Y,EAAKrB,KAAKiG,IAAIqU,GAAaD,EAAsBxhB,KAAKshB,UAGxD5M,KAAM,WACL,GAAI1U,KAAKkZ,QAAQ,CAChB,GAAI7Y,GAAML,KAAKK,GAqDf,IApDAkD,EAAKvD,KAAKsc,QAAS,SAAS1E,EAAOzL,GAElC,GAAIA,EAAQ,EAAE,CACb,GAEC2T,GAFG4B,EAAgBvV,GAASnM,KAAKme,YAAYne,KAAKoL,OAClDuW,EAAU3hB,KAAKshB,QAAUI,CAI1B,IAAI1hB,KAAK0Z,UAAY,EAIpB,GAHArZ,EAAIoZ,YAAczZ,KAAKif,UACvB5e,EAAIqZ,UAAY1Z,KAAK0Z,UAElB1Z,KAAK2f,QACPtf,EAAIsT,YACJtT,EAAImZ,IAAIxZ,KAAKqhB,QAASrhB,KAAKshB,QAASI,EAAe,EAAW,EAARva,KAAKa,IAC3D3H,EAAI0T,YACJ1T,EAAIsW,aACC,CACLtW,EAAIsT,WACJ,KAAK,GAAIzP,GAAE,EAAEA,EAAElE,KAAK6c,YAAY3Y,IAE/B4b,EAAgB9f,KAAK8gB,iBAAiB5c,EAAGlE,KAAK0f,sBAAsB1f,KAAKoH,IAAO+E,EAAQnM,KAAKiL,YACnF,IAAN/G,EACH7D,EAAIuT,OAAOkM,EAAcxX,EAAGwX,EAActX,GAE1CnI,EAAIwT,OAAOiM,EAAcxX,EAAGwX,EAActX,EAG5CnI,GAAI0T,YACJ1T,EAAIsW,SAGN,GAAG3W,KAAK0c,WAAW,CAElB,GADArc,EAAI8S,KAAOL,EAAW9S,KAAKkX,SAASlX,KAAKgT,UAAUhT,KAAKiT,YACpDjT,KAAK4hB,kBAAkB,CAC1B,GAAIhG,GAAavb,EAAImT,YAAYoE,GAAOtX,KACxCD,GAAIuZ,UAAY5Z,KAAK6hB,cACrBxhB,EAAI6b,SACHlc,KAAKqhB,QAAUzF,EAAW,EAAI5b,KAAK8hB,iBACnCH,EAAU3hB,KAAKkX,SAAS,EAAIlX,KAAKyf,iBACjC7D,EAAmC,EAAtB5b,KAAK8hB,iBAClB9hB,KAAKkX,SAAiC,EAAtBlX,KAAKyf,kBAGvBpf,EAAIkb,UAAY,SAChBlb,EAAImb,aAAe,SACnBnb,EAAIuZ,UAAY5Z,KAAK+hB,UACrB1hB,EAAIob,SAAS7D,EAAO5X,KAAKqhB,QAASM,MAGlC3hB,OAEEA,KAAK2f,QAAQ,CACjBtf,EAAIqZ,UAAY1Z,KAAKgiB,eACrB3hB,EAAIoZ,YAAczZ,KAAKiiB,cACvB,KAAK,GAAI/d,GAAIlE,KAAK6c,YAAc,EAAG3Y,GAAK,EAAGA,IAAK,CAC/C,GAAIlE,KAAKgiB,eAAiB,EAAE,CAC3B,GAAIE,GAAgBliB,KAAK8gB,iBAAiB5c,EAAGlE,KAAK0f,sBAAsB1f,KAAKiH,KAC7E5G,GAAIsT,YACJtT,EAAIuT,OAAO5T,KAAKqhB,QAASrhB,KAAKshB,SAC9BjhB,EAAIwT,OAAOqO,EAAc5Z,EAAG4Z,EAAc1Z,GAC1CnI,EAAIsW,SACJtW,EAAI0T,YAGL,GAAIoO,GAAqBniB,KAAK8gB,iBAAiB5c,EAAGlE,KAAK0f,sBAAsB1f,KAAKiH,KAAO,EACzF5G,GAAI8S,KAAOL,EAAW9S,KAAKygB,mBAAmBzgB,KAAK4gB,oBAAoB5gB,KAAK6gB,sBAC5ExgB,EAAIuZ,UAAY5Z,KAAKoiB,mBAErB,IAAIC,GAAcriB,KAAKwX,OAAOvT,OAC7Bqe,EAAkBtiB,KAAKwX,OAAOvT,OAAO,EACrCse,EAAqBD,EAAgB,EACrCE,EAAiBD,EAAJre,GAA0BA,EAAIme,EAAcE,EACzDE,EAAgBve,IAAMqe,GAAsBre,IAAMme,EAAcE,CAEhEliB,GAAIkb,UADK,IAANrX,EACa,SACPA,IAAMoe,EACC,SACFA,EAAJpe,EACM,OAEA,QAKhB7D,EAAImb,aADDiH,EACgB,SACTD,EACS,SAEA,MAGpBniB,EAAIob,SAASzb,KAAKwX,OAAOtT,GAAIie,EAAmB7Z,EAAG6Z,EAAmB3Z,SAQ3E/H,EAAQuO,SAASvI,OAAQ,SAAU,WAElC,GAAIic,EACJ,OAAO,YACNnT,aAAamT,GACbA,EAAU3T,WAAW,WACpBxL,EAAKrD,EAAM8T,UAAU,SAAS2O,GAGzBA,EAASzO,QAAQnS,YACpB4gB,EAASxO,OAAOwO,EAASlO,QAAQ,MAGjC,SAKD9N,EACHhH,OAAO,WACN,MAAOO,KAEoB,gBAAXJ,IAAuBA,EAAOD,UAC/CC,EAAOD,QAAUK,GAGlBH,EAAKG,MAAQA,EAEbA,EAAM0iB,WAAa,WAElB,MADA7iB,GAAKG,MAAQD,EACNC,KAGN6D,KAAK/D,MAER,WACC,YAEA,IAAID,GAAOC,KACVE,EAAQH,EAAKG,MACbO,EAAUP,EAAMO,QAGboiB,GAEHnhB,kBAAmB,EAGnBohB,oBAAqB,EAGrBC,mBAAqB,kBAGrBC,mBAAqB,EAGrBC,eAAgB,EAGhBC,eAAiB,EAGjBC,gBAAkB,EAGlBC,kBAAoB,EAGpBxO,eAAiB,kOAKlB1U,GAAM+T,KAAKrP,QACVyT,KAAM,MACN1X,SAAWkiB,EACXzO,WAAa,SAAS5I,GAGrB,GAAI0I,GAAUlU,KAAKkU,OAEnBlU,MAAKqjB,WAAanjB,EAAMic,MAAMvX,QAC7B6Z,iBAAkB,EAClB6E,cAAgB,SAASC,EAAcC,EAAcC,GAEpD,GAAIC,GAAS1jB,KAAK2jB,qBACjBC,EAAY5jB,KAAKke,WAAWuF,GAAaC,EAAO,EAChDG,EAAW7jB,KAAK8jB,kBAAkBP,EAEnC,OAAOK,GAAaC,EAAWL,EAAiBA,EAAetP,EAAQkP,kBAAqBS,EAAS,GAEtGF,mBAAqB,WACpB,MAAQ3jB,MAAKke,WAAW,GAAKle,KAAKke,WAAW,GAAO,EAAEhK,EAAQiP,iBAE/DW,kBAAoB,SAASP,GAE5B,GAAIQ,GAAY/jB,KAAK2jB,sBAAyBJ,EAAe,GAAKrP,EAAQkP,iBAE1E,OAAQW,GAAYR,KAItBvjB,KAAKsV,YAGDtV,KAAKkU,QAAQjS,cAChBxB,EAAQmR,WAAW5R,KAAMA,KAAKkU,QAAQhS,cAAe,SAASkO,GAC7D,GAAI4T,GAA2B,aAAb5T,EAAI6T,KAAuBjkB,KAAKkkB,eAAe9T,KAEjEpQ,MAAKmkB,SAAS,SAASC,GACtBA,EAAIzL,SAAS,YAAa,kBAE3BlY,EAAQ8C,KAAKygB,EAAY,SAASK,GACjCA,EAAU3N,UAAY2N,EAAUC,cAChCD,EAAUzN,YAAcyN,EAAUE,kBAEnCvkB,KAAK8U,YAAYkP,KAKnBhkB,KAAKwkB,SAAWtkB,EAAMwa,UAAU9V,QAC/B+U,YAAc3Z,KAAKkU,QAAQgP,eAC3BzI,WAAaza,KAAKkU,QAAQ+O,cAC1B5iB,IAAML,KAAKgS,MAAM3R,MAIlBI,EAAQ8C,KAAKiI,EAAK8J,SAAS,SAASgB,GAEnC,GAAImO,IACH7M,MAAQtB,EAAQsB,OAAS,KACzBlB,UAAYJ,EAAQI,UACpBE,YAAcN,EAAQM,YACtBlB,QAGD1V,MAAKsV,SAAS7P,KAAKgf,GAEnBhkB,EAAQ8C,KAAK+S,EAAQ9K,KAAK,SAASkZ,EAAUvY,GAE5CsY,EAAc/O,KAAKjQ,KAAK,GAAIzF,MAAKwkB,UAChC/f,MAAQigB,EACR9M,MAAQpM,EAAKgM,OAAOrL,GACpBwY,aAAcrO,EAAQsB,MACtBhB,YAAcN,EAAQM,YACtBF,UAAYJ,EAAQI,UACpB4N,cAAgBhO,EAAQgO,eAAiBhO,EAAQI,UACjD6N,gBAAkBjO,EAAQiO,iBAAmBjO,EAAQM,gBAErD5W,OAEDA,MAEFA,KAAK4kB,WAAWpZ,EAAKgM,QAErBxX,KAAKwkB,SAAS3gB,UAAUgB,KAAO7E,KAAK2S,MAAMsK,SAE1Cjd,KAAKmkB,SAAS,SAASC,EAAKjY,EAAOqX,GAClC/iB,EAAQmE,OAAOwf,GACd9jB,MAAQN,KAAK2S,MAAMmR,kBAAkB9jB,KAAKsV,SAASrR,QACnDqE,EAAGtI,KAAK2S,MAAM2Q,cAActjB,KAAKsV,SAASrR,OAAQuf,EAAcrX,GAChE3D,EAAGxI,KAAK2S,MAAMsK,WAEfmH,EAAI1L,QACF1Y,MAEHA,KAAKyU,UAENoE,OAAS,WACR7Y,KAAK2S,MAAMkG,SAEXpY,EAAQ8C,KAAKvD,KAAKiV,eAAgB,SAAS4P,GAC1CA,EAAclM,SAAS,YAAa,kBAGrC3Y,KAAKmkB,SAAS,SAASC,GACtBA,EAAI1L,SAEL1Y,KAAKyU,UAEN0P,SAAW,SAAS1gB,GACnBhD,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,EAASkN,GAC5C/iB,EAAQ8C,KAAK+S,EAAQZ,KAAMjS,EAAUzD,KAAMwjB,IAC1CxjB,OAEHkkB,eAAiB,SAAS3T,GAQzB,IAAK,GAFJkT,GALGqB,KACHC,EAAgBtkB,EAAQ0P,oBAAoBI,GAC5CyU,EAAkB,SAAS1O,GAC1BwO,EAAUrf,KAAK6Q,EAAQZ,KAAK+N,KAIrBD,EAAe,EAAGA,EAAexjB,KAAKsV,SAASrR,OAAQuf,IAC/D,IAAKC,EAAW,EAAGA,EAAWzjB,KAAKsV,SAASkO,GAAc9N,KAAKzR,OAAQwf,IACtE,GAAIzjB,KAAKsV,SAASkO,GAAc9N,KAAK+N,GAAUtK,QAAQ4L,EAAczc,EAAEyc,EAAcvc,GAEpF,MADA/H,GAAQ8C,KAAKvD,KAAKsV,SAAU0P,GACrBF,CAKV,OAAOA,IAERF,WAAa,SAASpN,GACrB,GAAI9T,GAAO1D,KAEPilB,EAAY,WACf,GAAIC,KAIJ,OAHAxhB,GAAKygB,SAAS,SAASC,GACtBc,EAAOzf,KAAK2e,EAAI3f,SAEVygB,GAGJC,GACH9Z,eAAiBrL,KAAKkU,QAAQ1S,WAC9BjB,OAASP,KAAKgS,MAAMzR,OACpBD,MAAQN,KAAKgS,MAAM1R,MACnBD,IAAML,KAAKgS,MAAM3R,IACjB4W,UAAYjX,KAAKkU,QAAQpS,eACzBoV,SAAWlX,KAAKkU,QAAQtS,cACxBoR,UAAYhT,KAAKkU,QAAQrS,eACzBoR,WAAajT,KAAKkU,QAAQvS,gBAC1Bkb,YAAcrF,EAAOvT,OACrBmhB,YAAcplB,KAAKkU,QAAQxS,iBAC3B4I,aAAetK,KAAKkU,QAAQzS,kBAC5B4b,gBAAiB,SAASgI,GACzB,GAAIC,GAAgB7kB,EAAQwJ,oBAC3Bgb,IACAI,EACArlB,KAAKkX,SACLlX,KAAKolB,YACLplB,KAAKsK,aAEN7J,GAAQmE,OAAO5E,KAAMslB,IAEtB1I,QAAUpF,EACVrE,KAAO1S,EAAQqS,WAAW9S,KAAKkU,QAAQtS,cAAe5B,KAAKkU,QAAQrS,eAAgB7B,KAAKkU,QAAQvS,iBAChG+X,UAAY1Z,KAAKkU,QAAQ5S,eACzB2d,UAAYjf,KAAKkU,QAAQ7S,eACzB0d,cAAiB/e,KAAKkU,QAA0B,mBAAIlU,KAAKkU,QAAQ8O,mBAAqB,EACtFhE,cAAiBhf,KAAKkU,QAA0B,mBAAIlU,KAAKkU,QAAQ6O,mBAAqB,gBACtF7F,QAAWld,KAAKkU,QAAiB,UAAI,EAAKlU,KAAKkU,QAAqB,cAAIlU,KAAKkU,QAAQgP,eAAiB,EACtGxG,WAAa1c,KAAKkU,QAAQ3S,gBAC1B2X,QAAUlZ,KAAKkU,QAAQlT,UAGpBhB,MAAKkU,QAAQjT,eAChBR,EAAQmE,OAAOugB,GACd9H,gBAAiB5c,EAAQ2F,KACzBgF,MAAOpL,KAAKkU,QAAQhT,WACpB+J,UAAWjL,KAAKkU,QAAQ/S,eACxBiG,IAAKpH,KAAKkU,QAAQ9S,gBAClB6F,IAAKjH,KAAKkU,QAAQ9S,gBAAmBpB,KAAKkU,QAAQhT,WAAalB,KAAKkU,QAAQ/S,iBAI9EnB,KAAK2S,MAAQ,GAAI3S,MAAKqjB,WAAW8B,IAElCI,QAAU,SAASrb,EAAY0N,GAE9BnX,EAAQ8C,KAAK2G,EAAY,SAASzF,EAAM+e,GAEvCxjB,KAAKsV,SAASkO,GAAc9N,KAAKjQ,KAAK,GAAIzF,MAAKwkB,UAC9C/f,MAAQA,EACRmT,MAAQA,EACRtP,EAAGtI,KAAK2S,MAAM2Q,cAActjB,KAAKsV,SAASrR,OAAQuf,EAAcxjB,KAAK2S,MAAMkK,YAAY,GACvFrU,EAAGxI,KAAK2S,MAAMsK,SACd3c,MAAQN,KAAK2S,MAAMmR,kBAAkB9jB,KAAKsV,SAASrR,QACnDY,KAAO7E,KAAK2S,MAAMsK,SAClBrG,YAAc5W,KAAKsV,SAASkO,GAAc5M,YAC1CF,UAAY1W,KAAKsV,SAASkO,GAAc9M,cAExC1W,MAEFA,KAAK2S,MAAMgK,UAAU/E,GAErB5X,KAAK6Y,UAEN2M,WAAa,WACZxlB,KAAK2S,MAAMmK,eAEXrc,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnCA,EAAQZ,KAAKqH,SACZ/c,MACFA,KAAK6Y,UAENrE,OAAS,WACR/T,EAAQmE,OAAO5E,KAAKwkB,SAAS3gB,WAC5B2E,EAAGxI,KAAK2S,MAAMsK,SACdpY,KAAO7E,KAAK2S,MAAMsK,UAEnB,IAAIwI,GAAgBhlB,EAAQmE,QAC3BrE,OAASP,KAAKgS,MAAMzR,OACpBD,MAAQN,KAAKgS,MAAM1R,OAEpBN,MAAK2S,MAAMkG,OAAO4M,IAEnB/Q,KAAO,SAASsE,GACf,GAAI0M,GAAgB1M,GAAQ,CAC5BhZ,MAAK4S,OAEK5S,MAAKgS,MAAM3R,GAErBL,MAAK2S,MAAM+B,KAAKgR,GAGhBjlB,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,EAAQkN,GAC3C/iB,EAAQ8C,KAAK+S,EAAQZ,KAAK,SAAS0O,EAAIjY,GAClCiY,EAAI7N,aACP6N,EAAIvf,KAAO7E,KAAK2S,MAAMsK,SAEtBmH,EAAIrL,YACHzQ,EAAItI,KAAK2S,MAAM2Q,cAActjB,KAAKsV,SAASrR,OAAQuf,EAAcrX,GACjE3D,EAAIxI,KAAK2S,MAAMyL,WAAWgG,EAAI3f,OAC9BnE,MAAQN,KAAK2S,MAAMmR,kBAAkB9jB,KAAKsV,SAASrR,SACjDyhB,GAAehR,SAElB1U,OAEDA,UAKF+D,KAAK/D,MACR,WACC,YAEA,IAAID,GAAOC,KACVE,EAAQH,EAAKG,MAEbO,EAAUP,EAAMO,QAEboiB,GAEH8C,mBAAoB,EAGpBC,mBAAqB,OAGrBC,mBAAqB,EAGrBC,sBAAwB,GAGxBhlB,eAAiB,IAGjBC,gBAAkB,gBAGlBglB,eAAgB,EAGhBC,cAAe,EAGfpR,eAAiB,kOAKlB1U;EAAM+T,KAAKrP,QAEVyT,KAAM,WAEN1X,SAAWkiB,EAGXzO,WAAa,SAAS5I,GAGrBxL,KAAK2V,YACL3V,KAAKoa,aAAe3Z,EAAQ2G,KAAKpH,KAAKgS,MAAM1R,MAAMN,KAAKgS,MAAMzR,SAAWP,KAAKkU,QAAQ2R,mBAAmB,GAAG,EAE3G7lB,KAAKimB,WAAa/lB,EAAM2Z,IAAIjV,QAC3BvE,IAAML,KAAKgS,MAAM3R,IACjBiI,EAAItI,KAAKgS,MAAM1R,MAAM,EACrBkI,EAAIxI,KAAKgS,MAAMzR,OAAO,IAInBP,KAAKkU,QAAQjS,cAChBxB,EAAQmR,WAAW5R,KAAMA,KAAKkU,QAAQhS,cAAe,SAASkO,GAC7D,GAAI8V,GAA+B,aAAb9V,EAAI6T,KAAuBjkB,KAAKmmB,mBAAmB/V,KAEzE3P,GAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,GACnCA,EAAQzN,SAAS,gBAElBlY,EAAQ8C,KAAK2iB,EAAe,SAASG,GACpCA,EAAc3P,UAAY2P,EAAcC,iBAEzCtmB,KAAK8U,YAAYoR,KAGnBlmB,KAAKumB,eAAe/a,GAEpB/K,EAAQ8C,KAAKiI,EAAK,SAASgb,EAAWra,GACrCnM,KAAKulB,QAAQiB,EAAWra,GAAO,IAC9BnM,MAEFA,KAAKyU,UAEN0R,mBAAqB,SAAS5V,GAC7B,GAAIkW,MAEAC,EAAWjmB,EAAQ0P,oBAAoBI,EAK3C,OAHA9P,GAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,GAC/BA,EAAQjN,QAAQuN,EAASpe,EAAEoe,EAASle,IAAIie,EAAchhB,KAAK2gB,IAC9DpmB,MACKymB,GAERlB,QAAU,SAASa,EAASO,EAASC,GACpC,GAAIza,GAAQwa,GAAW3mB,KAAK2V,SAAS1R,MACrCjE,MAAK2V,SAASkR,OAAO1a,EAAO,EAAG,GAAInM,MAAKimB,YACvCxhB,MAAQ2hB,EAAQ3hB,MAChB2V,YAAepa,KAAKkU,QAAoB,aAAI,EAAIlU,KAAKoa,YACrDD,YAAena,KAAKkU,QAAoB,aAAI,EAAKlU,KAAKoa,YAAY,IAAOpa,KAAKkU,QAAQ4R,sBACtFpP,UAAY0P,EAAQU,MACpBR,eAAiBF,EAAQW,WAAaX,EAAQU,MAC9CrM,WAAaza,KAAKkU,QAAQyR,kBAC1BhM,YAAc3Z,KAAKkU,QAAQ2R,mBAC3BjP,YAAc5W,KAAKkU,QAAQ0R,mBAC3B5L,WAAuB,IAAV7S,KAAKa,GAClBgf,cAAiBhnB,KAAKkU,QAAqB,cAAI,EAAIlU,KAAKinB,uBAAuBb,EAAQ3hB,OACvFmT,MAAQwO,EAAQxO,SAEZgP,IACJ5mB,KAAKwU,SACLxU,KAAK6Y,WAGPoO,uBAAyB,SAASxiB,GACjC,MAAgB,GAAR0C,KAAKa,IAAOvD,EAAQzE,KAAKknB,QAElCX,eAAiB,SAAS/a,GACzBxL,KAAKknB,MAAQ,EACbzmB,EAAQ8C,KAAKiI,EAAK,SAAS4a,GAC1BpmB,KAAKknB,OAASd,EAAQ3hB,OACrBzE,OAEH6Y,OAAS,WACR7Y,KAAKumB,eAAevmB,KAAK2V,UAGzBlV,EAAQ8C,KAAKvD,KAAKiV,eAAgB,SAAS4P,GAC1CA,EAAclM,SAAS,gBAGxBlY,EAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,GACnCA,EAAQ1N,SAET1Y,KAAKyU,UAGN+Q,WAAY,SAASmB,GACpB,GAAIQ,GAAiB1mB,EAAQmG,SAAS+f,GAAYA,EAAU3mB,KAAK2V,SAAS1R,OAAO,CACjFjE,MAAK2V,SAASkR,OAAOM,EAAe,GACpCnnB,KAAKwU,SACLxU,KAAK6Y,UAGNrE,OAAS,WACR/T,EAAQmE,OAAO5E,KAAKimB,WAAWpiB,WAC9ByE,EAAItI,KAAKgS,MAAM1R,MAAM,EACrBkI,EAAIxI,KAAKgS,MAAMzR,OAAO,IAEvBP,KAAKoa,aAAe3Z,EAAQ2G,KAAKpH,KAAKgS,MAAM1R,MAAMN,KAAKgS,MAAMzR,SAAWP,KAAKkU,QAAQ2R,mBAAmB,GAAG,EAC3GplB,EAAQ8C,KAAKvD,KAAK2V,SAAU,SAASyQ,GACpCA,EAAQvN,QACPuB,YAAcpa,KAAKoa,YACnBD,YAAena,KAAKoa,YAAY,IAAOpa,KAAKkU,QAAQ4R,yBAEnD9lB,OAEJ0U,KAAO,SAASxE,GACf,GAAIkX,GAAc,EAAgBlX,EAAc,CAChDlQ,MAAK4S,QACLnS,EAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,EAAQja,GAC3Cia,EAAQrN,YACPiO,cAAgBhnB,KAAKinB,uBAAuBb,EAAQ3hB,OACpD2V,YAAcpa,KAAKoa,YACnBD,YAAena,KAAKoa,YAAY,IAAOpa,KAAKkU,QAAQ4R,uBACnDsB,GAEFhB,EAAQnM,SAAWmM,EAAQpM,WAAaoM,EAAQY,cAEhDZ,EAAQ1R,OACM,IAAVvI,IACHia,EAAQpM,WAAuB,IAAV7S,KAAKa,IAGvBmE,EAAQnM,KAAK2V,SAAS1R,OAAO,IAChCjE,KAAK2V,SAASxJ,EAAM,GAAG6N,WAAaoM,EAAQnM,WAE5Cja,SAKJE,EAAMoD,MAAM+jB,SAASziB,QACpByT,KAAO,MACP1X,SAAWF,EAAQsE,MAAM8d,GAAeiD,sBAAwB,OAG/D/hB,KAAK/D,MACR,WACC,YAEA,IAAID,GAAOC,KACVE,EAAQH,EAAKG,MACbO,EAAUP,EAAMO,QAEboiB,GAGHC,oBAAqB,EAGrBC,mBAAqB,kBAGrBC,mBAAqB,EAGrBsE,aAAc,EAGdC,mBAAqB,GAGrBC,UAAW,EAGXC,eAAiB,EAGjBC,oBAAsB,EAGtBC,wBAA0B,GAG1BC,eAAgB,EAGhBC,mBAAqB,EAGrBC,aAAc,EAGdlT,eAAiB,oOAKlB1U,GAAM+T,KAAKrP,QACVyT,KAAM,OACN1X,SAAWkiB,EACXzO,WAAa,SAAS5I,GAErBxL,KAAK+nB,WAAa7nB,EAAM+Y,MAAMrU,QAC7B+U,YAAc3Z,KAAKkU,QAAQwT,oBAC3BhU,OAAS1T,KAAKkU,QAAQuT,eACtBvO,QAASlZ,KAAKkU,QAAQsT,SACtBjO,mBAAqBvZ,KAAKkU,QAAQyT,wBAClCtnB,IAAML,KAAKgS,MAAM3R,IACjB8Y,QAAU,SAAS9I,GAClB,MAAQlJ,MAAKmC,IAAI+G,EAAOrQ,KAAKsI,EAAG,GAAKnB,KAAKmC,IAAItJ,KAAK0T,OAAS1T,KAAKuZ,mBAAmB,MAItFvZ,KAAKsV,YAGDtV,KAAKkU,QAAQjS,cAChBxB,EAAQmR,WAAW5R,KAAMA,KAAKkU,QAAQhS,cAAe,SAASkO,GAC7D,GAAI4X,GAA6B,aAAb5X,EAAI6T,KAAuBjkB,KAAKioB,iBAAiB7X,KACrEpQ,MAAKkoB,WAAW,SAASC,GACxBA,EAAMxP,SAAS,YAAa,kBAE7BlY,EAAQ8C,KAAKykB,EAAc,SAASI,GACnCA,EAAY1R,UAAY0R,EAAY9D,cACpC8D,EAAYxR,YAAcwR,EAAY7D,kBAEvCvkB,KAAK8U,YAAYkT,KAKnBvnB,EAAQ8C,KAAKiI,EAAK8J,SAAS,SAASgB,GAEnC,GAAImO,IACH7M,MAAQtB,EAAQsB,OAAS,KACzBlB,UAAYJ,EAAQI,UACpBE,YAAcN,EAAQM,YACtByR,WAAa/R,EAAQ+R,WACrBC,iBAAmBhS,EAAQgS,iBAC3B7S,UAGDzV,MAAKsV,SAAS7P,KAAKgf,GAGnBhkB,EAAQ8C,KAAK+S,EAAQ9K,KAAK,SAASkZ,EAAUvY,GAE5CsY,EAAchP,OAAOhQ,KAAK,GAAIzF,MAAK+nB,YAClCtjB,MAAQigB,EACR9M,MAAQpM,EAAKgM,OAAOrL,GACpBwY,aAAcrO,EAAQsB,MACtBhB,YAAcN,EAAQgS,iBACtB5R,UAAYJ,EAAQ+R,WACpB/D,cAAgBhO,EAAQiS,oBAAsBjS,EAAQ+R,WACtD9D,gBAAkBjO,EAAQkS,sBAAwBlS,EAAQgS,qBAE1DtoB,MAEFA,KAAK4kB,WAAWpZ,EAAKgM,QAGrBxX,KAAKkoB,WAAW,SAASC,EAAOhc,GAC/B1L,EAAQmE,OAAOujB,GACd7f,EAAGtI,KAAK2S,MAAMuL,WAAW/R,GACzB3D,EAAGxI,KAAK2S,MAAMsK,WAEfkL,EAAMzP,QACJ1Y,OAEFA,MAGFA,KAAKyU,UAENoE,OAAS,WACR7Y,KAAK2S,MAAMkG,SAEXpY,EAAQ8C,KAAKvD,KAAKiV,eAAgB,SAAS4P,GAC1CA,EAAclM,SAAS,YAAa,kBAErC3Y,KAAKkoB,WAAW,SAASC,GACxBA,EAAMzP,SAEP1Y,KAAKyU,UAENyT,WAAa,SAASzkB,GACrBhD,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnC7V,EAAQ8C,KAAK+S,EAAQb,OAAOhS,EAASzD,OACpCA,OAEHioB,iBAAmB,SAAS1X,GAC3B,GAAIkY,MACH1D,EAAgBtkB,EAAQ0P,oBAAoBI,EAM7C,OALA9P,GAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnC7V,EAAQ8C,KAAK+S,EAAQb,OAAO,SAAS0S,GAChCA,EAAMhP,QAAQ4L,EAAczc,EAAEyc,EAAcvc,IAAIigB,EAAYhjB,KAAK0iB,MAErEnoB,MACKyoB,GAER7D,WAAa,SAASpN,GACrB,GAAI9T,GAAO1D,KAEPilB,EAAY,WACf,GAAIC,KAKJ,OAJAxhB,GAAKwkB,WAAW,SAASC,GACxBjD,EAAOzf,KAAK0iB,EAAM1jB,SAGZygB,GAGJC,GACH9Z,eAAiBrL,KAAKkU,QAAQ1S,WAC9BjB,OAASP,KAAKgS,MAAMzR,OACpBD,MAAQN,KAAKgS,MAAM1R,MACnBD,IAAML,KAAKgS,MAAM3R,IACjB4W,UAAYjX,KAAKkU,QAAQpS,eACzBoV,SAAWlX,KAAKkU,QAAQtS,cACxBoR,UAAYhT,KAAKkU,QAAQrS,eACzBoR,WAAajT,KAAKkU,QAAQvS,gBAC1Bkb,YAAcrF,EAAOvT,OACrBmhB,YAAcplB,KAAKkU,QAAQxS,iBAC3B4I,aAAetK,KAAKkU,QAAQzS,kBAC5B4b,gBAAkB,SAASgI,GAC1B,GAAIC,GAAgB7kB,EAAQwJ,oBAC3Bgb,IACAI,EACArlB,KAAKkX,SACLlX,KAAKolB,YACLplB,KAAKsK,aAEN7J,GAAQmE,OAAO5E,KAAMslB,IAEtB1I,QAAUpF,EACVrE,KAAO1S,EAAQqS,WAAW9S,KAAKkU,QAAQtS,cAAe5B,KAAKkU,QAAQrS,eAAgB7B,KAAKkU,QAAQvS,iBAChG+X,UAAY1Z,KAAKkU,QAAQ5S,eACzB2d,UAAYjf,KAAKkU,QAAQ7S,eACzB0d,cAAiB/e,KAAKkU,QAA0B,mBAAIlU,KAAKkU,QAAQ8O,mBAAqB,EACtFhE,cAAiBhf,KAAKkU,QAA0B,mBAAIlU,KAAKkU,QAAQ6O,mBAAqB,gBACtF7F,QAAUld,KAAKkU,QAAiB,UAAI,EAAIlU,KAAKkU,QAAQuT,eAAiBznB,KAAKkU,QAAQwT,oBACnFhL,WAAa1c,KAAKkU,QAAQ3S,gBAC1B2X,QAAUlZ,KAAKkU,QAAQlT,UAGpBhB,MAAKkU,QAAQjT,eAChBR,EAAQmE,OAAOugB,GACd9H,gBAAiB5c,EAAQ2F,KACzBgF,MAAOpL,KAAKkU,QAAQhT,WACpB+J,UAAWjL,KAAKkU,QAAQ/S,eACxBiG,IAAKpH,KAAKkU,QAAQ9S,gBAClB6F,IAAKjH,KAAKkU,QAAQ9S,gBAAmBpB,KAAKkU,QAAQhT,WAAalB,KAAKkU,QAAQ/S,iBAK9EnB,KAAK2S,MAAQ,GAAIzS,GAAMic,MAAMgJ,IAE9BI,QAAU,SAASrb,EAAY0N,GAG9BnX,EAAQ8C,KAAK2G,EAAY,SAASzF,EAAM+e,GAEvCxjB,KAAKsV,SAASkO,GAAc/N,OAAOhQ,KAAK,GAAIzF,MAAK+nB,YAChDtjB,MAAQA,EACRmT,MAAQA,EACRtP,EAAGtI,KAAK2S,MAAMuL,WAAWle,KAAK2S,MAAMkK,YAAY,GAChDrU,EAAGxI,KAAK2S,MAAMsK,SACdrG,YAAc5W,KAAKsV,SAASkO,GAAc8E,iBAC1C5R,UAAY1W,KAAKsV,SAASkO,GAAc6E,eAExCroB,MAEFA,KAAK2S,MAAMgK,UAAU/E,GAErB5X,KAAK6Y,UAEN2M,WAAa,WACZxlB,KAAK2S,MAAMmK,eAEXrc,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnCA,EAAQb,OAAOsH,SACd/c,MACFA,KAAK6Y,UAENrE,OAAS,WACR,GAAIiR,GAAgBhlB,EAAQmE,QAC3BrE,OAASP,KAAKgS,MAAMzR,OACpBD,MAAQN,KAAKgS,MAAM1R,OAEpBN,MAAK2S,MAAMkG,OAAO4M,IAEnB/Q,KAAO,SAASsE,GACf,GAAI0M,GAAgB1M,GAAQ,CAC5BhZ,MAAK4S,OAEL,IAAIvS,GAAML,KAAKgS,MAAM3R,IAGjBkW,EAAW,SAASlS,GACvB,MAAsB,QAAfA,EAAKI,OAEbikB,EAAY,SAASP,EAAO7iB,EAAY6G,GACvC,MAAO1L,GAAQiF,cAAcJ,EAAYiR,EAAUpK,IAAUgc,GAE9DQ,EAAgB,SAASR,EAAO7iB,EAAY6G,GAC3C,MAAO1L,GAAQoF,kBAAkBP,EAAYiR,EAAUpK,IAAUgc,EAGlEnoB,MAAK2S,MAAM+B,KAAKgR,GAGhBjlB,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnC,GAAIsS,GAAmBnoB,EAAQ4E,MAAMiR,EAAQb,OAAQc,EAKrD9V,GAAQ8C,KAAK+S,EAAQb,OAAQ,SAAS0S,EAAOhc,GACxCgc,EAAM5R,YACT4R,EAAMpP,YACLvQ,EAAIxI,KAAK2S,MAAMyL,WAAW+J,EAAM1jB,OAChC6D,EAAItI,KAAK2S,MAAMuL,WAAW/R,IACxBuZ,IAEH1lB,MAKEA,KAAKkU,QAAQoT,aAChB7mB,EAAQ8C,KAAKqlB,EAAkB,SAAST,EAAOhc,GAC9C,GAAI0c,GAAW1c,EAAQ,GAAKA,EAAQyc,EAAiB3kB,OAAS,EAAKjE,KAAKkU,QAAQqT,mBAAqB,CACrGY,GAAMW,cAAgBroB,EAAQuI,YAC7B2f,EAAcR,EAAOS,EAAkBzc,GACvCgc,EACAO,EAAUP,EAAOS,EAAkBzc,GACnC0c,GAMGV,EAAMW,cAAcnf,MAAMnB,EAAIxI,KAAK2S,MAAMsK,SAC5CkL,EAAMW,cAAcnf,MAAMnB,EAAIxI,KAAK2S,MAAMsK,SAEjCkL,EAAMW,cAAcnf,MAAMnB,EAAIxI,KAAK2S,MAAMqK,aACjDmL,EAAMW,cAAcnf,MAAMnB,EAAIxI,KAAK2S,MAAMqK,YAItCmL,EAAMW,cAAcpf,MAAMlB,EAAIxI,KAAK2S,MAAMsK,SAC5CkL,EAAMW,cAAcpf,MAAMlB,EAAIxI,KAAK2S,MAAMsK,SAEjCkL,EAAMW,cAAcpf,MAAMlB,EAAIxI,KAAK2S,MAAMqK,aACjDmL,EAAMW,cAAcpf,MAAMlB,EAAIxI,KAAK2S,MAAMqK,aAEzChd,MAKHK,EAAIqZ,UAAY1Z,KAAKkU,QAAQ2T,mBAC7BxnB,EAAIoZ,YAAcnD,EAAQM,YAC1BvW,EAAIsT,YAEJlT,EAAQ8C,KAAKqlB,EAAkB,SAAST,EAAOhc,GAC9C,GAAc,IAAVA,EACH9L,EAAIuT,OAAOuU,EAAM7f,EAAG6f,EAAM3f,OAG1B,IAAGxI,KAAKkU,QAAQoT,YAAY,CAC3B,GAAIrnB,GAAW0oB,EAAcR,EAAOS,EAAkBzc,EAEtD9L,GAAI0oB,cACH9oB,EAAS6oB,cAAcnf,MAAMrB,EAC7BrI,EAAS6oB,cAAcnf,MAAMnB,EAC7B2f,EAAMW,cAAcpf,MAAMpB,EAC1B6f,EAAMW,cAAcpf,MAAMlB,EAC1B2f,EAAM7f,EACN6f,EAAM3f,OAIPnI,GAAIwT,OAAOsU,EAAM7f,EAAE6f,EAAM3f,IAGzBxI,MAEHK,EAAIsW,SAEA3W,KAAKkU,QAAQ4T,aAAec,EAAiB3kB,OAAS,IAEzD5D,EAAIwT,OAAO+U,EAAiBA,EAAiB3kB,OAAS,GAAGqE,EAAGtI,KAAK2S,MAAMsK,UACvE5c,EAAIwT,OAAO+U,EAAiB,GAAGtgB,EAAGtI,KAAK2S,MAAMsK,UAC7C5c,EAAIuZ,UAAYtD,EAAQI,UACxBrW,EAAI0T,YACJ1T,EAAImW,QAML/V,EAAQ8C,KAAKqlB,EAAiB,SAAST,GACtCA,EAAMzT,UAEN1U,UAKF+D,KAAK/D,MACR,WACC,YAEA,IAAID,GAAOC,KACVE,EAAQH,EAAKG,MAEbO,EAAUP,EAAMO,QAEboiB,GAEHmG,wBAAyB,EAGzBC,mBAAqB,yBAGrBvnB,kBAAmB,EAGnBwnB,sBAAwB,EAGxBC,sBAAwB,EAGxBC,eAAgB,EAGhBzD,mBAAoB,EAGpBC,mBAAqB,OAGrBC,mBAAqB,EAGrB/kB,eAAiB,IAGjBC,gBAAkB,gBAGlBglB,eAAgB,EAGhBC,cAAe,EAGfpR,eAAiB,kOAIlB1U,GAAM+T,KAAKrP,QAEVyT,KAAM,YAEN1X,SAAWkiB,EAGXzO,WAAa,SAAS5I,GACrBxL,KAAK2V,YAEL3V,KAAKimB,WAAa/lB,EAAM2Z,IAAIjV,QAC3B6V,WAAaza,KAAKkU,QAAQyR,kBAC1BhM,YAAc3Z,KAAKkU,QAAQ2R,mBAC3BjP,YAAc5W,KAAKkU,QAAQ0R,mBAC3BvlB,IAAML,KAAKgS,MAAM3R,IACjB8Z,YAAc,EACd7R,EAAItI,KAAKgS,MAAM1R,MAAM,EACrBkI,EAAIxI,KAAKgS,MAAMzR,OAAO,IAEvBP,KAAK2S,MAAQ,GAAIzS,GAAMqf,aACtBrG,QAASlZ,KAAKkU,QAAQlT,UACtBgS,UAAWhT,KAAKkU,QAAQrS,eACxBqV,SAAUlX,KAAKkU,QAAQtS,cACvBqR,WAAYjT,KAAKkU,QAAQvS,gBACzBogB,UAAW/hB,KAAKkU,QAAQpS,eACxB4a,WAAY1c,KAAKkU,QAAQ3S,gBACzBqgB,kBAAmB5hB,KAAKkU,QAAQ8U,uBAChCnH,cAAe7hB,KAAKkU,QAAQ+U,mBAC5BxJ,iBAAmBzf,KAAKkU,QAAQgV,sBAChCpH,iBAAkB9hB,KAAKkU,QAAQiV,sBAC/BzP,UAAY1Z,KAAKkU,QAAqB,cAAIlU,KAAKkU,QAAQ5S,eAAiB,EACxE2d,UAAWjf,KAAKkU,QAAQ7S,eACxBse,SAAS,EACTrf,MAAON,KAAKgS,MAAM1R,MAClBC,OAAQP,KAAKgS,MAAMzR,OACnB8gB,QAASrhB,KAAKgS,MAAM1R,MAAM,EAC1BghB,QAASthB,KAAKgS,MAAMzR,OAAO,EAC3BF,IAAML,KAAKgS,MAAM3R,IACjBgL,eAAgBrL,KAAKkU,QAAQ1S,WAC7Bqb,YAAarR,EAAKvH,SAGnBjE,KAAKqpB,iBAAiB7d,GAEtBxL,KAAK2S,MAAMkG,SAEXpY,EAAQ8C,KAAKiI,EAAK,SAAS4a,EAAQja,GAClCnM,KAAKulB,QAAQa,EAAQja,GAAM,IAC1BnM,MAGEA,KAAKkU,QAAQjS,cAChBxB,EAAQmR,WAAW5R,KAAMA,KAAKkU,QAAQhS,cAAe,SAASkO,GAC7D,GAAI8V,GAA+B,aAAb9V,EAAI6T,KAAuBjkB,KAAKmmB,mBAAmB/V,KACzE3P,GAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,GACnCA,EAAQzN,SAAS,gBAElBlY,EAAQ8C,KAAK2iB,EAAe,SAASG,GACpCA,EAAc3P,UAAY2P,EAAcC,iBAEzCtmB,KAAK8U,YAAYoR,KAInBlmB,KAAKyU,UAEN0R,mBAAqB,SAAS5V,GAC7B,GAAIkW,MAEAC,EAAWjmB,EAAQ0P,oBAAoBI,EAK3C,OAHA9P,GAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,GAC/BA,EAAQjN,QAAQuN,EAASpe,EAAEoe,EAASle,IAAIie,EAAchhB,KAAK2gB,IAC9DpmB,MACKymB,GAERlB,QAAU,SAASa,EAASO,EAASC,GACpC,GAAIza,GAAQwa,GAAW3mB,KAAK2V,SAAS1R,MAErCjE,MAAK2V,SAASkR,OAAO1a,EAAO,EAAG,GAAInM,MAAKimB,YACvCvP,UAAW0P,EAAQU,MACnBR,eAAgBF,EAAQW,WAAaX,EAAQU,MAC7ClP,MAAOwO,EAAQxO,MACfnT,MAAO2hB,EAAQ3hB,MACf2V,YAAcpa,KAAKkU,QAAoB,aAAI,EAAIlU,KAAK2S,MAAM+M,sBAAsB0G,EAAQ3hB,OACxFuiB,cAAgBhnB,KAAKkU,QAAqB,cAAI,EAAIlU,KAAK2S,MAAMkN,mBAC7D7F,WAAsB,IAAV7S,KAAKa,MAEb4e,IACJ5mB,KAAKwU,SACLxU,KAAK6Y,WAGP2M,WAAY,SAASmB,GACpB,GAAIQ,GAAiB1mB,EAAQmG,SAAS+f,GAAYA,EAAU3mB,KAAK2V,SAAS1R,OAAO,CACjFjE,MAAK2V,SAASkR,OAAOM,EAAe,GACpCnnB,KAAKwU,SACLxU,KAAK6Y,UAEN0N,eAAgB,SAAS/a,GACxBxL,KAAKknB,MAAQ,EACbzmB,EAAQ8C,KAAKiI,EAAK,SAAS4a,GAC1BpmB,KAAKknB,OAASd,EAAQ3hB,OACrBzE,MACFA,KAAK2S,MAAMkK,YAAc7c,KAAK2V,SAAS1R,QAExColB,iBAAkB,SAASC,GAC1B,GAAIpf,KACJzJ,GAAQ8C,KAAK+lB,EAAW,SAASlD,GAChClc,EAAYzE,KAAK2gB,EAAQ3hB,QAG1B,IAAI8kB,GAAcvpB,KAAKkU,QAAqB,eAE1C9I,MAAOpL,KAAKkU,QAAQhT,WACpB+J,UAAWjL,KAAKkU,QAAQ/S,eACxBiG,IAAKpH,KAAKkU,QAAQ9S,gBAClB6F,IAAKjH,KAAKkU,QAAQ9S,gBAAmBpB,KAAKkU,QAAQhT,WAAalB,KAAKkU,QAAQ/S,gBAE7EV,EAAQwJ,oBACPC,EACAzJ,EAAQ2G,KAAKpH,KAAKgS,MAAM1R,MAAON,KAAKgS,MAAMzR,SAAS,EACnDP,KAAKkU,QAAQtS,cACb5B,KAAKkU,QAAQxS,iBACb1B,KAAKkU,QAAQzS,kBAGfhB,GAAQmE,OACP5E,KAAK2S,MACL4W,GAEC/J,KAAM/e,EAAQ2G,KAAKpH,KAAKgS,MAAM1R,MAAON,KAAKgS,MAAMzR,SAChD8gB,QAASrhB,KAAKgS,MAAM1R,MAAM,EAC1BghB,QAASthB,KAAKgS,MAAMzR,OAAO,KAK9BsY,OAAS,WACR7Y,KAAKumB,eAAevmB,KAAK2V,UAEzBlV,EAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,GACnCA,EAAQ1N,SAET1Y,KAAKyU,UAEND,OAAS,WACR/T,EAAQmE,OAAO5E,KAAKimB,WAAWpiB,WAC9ByE,EAAItI,KAAKgS,MAAM1R,MAAM,EACrBkI,EAAIxI,KAAKgS,MAAMzR,OAAO,IAEvBP,KAAKqpB,iBAAiBrpB,KAAK2V,UAC3B3V,KAAK2S,MAAMkG,SAEXpY,EAAQmE,OAAO5E,KAAK2S,OACnB0O,QAASrhB,KAAKgS,MAAM1R,MAAM,EAC1BghB,QAASthB,KAAKgS,MAAMzR,OAAO,IAG5BE,EAAQ8C,KAAKvD,KAAK2V,SAAU,SAASyQ,GACpCA,EAAQvN,QACPuB,YAAcpa,KAAK2S,MAAM+M,sBAAsB0G,EAAQ3hB,UAEtDzE,OAGJ0U,KAAO,SAASsE,GACf,GAAI0M,GAAgB1M,GAAQ,CAE5BhZ,MAAK4S,QACLnS,EAAQ8C,KAAKvD,KAAK2V,SAAS,SAASyQ,EAASja,GAC5Cia,EAAQrN,YACPiO,cAAgBhnB,KAAK2S,MAAMkN,mBAC3BzF,YAAcpa,KAAK2S,MAAM+M,sBAAsB0G,EAAQ3hB,QACtDihB,GAEFU,EAAQnM,SAAWmM,EAAQpM,WAAaoM,EAAQY,cAIlC,IAAV7a,IACHia,EAAQpM,WAAuB,IAAV7S,KAAKa,IAIvBmE,EAAQnM,KAAK2V,SAAS1R,OAAS,IAClCjE,KAAK2V,SAASxJ,EAAM,GAAG6N,WAAaoM,EAAQnM,UAE7CmM,EAAQ1R,QACN1U,MACHA,KAAK2S,MAAM+B,WAIX3Q,KAAK/D,MACR,WACC,YAEA,IAAID,GAAOC,KACVE,EAAQH,EAAKG,MACbO,EAAUP,EAAMO,OAIjBP,GAAM+T,KAAKrP,QACVyT,KAAM,QACN1X,UAECyoB,eAAgB,EAGhBI,kBAAmB,EAGnBjoB,iBAAkB,EAGlBG,kBAAmB,EAGnBugB,eAAiB,iBAGjBD,eAAiB,EAGjBnB,qBAAuB,UAGvBD,oBAAsB,SAGtBH,mBAAqB,GAGrB2B,oBAAsB,OAGtBoF,UAAW,EAGXC,eAAiB,EAGjBC,oBAAsB,EAGtBC,wBAA0B,GAG1BC,eAAgB,EAGhBC,mBAAqB,EAGrBC,aAAc,EAGdlT,eAAiB,qOAIlBR,WAAY,SAAS5I,GACpBxL,KAAK+nB,WAAa7nB,EAAM+Y,MAAMrU,QAC7B+U,YAAc3Z,KAAKkU,QAAQwT,oBAC3BhU,OAAS1T,KAAKkU,QAAQuT,eACtBvO,QAASlZ,KAAKkU,QAAQsT,SACtBjO,mBAAqBvZ,KAAKkU,QAAQyT,wBAClCtnB,IAAML,KAAKgS,MAAM3R,MAGlBL,KAAKsV,YAELtV,KAAK4kB,WAAWpZ,GAGZxL,KAAKkU,QAAQjS,cAChBxB,EAAQmR,WAAW5R,KAAMA,KAAKkU,QAAQhS,cAAe,SAASkO,GAC7D,GAAIqZ,GAAuC,aAAbrZ,EAAI6T,KAAuBjkB,KAAKioB,iBAAiB7X,KAE/EpQ,MAAKkoB,WAAW,SAASC,GACxBA,EAAMxP,SAAS,YAAa,kBAE7BlY,EAAQ8C,KAAKkmB,EAAwB,SAASrB,GAC7CA,EAAY1R,UAAY0R,EAAY9D,cACpC8D,EAAYxR,YAAcwR,EAAY7D,kBAGvCvkB,KAAK8U,YAAY2U,KAKnBhpB,EAAQ8C,KAAKiI,EAAK8J,SAAS,SAASgB,GAEnC,GAAImO,IACH7M,MAAOtB,EAAQsB,OAAS,KACxBlB,UAAYJ,EAAQI,UACpBE,YAAcN,EAAQM,YACtByR,WAAa/R,EAAQ+R,WACrBC,iBAAmBhS,EAAQgS,iBAC3B7S,UAGDzV,MAAKsV,SAAS7P,KAAKgf,GAEnBhkB,EAAQ8C,KAAK+S,EAAQ9K,KAAK,SAASkZ,EAAUvY,GAE5C,GAAI2T,EACC9f,MAAK2S,MAAM9R,YACfif,EAAgB9f,KAAK2S,MAAMmO,iBAAiB3U,EAAOnM,KAAK2S,MAAM+M,sBAAsBgF,KAErFD,EAAchP,OAAOhQ,KAAK,GAAIzF,MAAK+nB,YAClCtjB,MAAQigB,EACR9M,MAAQpM,EAAKgM,OAAOrL,GACpBwY,aAAcrO,EAAQsB,MACtBtP,EAAItI,KAAKkU,QAAiB,UAAIlU,KAAK2S,MAAM0O,QAAUvB,EAAcxX,EACjEE,EAAIxI,KAAKkU,QAAiB,UAAIlU,KAAK2S,MAAM2O,QAAUxB,EAActX,EACjEoO,YAAcN,EAAQgS,iBACtB5R,UAAYJ,EAAQ+R,WACpB/D,cAAgBhO,EAAQiS,oBAAsBjS,EAAQ+R,WACtD9D,gBAAkBjO,EAAQkS,sBAAwBlS,EAAQgS,qBAE1DtoB,OAEDA,MAEFA,KAAKyU,UAENyT,WAAa,SAASzkB,GACrBhD,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnC7V,EAAQ8C,KAAK+S,EAAQb,OAAOhS,EAASzD,OACpCA,OAGHioB,iBAAmB,SAAS7X,GAC3B,GAAIsZ,GAAgBjpB,EAAQ0P,oBAAoBC,GAC/CuZ,EAAalpB,EAAQyH,mBACpBI,EAAGtI,KAAK2S,MAAM0O,QACd7Y,EAAGxI,KAAK2S,MAAM2O,SACZoI,GAEAE,EAA2B,EAAVziB,KAAKa,GAAShI,KAAK2S,MAAMkK,YAC7CgN,EAAa1iB,KAAKgE,OAAOwe,EAAWhhB,MAAkB,IAAVxB,KAAKa,IAAY4hB,GAC7DH,IAaD,QAVII,GAAc7pB,KAAK2S,MAAMkK,aAA4B,EAAbgN,KAC3CA,EAAa,GAGVF,EAAW9gB,UAAY7I,KAAK2S,MAAMwL,aACrC1d,EAAQ8C,KAAKvD,KAAKsV,SAAU,SAASgB,GACpCmT,EAAuBhkB,KAAK6Q,EAAQb,OAAOoU,MAItCJ,GAGR7E,WAAa,SAASpZ,GACrBxL,KAAK2S,MAAQ,GAAIzS,GAAMqf,aACtBrG,QAASlZ,KAAKkU,QAAQlT,UACtBgS,UAAWhT,KAAKkU,QAAQrS,eACxBqV,SAAUlX,KAAKkU,QAAQtS,cACvBqR,WAAYjT,KAAKkU,QAAQvS,gBACzBogB,UAAW/hB,KAAKkU,QAAQpS,eACxB4a,WAAY1c,KAAKkU,QAAQ3S,gBACzBqgB,kBAAmB5hB,KAAKkU,QAAQ8U,uBAChCnH,cAAe7hB,KAAKkU,QAAQ+U,mBAC5BxJ,iBAAmBzf,KAAKkU,QAAQgV,sBAChCpH,iBAAkB9hB,KAAKkU,QAAQiV,sBAC/BzP,UAAY1Z,KAAKkU,QAAqB,cAAIlU,KAAKkU,QAAQ5S,eAAiB,EACxE2d,UAAWjf,KAAKkU,QAAQ7S,eACxB4gB,eAAiBjiB,KAAKkU,QAAQ+N,eAC9BD,eAAkBhiB,KAAKkU,QAAwB,iBAAIlU,KAAKkU,QAAQ8N,eAAiB,EAEjFI,oBAAsBpiB,KAAKkU,QAAQkO,oBACnC3B,mBAAqBzgB,KAAKkU,QAAQuM,mBAClCI,qBAAuB7gB,KAAKkU,QAAQ2M,qBACpCD,oBAAsB5gB,KAAKkU,QAAQ0M,oBACnCrgB,OAASP,KAAKgS,MAAMzR,OACpBD,MAAON,KAAKgS,MAAM1R,MAClB+gB,QAASrhB,KAAKgS,MAAM1R,MAAM,EAC1BghB,QAASthB,KAAKgS,MAAMzR,OAAO,EAC3BF,IAAML,KAAKgS,MAAM3R,IACjBgL,eAAgBrL,KAAKkU,QAAQ1S,WAC7BgW,OAAQhM,EAAKgM,OACbqF,YAAarR,EAAK8J,SAAS,GAAG9J,KAAKvH,SAGpCjE,KAAK2S,MAAMiN,eACX5f,KAAKqpB,iBAAiB7d,EAAK8J,UAC3BtV,KAAK2S,MAAM0J,gBAEZgN,iBAAkB,SAAS/T,GAC1B,GAAIpL,GAAc,WACjB,GAAI4f,KAWJ,OAVArpB,GAAQ8C,KAAK+R,EAAS,SAASgB,GAC1BA,EAAQ9K,KACXse,EAAiBA,EAAe1lB,OAAOkS,EAAQ9K,MAG/C/K,EAAQ8C,KAAK+S,EAAQb,OAAQ,SAAS0S,GACrC2B,EAAerkB,KAAK0iB,EAAM1jB,WAItBqlB,KAIJP,EAAcvpB,KAAKkU,QAAqB,eAE1C9I,MAAOpL,KAAKkU,QAAQhT,WACpB+J,UAAWjL,KAAKkU,QAAQ/S,eACxBiG,IAAKpH,KAAKkU,QAAQ9S,gBAClB6F,IAAKjH,KAAKkU,QAAQ9S,gBAAmBpB,KAAKkU,QAAQhT,WAAalB,KAAKkU,QAAQ/S,gBAE7EV,EAAQwJ,oBACPC,EACAzJ,EAAQ2G,KAAKpH,KAAKgS,MAAM1R,MAAON,KAAKgS,MAAMzR,SAAS,EACnDP,KAAKkU,QAAQtS,cACb5B,KAAKkU,QAAQxS,iBACb1B,KAAKkU,QAAQzS,kBAGfhB,GAAQmE,OACP5E,KAAK2S,MACL4W,IAIFhE,QAAU,SAASrb,EAAY0N,GAE9B5X,KAAK2S,MAAMkK,cACXpc,EAAQ8C,KAAK2G,EAAY,SAASzF,EAAM+e,GACvC,GAAI1D,GAAgB9f,KAAK2S,MAAMmO,iBAAiB9gB,KAAK2S,MAAMkK,YAAa7c,KAAK2S,MAAM+M,sBAAsBjb,GACzGzE,MAAKsV,SAASkO,GAAc/N,OAAOhQ,KAAK,GAAIzF,MAAK+nB,YAChDtjB,MAAQA,EACRmT,MAAQA,EACRtP,EAAGwX,EAAcxX,EACjBE,EAAGsX,EAActX,EACjBoO,YAAc5W,KAAKsV,SAASkO,GAAc8E,iBAC1C5R,UAAY1W,KAAKsV,SAASkO,GAAc6E,eAExCroB,MAEFA,KAAK2S,MAAM6E,OAAO/R,KAAKmS,GAEvB5X,KAAKwU,SAELxU,KAAK6Y,UAEN2M,WAAa,WACZxlB,KAAK2S,MAAMkK,cACX7c,KAAK2S,MAAM6E,OAAOuF,QAClBtc,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GACnCA,EAAQb,OAAOsH,SACd/c,MACFA,KAAKwU,SACLxU,KAAK6Y,UAENA,OAAS,WACR7Y,KAAKkoB,WAAW,SAASC,GACxBA,EAAMzP,SAEP1Y,KAAKwU,SACLxU,KAAKyU,UAEND,OAAQ,WACP/T,EAAQmE,OAAO5E,KAAK2S,OACnBrS,MAAQN,KAAKgS,MAAM1R,MACnBC,OAAQP,KAAKgS,MAAMzR,OACnBif,KAAO/e,EAAQ2G,KAAKpH,KAAKgS,MAAM1R,MAAON,KAAKgS,MAAMzR,SACjD8gB,QAASrhB,KAAKgS,MAAM1R,MAAM,EAC1BghB,QAASthB,KAAKgS,MAAMzR,OAAO,IAE5BP,KAAKqpB,iBAAiBrpB,KAAKsV,UAC3BtV,KAAK2S,MAAMiN,eACX5f,KAAK2S,MAAM0J,gBAEZ3H,KAAO,SAASsE,GACf,GAAI9I,GAAc8I,GAAQ,EACzB3Y,EAAML,KAAKgS,MAAM3R,GAClBL,MAAK4S,QACL5S,KAAK2S,MAAM+B,OAEXjU,EAAQ8C,KAAKvD,KAAKsV,SAAS,SAASgB,GAGnC7V,EAAQ8C,KAAK+S,EAAQb,OAAO,SAAS0S,EAAMhc,GACtCgc,EAAM5R,YACT4R,EAAMpP,WAAW/Y,KAAK2S,MAAMmO,iBAAiB3U,EAAOnM,KAAK2S,MAAM+M,sBAAsByI,EAAM1jB,QAASyL,IAEpGlQ,MAKFK,EAAIqZ,UAAY1Z,KAAKkU,QAAQ2T,mBAC7BxnB,EAAIoZ,YAAcnD,EAAQM,YAC1BvW,EAAIsT,YACJlT,EAAQ8C,KAAK+S,EAAQb,OAAO,SAAS0S,EAAMhc,GAC5B,IAAVA,EACH9L,EAAIuT,OAAOuU,EAAM7f,EAAE6f,EAAM3f,GAGzBnI,EAAIwT,OAAOsU,EAAM7f,EAAE6f,EAAM3f,IAEzBxI,MACFK,EAAI0T,YACJ1T,EAAIsW,SAEJtW,EAAIuZ,UAAYtD,EAAQI,UACxBrW,EAAImW,OAKJ/V,EAAQ8C,KAAK+S,EAAQb,OAAO,SAAS0S,GAChCA,EAAM5R,YACT4R,EAAMzT,UAIP1U,UAUF+D,KAAK/D","file":"gallery/chartjs/1.0.1/chartjs-debug.js","sourcesContent":["/*!\n * Chart.js\n * http://chartjs.org/\n * Version: 1.0.1-beta.4\n *\n * Copyright 2014 Nick Downie\n * Released under the MIT license\n * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md\n */\n\ndefine(function(require, exports, module) {\n(function(){\n\n\t\"use strict\";\n\n\t//Declare root variable - window in the browser, global on the server\n\tvar root = this,\n\t\tprevious = root.Chart;\n\n\t//Occupy the global variable of Chart, and create a simple base class\n\tvar Chart = function(context){\n\t\tvar chart = this;\n\t\tthis.canvas = context.canvas;\n\n\t\tthis.ctx = context;\n\n\t\t//Variables global to the chart\n\t\tvar width = this.width = context.canvas.width;\n\t\tvar height = this.height = context.canvas.height;\n\t\tthis.aspectRatio = this.width / this.height;\n\t\t//High pixel density displays - multiply the size of the canvas height/width by the device pixel ratio, then scale.\n\t\thelpers.retinaScale(this);\n\n\t\treturn this;\n\t};\n\t//Globally expose the defaults to allow for user updating/changing\n\tChart.defaults = {\n\t\tglobal: {\n\t\t\t// Boolean - Whether to animate the chart\n\t\t\tanimation: true,\n\n\t\t\t// Number - Number of animation steps\n\t\t\tanimationSteps: 60,\n\n\t\t\t// String - Animation easing effect\n\t\t\tanimationEasing: \"easeOutQuart\",\n\n\t\t\t// Boolean - If we should show the scale at all\n\t\t\tshowScale: true,\n\n\t\t\t// Boolean - If we want to override with a hard coded scale\n\t\t\tscaleOverride: false,\n\n\t\t\t// ** Required if scaleOverride is true **\n\t\t\t// Number - The number of steps in a hard coded scale\n\t\t\tscaleSteps: null,\n\t\t\t// Number - The value jump in the hard coded scale\n\t\t\tscaleStepWidth: null,\n\t\t\t// Number - The scale starting value\n\t\t\tscaleStartValue: null,\n\n\t\t\t// String - Colour of the scale line\n\t\t\tscaleLineColor: \"rgba(0,0,0,.1)\",\n\n\t\t\t// Number - Pixel width of the scale line\n\t\t\tscaleLineWidth: 1,\n\n\t\t\t// Boolean - Whether to show labels on the scale\n\t\t\tscaleShowLabels: true,\n\n\t\t\t// Interpolated JS string - can access value\n\t\t\tscaleLabel: \"<%=value%>\",\n\n\t\t\t// Boolean - Whether the scale should stick to integers, and not show any floats even if drawing space is there\n\t\t\tscaleIntegersOnly: true,\n\n\t\t\t// Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\n\t\t\tscaleBeginAtZero: false,\n\n\t\t\t// String - Scale label font declaration for the scale label\n\t\t\tscaleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\n\t\t\t// Number - Scale label font size in pixels\n\t\t\tscaleFontSize: 12,\n\n\t\t\t// String - Scale label font weight style\n\t\t\tscaleFontStyle: \"normal\",\n\n\t\t\t// String - Scale label font colour\n\t\t\tscaleFontColor: \"#666\",\n\n\t\t\t// Boolean - whether or not the chart should be responsive and resize when the browser does.\n\t\t\tresponsive: false,\n\n                        // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container\n                        maintainAspectRatio: true,\n\n\t\t\t// Boolean - Determines whether to draw tooltips on the canvas or not - attaches events to touchmove & mousemove\n\t\t\tshowTooltips: true,\n\n\t\t\t// Array - Array of string names to attach tooltip events\n\t\t\ttooltipEvents: [\"mousemove\", \"touchstart\", \"touchmove\", \"mouseout\"],\n\n\t\t\t// String - Tooltip background colour\n\t\t\ttooltipFillColor: \"rgba(0,0,0,0.8)\",\n\n\t\t\t// String - Tooltip label font declaration for the scale label\n\t\t\ttooltipFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\n\t\t\t// Number - Tooltip label font size in pixels\n\t\t\ttooltipFontSize: 14,\n\n\t\t\t// String - Tooltip font weight style\n\t\t\ttooltipFontStyle: \"normal\",\n\n\t\t\t// String - Tooltip label font colour\n\t\t\ttooltipFontColor: \"#fff\",\n\n\t\t\t// String - Tooltip title font declaration for the scale label\n\t\t\ttooltipTitleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\n\t\t\t// Number - Tooltip title font size in pixels\n\t\t\ttooltipTitleFontSize: 14,\n\n\t\t\t// String - Tooltip title font weight style\n\t\t\ttooltipTitleFontStyle: \"bold\",\n\n\t\t\t// String - Tooltip title font colour\n\t\t\ttooltipTitleFontColor: \"#fff\",\n\n\t\t\t// Number - pixel width of padding around tooltip text\n\t\t\ttooltipYPadding: 6,\n\n\t\t\t// Number - pixel width of padding around tooltip text\n\t\t\ttooltipXPadding: 6,\n\n\t\t\t// Number - Size of the caret on the tooltip\n\t\t\ttooltipCaretSize: 8,\n\n\t\t\t// Number - Pixel radius of the tooltip border\n\t\t\ttooltipCornerRadius: 6,\n\n\t\t\t// Number - Pixel offset from point x to tooltip edge\n\t\t\ttooltipXOffset: 10,\n\n\t\t\t// String - Template string for single tooltips\n\t\t\ttooltipTemplate: \"<%if (label){%><%=label%>: <%}%><%= value %>\",\n\n\t\t\t// String - Template string for single tooltips\n\t\t\tmultiTooltipTemplate: \"<%= value %>\",\n\n\t\t\t// String - Colour behind the legend colour block\n\t\t\tmultiTooltipKeyBackground: '#fff',\n\n\t\t\t// Function - Will fire on animation progression.\n\t\t\tonAnimationProgress: function(){},\n\n\t\t\t// Function - Will fire on animation completion.\n\t\t\tonAnimationComplete: function(){}\n\n\t\t}\n\t};\n\n\t//Create a dictionary of chart types, to allow for extension of existing types\n\tChart.types = {};\n\n\t//Global Chart helpers object for utility methods and classes\n\tvar helpers = Chart.helpers = {};\n\n\t\t//-- Basic js utility methods\n\tvar each = helpers.each = function(loopable,callback,self){\n\t\t\tvar additionalArgs = Array.prototype.slice.call(arguments, 3);\n\t\t\t// Check to see if null or undefined firstly.\n\t\t\tif (loopable){\n\t\t\t\tif (loopable.length === +loopable.length){\n\t\t\t\t\tvar i;\n\t\t\t\t\tfor (i=0; i<loopable.length; i++){\n\t\t\t\t\t\tcallback.apply(self,[loopable[i], i].concat(additionalArgs));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tfor (var item in loopable){\n\t\t\t\t\t\tcallback.apply(self,[loopable[item],item].concat(additionalArgs));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tclone = helpers.clone = function(obj){\n\t\t\tvar objClone = {};\n\t\t\teach(obj,function(value,key){\n\t\t\t\tif (obj.hasOwnProperty(key)) objClone[key] = value;\n\t\t\t});\n\t\t\treturn objClone;\n\t\t},\n\t\textend = helpers.extend = function(base){\n\t\t\teach(Array.prototype.slice.call(arguments,1), function(extensionObject) {\n\t\t\t\teach(extensionObject,function(value,key){\n\t\t\t\t\tif (extensionObject.hasOwnProperty(key)) base[key] = value;\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn base;\n\t\t},\n\t\tmerge = helpers.merge = function(base,master){\n\t\t\t//Merge properties in left object over to a shallow clone of object right.\n\t\t\tvar args = Array.prototype.slice.call(arguments,0);\n\t\t\targs.unshift({});\n\t\t\treturn extend.apply(null, args);\n\t\t},\n\t\tindexOf = helpers.indexOf = function(arrayToSearch, item){\n\t\t\tif (Array.prototype.indexOf) {\n\t\t\t\treturn arrayToSearch.indexOf(item);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor (var i = 0; i < arrayToSearch.length; i++) {\n\t\t\t\t\tif (arrayToSearch[i] === item) return i;\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t},\n\t\twhere = helpers.where = function(collection, filterCallback){\n\t\t\tvar filtered = [];\n\n\t\t\thelpers.each(collection, function(item){\n\t\t\t\tif (filterCallback(item)){\n\t\t\t\t\tfiltered.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn filtered;\n\t\t},\n\t\tfindNextWhere = helpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex){\n\t\t\t// Default to start of the array\n\t\t\tif (!startIndex){\n\t\t\t\tstartIndex = -1;\n\t\t\t}\n\t\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\t\tif (filterCallback(currentItem)){\n\t\t\t\t\treturn currentItem;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tfindPreviousWhere = helpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex){\n\t\t\t// Default to end of the array\n\t\t\tif (!startIndex){\n\t\t\t\tstartIndex = arrayToSearch.length;\n\t\t\t}\n\t\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\t\tif (filterCallback(currentItem)){\n\t\t\t\t\treturn currentItem;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tinherits = helpers.inherits = function(extensions){\n\t\t\t//Basic javascript inheritance based on the model created in Backbone.js\n\t\t\tvar parent = this;\n\t\t\tvar ChartElement = (extensions && extensions.hasOwnProperty(\"constructor\")) ? extensions.constructor : function(){ return parent.apply(this, arguments); };\n\n\t\t\tvar Surrogate = function(){ this.constructor = ChartElement;};\n\t\t\tSurrogate.prototype = parent.prototype;\n\t\t\tChartElement.prototype = new Surrogate();\n\n\t\t\tChartElement.extend = inherits;\n\n\t\t\tif (extensions) extend(ChartElement.prototype, extensions);\n\n\t\t\tChartElement.__super__ = parent.prototype;\n\n\t\t\treturn ChartElement;\n\t\t},\n\t\tnoop = helpers.noop = function(){},\n\t\tuid = helpers.uid = (function(){\n\t\t\tvar id=0;\n\t\t\treturn function(){\n\t\t\t\treturn \"chart-\" + id++;\n\t\t\t};\n\t\t})(),\n\t\twarn = helpers.warn = function(str){\n\t\t\t//Method for warning of errors\n\t\t\tif (window.console && typeof window.console.warn == \"function\") console.warn(str);\n\t\t},\n\t\tamd = helpers.amd = (typeof define == 'function' && define.amd),\n\t\t//-- Math methods\n\t\tisNumber = helpers.isNumber = function(n){\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t\t},\n\t\tmax = helpers.max = function(array){\n\t\t\treturn Math.max.apply( Math, array );\n\t\t},\n\t\tmin = helpers.min = function(array){\n\t\t\treturn Math.min.apply( Math, array );\n\t\t},\n\t\tcap = helpers.cap = function(valueToCap,maxValue,minValue){\n\t\t\tif(isNumber(maxValue)) {\n\t\t\t\tif( valueToCap > maxValue ) {\n\t\t\t\t\treturn maxValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(isNumber(minValue)){\n\t\t\t\tif ( valueToCap < minValue ){\n\t\t\t\t\treturn minValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn valueToCap;\n\t\t},\n\t\tgetDecimalPlaces = helpers.getDecimalPlaces = function(num){\n\t\t\tif (num%1!==0 && isNumber(num)){\n\t\t\t\treturn num.toString().split(\".\")[1].length;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t},\n\t\ttoRadians = helpers.radians = function(degrees){\n\t\t\treturn degrees * (Math.PI/180);\n\t\t},\n\t\t// Gets the angle from vertical upright to the point about a centre.\n\t\tgetAngleFromPoint = helpers.getAngleFromPoint = function(centrePoint, anglePoint){\n\t\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\n\t\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\n\t\t\t\tradialDistanceFromCenter = Math.sqrt( distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n\n\t\t\tvar angle = Math.PI * 2 + Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n\t\t\t//If the segment is in the top left quadrant, we need to add another rotation to the angle\n\t\t\tif (distanceFromXCenter < 0 && distanceFromYCenter < 0){\n\t\t\t\tangle += Math.PI*2;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tangle: angle,\n\t\t\t\tdistance: radialDistanceFromCenter\n\t\t\t};\n\t\t},\n\t\taliasPixel = helpers.aliasPixel = function(pixelWidth){\n\t\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t\t},\n\t\tsplineCurve = helpers.splineCurve = function(FirstPoint,MiddlePoint,AfterPoint,t){\n\t\t\t//Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t\t//http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\t\t\tvar d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),\n\t\t\t\td12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),\n\t\t\t\tfa=t*d01/(d01+d12),// scaling factor for triangle Ta\n\t\t\t\tfb=t*d12/(d01+d12);\n\t\t\treturn {\n\t\t\t\tinner : {\n\t\t\t\t\tx : MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),\n\t\t\t\t\ty : MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)\n\t\t\t\t},\n\t\t\t\touter : {\n\t\t\t\t\tx: MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),\n\t\t\t\t\ty : MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tcalculateOrderOfMagnitude = helpers.calculateOrderOfMagnitude = function(val){\n\t\t\treturn Math.floor(Math.log(val) / Math.LN10);\n\t\t},\n\t\tcalculateScaleRange = helpers.calculateScaleRange = function(valuesArray, drawingSize, textSize, startFromZero, integersOnly){\n\n\t\t\t//Set a minimum step of two - a point at the top of the graph, and a point at the base\n\t\t\tvar minSteps = 2,\n\t\t\t\tmaxSteps = Math.floor(drawingSize/(textSize * 1.5)),\n\t\t\t\tskipFitting = (minSteps >= maxSteps);\n\n\t\t\tvar maxValue = max(valuesArray),\n\t\t\t\tminValue = min(valuesArray);\n\n\t\t\t// We need some degree of seperation here to calculate the scales if all the values are the same\n\t\t\t// Adding/minusing 0.5 will give us a range of 1.\n\t\t\tif (maxValue === minValue){\n\t\t\t\tmaxValue += 0.5;\n\t\t\t\t// So we don't end up with a graph with a negative start value if we've said always start from zero\n\t\t\t\tif (minValue >= 0.5 && !startFromZero){\n\t\t\t\t\tminValue -= 0.5;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// Make up a whole number above the values\n\t\t\t\t\tmaxValue += 0.5;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar\tvalueRange = Math.abs(maxValue - minValue),\n\t\t\t\trangeOrderOfMagnitude = calculateOrderOfMagnitude(valueRange),\n\t\t\t\tgraphMax = Math.ceil(maxValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\n\t\t\t\tgraphMin = (startFromZero) ? 0 : Math.floor(minValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\n\t\t\t\tgraphRange = graphMax - graphMin,\n\t\t\t\tstepValue = Math.pow(10, rangeOrderOfMagnitude),\n\t\t\t\tnumberOfSteps = Math.round(graphRange / stepValue);\n\n\t\t\t//If we have more space on the graph we'll use it to give more definition to the data\n\t\t\twhile((numberOfSteps > maxSteps || (numberOfSteps * 2) < maxSteps) && !skipFitting) {\n\t\t\t\tif(numberOfSteps > maxSteps){\n\t\t\t\t\tstepValue *=2;\n\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\n\t\t\t\t\t// Don't ever deal with a decimal number of steps - cancel fitting and just use the minimum number of steps.\n\t\t\t\t\tif (numberOfSteps % 1 !== 0){\n\t\t\t\t\t\tskipFitting = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//We can fit in double the amount of scale points on the scale\n\t\t\t\telse{\n\t\t\t\t\t//If user has declared ints only, and the step value isn't a decimal\n\t\t\t\t\tif (integersOnly && rangeOrderOfMagnitude >= 0){\n\t\t\t\t\t\t//If the user has said integers only, we need to check that making the scale more granular wouldn't make it a float\n\t\t\t\t\t\tif(stepValue/2 % 1 === 0){\n\t\t\t\t\t\t\tstepValue /=2;\n\t\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//If it would make it a float break out of the loop\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//If the scale doesn't have to be an int, make the scale more granular anyway.\n\t\t\t\t\telse{\n\t\t\t\t\t\tstepValue /=2;\n\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (skipFitting){\n\t\t\t\tnumberOfSteps = minSteps;\n\t\t\t\tstepValue = graphRange / numberOfSteps;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tsteps : numberOfSteps,\n\t\t\t\tstepValue : stepValue,\n\t\t\t\tmin : graphMin,\n\t\t\t\tmax\t: graphMin + (numberOfSteps * stepValue)\n\t\t\t};\n\n\t\t},\n\t\t/* jshint ignore:start */\n\t\t// Blows up jshint errors based on the new Function constructor\n\t\t//Templating methods\n\t\t//Javascript micro templating by John Resig - source at http://ejohn.org/blog/javascript-micro-templating/\n\t\ttemplate = helpers.template = function(templateString, valuesObject){\n\t\t\t // If templateString is function rather than string-template - call the function for valuesObject\n\t\t\tif(templateString instanceof Function){\n\t\t\t \treturn templateString(valuesObject);\n\t\t \t}\n\n\t\t\tvar cache = {};\n\t\t\tfunction tmpl(str, data){\n\t\t\t\t// Figure out if we're getting a template, or if we need to\n\t\t\t\t// load the template - and be sure to cache the result.\n\t\t\t\tvar fn = !/\\W/.test(str) ?\n\t\t\t\tcache[str] = cache[str] :\n\n\t\t\t\t// Generate a reusable function that will serve as a template\n\t\t\t\t// generator (and which will be cached).\n\t\t\t\tnew Function(\"obj\",\n\t\t\t\t\t\"var p=[],print=function(){p.push.apply(p,arguments);};\" +\n\n\t\t\t\t\t// Introduce the data as local variables using with(){}\n\t\t\t\t\t\"with(obj){p.push('\" +\n\n\t\t\t\t\t// Convert the template into pure JavaScript\n\t\t\t\t\tstr\n\t\t\t\t\t\t.replace(/[\\r\\t\\n]/g, \" \")\n\t\t\t\t\t\t.split(\"<%\").join(\"\\t\")\n\t\t\t\t\t\t.replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\n\t\t\t\t\t\t.replace(/\\t=(.*?)%>/g, \"',$1,'\")\n\t\t\t\t\t\t.split(\"\\t\").join(\"');\")\n\t\t\t\t\t\t.split(\"%>\").join(\"p.push('\")\n\t\t\t\t\t\t.split(\"\\r\").join(\"\\\\'\") +\n\t\t\t\t\t\"');}return p.join('');\"\n\t\t\t\t);\n\n\t\t\t\t// Provide some basic currying to the user\n\t\t\t\treturn data ? fn( data ) : fn;\n\t\t\t}\n\t\t\treturn tmpl(templateString,valuesObject);\n\t\t},\n\t\t/* jshint ignore:end */\n\t\tgenerateLabels = helpers.generateLabels = function(templateString,numberOfSteps,graphMin,stepValue){\n\t\t\tvar labelsArray = new Array(numberOfSteps);\n\t\t\tif (labelTemplateString){\n\t\t\t\teach(labelsArray,function(val,index){\n\t\t\t\t\tlabelsArray[index] = template(templateString,{value: (graphMin + (stepValue*(index+1)))});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn labelsArray;\n\t\t},\n\t\t//--Animation methods\n\t\t//Easing functions adapted from Robert Penner's easing equations\n\t\t//http://www.robertpenner.com/easing/\n\t\teasingEffects = helpers.easingEffects = {\n\t\t\tlinear: function (t) {\n\t\t\t\treturn t;\n\t\t\t},\n\t\t\teaseInQuad: function (t) {\n\t\t\t\treturn t * t;\n\t\t\t},\n\t\t\teaseOutQuad: function (t) {\n\t\t\t\treturn -1 * t * (t - 2);\n\t\t\t},\n\t\t\teaseInOutQuad: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t;\n\t\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\n\t\t\t},\n\t\t\teaseInCubic: function (t) {\n\t\t\t\treturn t * t * t;\n\t\t\t},\n\t\t\teaseOutCubic: function (t) {\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\n\t\t\t},\n\t\t\teaseInOutCubic: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t * t;\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\n\t\t\t},\n\t\t\teaseInQuart: function (t) {\n\t\t\t\treturn t * t * t * t;\n\t\t\t},\n\t\t\teaseOutQuart: function (t) {\n\t\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\n\t\t\t},\n\t\t\teaseInOutQuart: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t * t * t;\n\t\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\n\t\t\t},\n\t\t\teaseInQuint: function (t) {\n\t\t\t\treturn 1 * (t /= 1) * t * t * t * t;\n\t\t\t},\n\t\t\teaseOutQuint: function (t) {\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n\t\t\t},\n\t\t\teaseInOutQuint: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t * t * t * t;\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n\t\t\t},\n\t\t\teaseInSine: function (t) {\n\t\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n\t\t\t},\n\t\t\teaseOutSine: function (t) {\n\t\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\n\t\t\t},\n\t\t\teaseInOutSine: function (t) {\n\t\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n\t\t\t},\n\t\t\teaseInExpo: function (t) {\n\t\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n\t\t\t},\n\t\t\teaseOutExpo: function (t) {\n\t\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n\t\t\t},\n\t\t\teaseInOutExpo: function (t) {\n\t\t\t\tif (t === 0) return 0;\n\t\t\t\tif (t === 1) return 1;\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * Math.pow(2, 10 * (t - 1));\n\t\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n\t\t\t},\n\t\t\teaseInCirc: function (t) {\n\t\t\t\tif (t >= 1) return t;\n\t\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n\t\t\t},\n\t\t\teaseOutCirc: function (t) {\n\t\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n\t\t\t},\n\t\t\teaseInOutCirc: function (t) {\n\t\t\t\tif ((t /= 1 / 2) < 1) return -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n\t\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t\t\t},\n\t\t\teaseInElastic: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tvar p = 0;\n\t\t\t\tvar a = 1;\n\t\t\t\tif (t === 0) return 0;\n\t\t\t\tif ((t /= 1) == 1) return 1;\n\t\t\t\tif (!p) p = 1 * 0.3;\n\t\t\t\tif (a < Math.abs(1)) {\n\t\t\t\t\ta = 1;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else s = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t},\n\t\t\teaseOutElastic: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tvar p = 0;\n\t\t\t\tvar a = 1;\n\t\t\t\tif (t === 0) return 0;\n\t\t\t\tif ((t /= 1) == 1) return 1;\n\t\t\t\tif (!p) p = 1 * 0.3;\n\t\t\t\tif (a < Math.abs(1)) {\n\t\t\t\t\ta = 1;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else s = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n\t\t\t},\n\t\t\teaseInOutElastic: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tvar p = 0;\n\t\t\t\tvar a = 1;\n\t\t\t\tif (t === 0) return 0;\n\t\t\t\tif ((t /= 1 / 2) == 2) return 1;\n\t\t\t\tif (!p) p = 1 * (0.3 * 1.5);\n\t\t\t\tif (a < Math.abs(1)) {\n\t\t\t\t\ta = 1;\n\t\t\t\t\ts = p / 4;\n\t\t\t\t} else s = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t\tif (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\t\t\t},\n\t\t\teaseInBack: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\n\t\t\t},\n\t\t\teaseOutBack: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n\t\t\t},\n\t\t\teaseInOutBack: function (t) {\n\t\t\t\tvar s = 1.70158;\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n\t\t\t},\n\t\t\teaseInBounce: function (t) {\n\t\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\n\t\t\t},\n\t\t\teaseOutBounce: function (t) {\n\t\t\t\tif ((t /= 1) < (1 / 2.75)) {\n\t\t\t\t\treturn 1 * (7.5625 * t * t);\n\t\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\n\t\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\n\t\t\t\t} else {\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\n\t\t\t\t}\n\t\t\t},\n\t\t\teaseInOutBounce: function (t) {\n\t\t\t\tif (t < 1 / 2) return easingEffects.easeInBounce(t * 2) * 0.5;\n\t\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n\t\t\t}\n\t\t},\n\t\t//Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\t\trequestAnimFrame = helpers.requestAnimFrame = (function(){\n\t\t\treturn window.requestAnimationFrame ||\n\t\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\t\twindow.oRequestAnimationFrame ||\n\t\t\t\twindow.msRequestAnimationFrame ||\n\t\t\t\tfunction(callback) {\n\t\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t\t\t};\n\t\t})(),\n\t\tcancelAnimFrame = helpers.cancelAnimFrame = (function(){\n\t\t\treturn window.cancelAnimationFrame ||\n\t\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\t\twindow.mozCancelAnimationFrame ||\n\t\t\t\twindow.oCancelAnimationFrame ||\n\t\t\t\twindow.msCancelAnimationFrame ||\n\t\t\t\tfunction(callback) {\n\t\t\t\t\treturn window.clearTimeout(callback, 1000 / 60);\n\t\t\t\t};\n\t\t})(),\n\t\tanimationLoop = helpers.animationLoop = function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){\n\n\t\t\tvar currentStep = 0,\n\t\t\t\teasingFunction = easingEffects[easingString] || easingEffects.linear;\n\n\t\t\tvar animationFrame = function(){\n\t\t\t\tcurrentStep++;\n\t\t\t\tvar stepDecimal = currentStep/totalSteps;\n\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\n\n\t\t\t\tcallback.call(chartInstance,easeDecimal,stepDecimal, currentStep);\n\t\t\t\tonProgress.call(chartInstance,easeDecimal,stepDecimal);\n\t\t\t\tif (currentStep < totalSteps){\n\t\t\t\t\tchartInstance.animationFrame = requestAnimFrame(animationFrame);\n\t\t\t\t} else{\n\t\t\t\t\tonComplete.apply(chartInstance);\n\t\t\t\t}\n\t\t\t};\n\t\t\trequestAnimFrame(animationFrame);\n\t\t},\n\t\t//-- DOM methods\n\t\tgetRelativePosition = helpers.getRelativePosition = function(evt){\n\t\t\tvar mouseX, mouseY;\n\t\t\tvar e = evt.originalEvent || evt,\n\t\t\t\tcanvas = evt.currentTarget || evt.srcElement,\n\t\t\t\tboundingRect = canvas.getBoundingClientRect();\n\n\t\t\tif (e.touches){\n\t\t\t\tmouseX = e.touches[0].clientX - boundingRect.left;\n\t\t\t\tmouseY = e.touches[0].clientY - boundingRect.top;\n\n\t\t\t}\n\t\t\telse{\n\t\t\t\tmouseX = e.clientX - boundingRect.left;\n\t\t\t\tmouseY = e.clientY - boundingRect.top;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx : mouseX,\n\t\t\t\ty : mouseY\n\t\t\t};\n\n\t\t},\n\t\taddEvent = helpers.addEvent = function(node,eventType,method){\n\t\t\tif (node.addEventListener){\n\t\t\t\tnode.addEventListener(eventType,method);\n\t\t\t} else if (node.attachEvent){\n\t\t\t\tnode.attachEvent(\"on\"+eventType, method);\n\t\t\t} else {\n\t\t\t\tnode[\"on\"+eventType] = method;\n\t\t\t}\n\t\t},\n\t\tremoveEvent = helpers.removeEvent = function(node, eventType, handler){\n\t\t\tif (node.removeEventListener){\n\t\t\t\tnode.removeEventListener(eventType, handler, false);\n\t\t\t} else if (node.detachEvent){\n\t\t\t\tnode.detachEvent(\"on\"+eventType,handler);\n\t\t\t} else{\n\t\t\t\tnode[\"on\" + eventType] = noop;\n\t\t\t}\n\t\t},\n\t\tbindEvents = helpers.bindEvents = function(chartInstance, arrayOfEvents, handler){\n\t\t\t// Create the events object if it's not already present\n\t\t\tif (!chartInstance.events) chartInstance.events = {};\n\n\t\t\teach(arrayOfEvents,function(eventName){\n\t\t\t\tchartInstance.events[eventName] = function(){\n\t\t\t\t\thandler.apply(chartInstance, arguments);\n\t\t\t\t};\n\t\t\t\taddEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName]);\n\t\t\t});\n\t\t},\n\t\tunbindEvents = helpers.unbindEvents = function (chartInstance, arrayOfEvents) {\n\t\t\teach(arrayOfEvents, function(handler,eventName){\n\t\t\t\tremoveEvent(chartInstance.chart.canvas, eventName, handler);\n\t\t\t});\n\t\t},\n\t\tgetMaximumWidth = helpers.getMaximumWidth = function(domNode){\n\t\t\tvar container = domNode.parentNode;\n\t\t\t// TODO = check cross browser stuff with this.\n\t\t\treturn container.clientWidth;\n\t\t},\n\t\tgetMaximumHeight = helpers.getMaximumHeight = function(domNode){\n\t\t\tvar container = domNode.parentNode;\n\t\t\t// TODO = check cross browser stuff with this.\n\t\t\treturn container.clientHeight;\n\t\t},\n\t\tgetMaximumSize = helpers.getMaximumSize = helpers.getMaximumWidth, // legacy support\n\t\tretinaScale = helpers.retinaScale = function(chart){\n\t\t\tvar ctx = chart.ctx,\n\t\t\t\twidth = chart.canvas.width,\n\t\t\t\theight = chart.canvas.height;\n\n\t\t\tif (window.devicePixelRatio) {\n\t\t\t\tctx.canvas.style.width = width + \"px\";\n\t\t\t\tctx.canvas.style.height = height + \"px\";\n\t\t\t\tctx.canvas.height = height * window.devicePixelRatio;\n\t\t\t\tctx.canvas.width = width * window.devicePixelRatio;\n\t\t\t\tctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\t\t\t}\n\t\t},\n\t\t//-- Canvas methods\n\t\tclear = helpers.clear = function(chart){\n\t\t\tchart.ctx.clearRect(0,0,chart.width,chart.height);\n\t\t},\n\t\tfontString = helpers.fontString = function(pixelSize,fontStyle,fontFamily){\n\t\t\treturn fontStyle + \" \" + pixelSize+\"px \" + fontFamily;\n\t\t},\n\t\tlongestText = helpers.longestText = function(ctx,font,arrayOfStrings){\n\t\t\tctx.font = font;\n\t\t\tvar longest = 0;\n\t\t\teach(arrayOfStrings,function(string){\n\t\t\t\tvar textWidth = ctx.measureText(string).width;\n\t\t\t\tlongest = (textWidth > longest) ? textWidth : longest;\n\t\t\t});\n\t\t\treturn longest;\n\t\t},\n\t\tdrawRoundedRectangle = helpers.drawRoundedRectangle = function(ctx,x,y,width,height,radius){\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x + radius, y);\n\t\t\tctx.lineTo(x + width - radius, y);\n\t\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n\t\t\tctx.lineTo(x + width, y + height - radius);\n\t\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n\t\t\tctx.lineTo(x + radius, y + height);\n\t\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n\t\t\tctx.lineTo(x, y + radius);\n\t\t\tctx.quadraticCurveTo(x, y, x + radius, y);\n\t\t\tctx.closePath();\n\t\t};\n\n\n\t//Store a reference to each instance - allowing us to globally resize chart instances on window resize.\n\t//Destroy method on the chart will remove the instance of the chart from this reference.\n\tChart.instances = {};\n\n\tChart.Type = function(data,options,chart){\n\t\tthis.options = options;\n\t\tthis.chart = chart;\n\t\tthis.id = uid();\n\t\t//Add the chart instance to the global namespace\n\t\tChart.instances[this.id] = this;\n\n\t\t// Initialize is always called when a chart type is created\n\t\t// By default it is a no op, but it should be extended\n\t\tif (options.responsive){\n\t\t\tthis.resize();\n\t\t}\n\t\tthis.initialize.call(this,data);\n\t};\n\n\t//Core methods that'll be a part of every chart type\n\textend(Chart.Type.prototype,{\n\t\tinitialize : function(){return this;},\n\t\tclear : function(){\n\t\t\tclear(this.chart);\n\t\t\treturn this;\n\t\t},\n\t\tstop : function(){\n\t\t\t// Stops any current animation loop occuring\n\t\t\thelpers.cancelAnimFrame.call(root, this.animationFrame);\n\t\t\treturn this;\n\t\t},\n\t\tresize : function(callback){\n\t\t\tthis.stop();\n\t\t\tvar canvas = this.chart.canvas,\n\t\t\t\tnewWidth = getMaximumWidth(this.chart.canvas),\n\t\t\t\tnewHeight = this.options.maintainAspectRatio ? newWidth / this.chart.aspectRatio : getMaximumHeight(this.chart.canvas);\n\n\t\t\tcanvas.width = this.chart.width = newWidth;\n\t\t\tcanvas.height =  this.chart.height = newHeight;\n\n\t\t\tretinaScale(this.chart);\n\n\t\t\tif (typeof callback === \"function\"){\n\t\t\t\tcallback.apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\treflow : noop,\n\t\trender : function(reflow){\n\t\t\tif (reflow){\n\t\t\t\tthis.reflow();\n\t\t\t}\n\t\t\tif (this.options.animation && !reflow){\n\t\t\t\thelpers.animationLoop(\n\t\t\t\t\tthis.draw,\n\t\t\t\t\tthis.options.animationSteps,\n\t\t\t\t\tthis.options.animationEasing,\n\t\t\t\t\tthis.options.onAnimationProgress,\n\t\t\t\t\tthis.options.onAnimationComplete,\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.draw();\n\t\t\t\tthis.options.onAnimationComplete.call(this);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tgenerateLegend : function(){\n\t\t\treturn template(this.options.legendTemplate,this);\n\t\t},\n\t\tdestroy : function(){\n\t\t\tthis.clear();\n\t\t\tunbindEvents(this, this.events);\n\t\t\tdelete Chart.instances[this.id];\n\t\t},\n\t\tshowTooltip : function(ChartElements, forceRedraw){\n\t\t\t// Only redraw the chart if we've actually changed what we're hovering on.\n\t\t\tif (typeof this.activeElements === 'undefined') this.activeElements = [];\n\n\t\t\tvar isChanged = (function(Elements){\n\t\t\t\tvar changed = false;\n\n\t\t\t\tif (Elements.length !== this.activeElements.length){\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn changed;\n\t\t\t\t}\n\n\t\t\t\teach(Elements, function(element, index){\n\t\t\t\t\tif (element !== this.activeElements[index]){\n\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\treturn changed;\n\t\t\t}).call(this, ChartElements);\n\n\t\t\tif (!isChanged && !forceRedraw){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.activeElements = ChartElements;\n\t\t\t}\n\t\t\tthis.draw();\n\t\t\tif (ChartElements.length > 0){\n\t\t\t\t// If we have multiple datasets, show a MultiTooltip for all of the data points at that index\n\t\t\t\tif (this.datasets && this.datasets.length > 1) {\n\t\t\t\t\tvar dataArray,\n\t\t\t\t\t\tdataIndex;\n\n\t\t\t\t\tfor (var i = this.datasets.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tdataArray = this.datasets[i].points || this.datasets[i].bars || this.datasets[i].segments;\n\t\t\t\t\t\tdataIndex = indexOf(dataArray, ChartElements[0]);\n\t\t\t\t\t\tif (dataIndex !== -1){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar tooltipLabels = [],\n\t\t\t\t\t\ttooltipColors = [],\n\t\t\t\t\t\tmedianPosition = (function(index) {\n\n\t\t\t\t\t\t\t// Get all the points at that particular index\n\t\t\t\t\t\t\tvar Elements = [],\n\t\t\t\t\t\t\t\tdataCollection,\n\t\t\t\t\t\t\t\txPositions = [],\n\t\t\t\t\t\t\t\tyPositions = [],\n\t\t\t\t\t\t\t\txMax,\n\t\t\t\t\t\t\t\tyMax,\n\t\t\t\t\t\t\t\txMin,\n\t\t\t\t\t\t\t\tyMin;\n\t\t\t\t\t\t\thelpers.each(this.datasets, function(dataset){\n\t\t\t\t\t\t\t\tdataCollection = dataset.points || dataset.bars || dataset.segments;\n\t\t\t\t\t\t\t\tif (dataCollection[dataIndex] && dataCollection[dataIndex].hasValue()){\n\t\t\t\t\t\t\t\t\tElements.push(dataCollection[dataIndex]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\thelpers.each(Elements, function(element) {\n\t\t\t\t\t\t\t\txPositions.push(element.x);\n\t\t\t\t\t\t\t\tyPositions.push(element.y);\n\n\n\t\t\t\t\t\t\t\t//Include any colour information about the element\n\t\t\t\t\t\t\t\ttooltipLabels.push(helpers.template(this.options.multiTooltipTemplate, element));\n\t\t\t\t\t\t\t\ttooltipColors.push({\n\t\t\t\t\t\t\t\t\tfill: element._saved.fillColor || element.fillColor,\n\t\t\t\t\t\t\t\t\tstroke: element._saved.strokeColor || element.strokeColor\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t\t\tyMin = min(yPositions);\n\t\t\t\t\t\t\tyMax = max(yPositions);\n\n\t\t\t\t\t\t\txMin = min(xPositions);\n\t\t\t\t\t\t\txMax = max(xPositions);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tx: (xMin > this.chart.width/2) ? xMin : xMax,\n\t\t\t\t\t\t\t\ty: (yMin + yMax)/2\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}).call(this, dataIndex);\n\n\t\t\t\t\tnew Chart.MultiTooltip({\n\t\t\t\t\t\tx: medianPosition.x,\n\t\t\t\t\t\ty: medianPosition.y,\n\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\n\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\n\t\t\t\t\t\txOffset: this.options.tooltipXOffset,\n\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\n\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\n\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\n\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\n\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\n\t\t\t\t\t\ttitleTextColor: this.options.tooltipTitleFontColor,\n\t\t\t\t\t\ttitleFontFamily: this.options.tooltipTitleFontFamily,\n\t\t\t\t\t\ttitleFontStyle: this.options.tooltipTitleFontStyle,\n\t\t\t\t\t\ttitleFontSize: this.options.tooltipTitleFontSize,\n\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\n\t\t\t\t\t\tlabels: tooltipLabels,\n\t\t\t\t\t\tlegendColors: tooltipColors,\n\t\t\t\t\t\tlegendColorBackground : this.options.multiTooltipKeyBackground,\n\t\t\t\t\t\ttitle: ChartElements[0].label,\n\t\t\t\t\t\tchart: this.chart,\n\t\t\t\t\t\tctx: this.chart.ctx\n\t\t\t\t\t}).draw();\n\n\t\t\t\t} else {\n\t\t\t\t\teach(ChartElements, function(Element) {\n\t\t\t\t\t\tvar tooltipPosition = Element.tooltipPosition();\n\t\t\t\t\t\tnew Chart.Tooltip({\n\t\t\t\t\t\t\tx: Math.round(tooltipPosition.x),\n\t\t\t\t\t\t\ty: Math.round(tooltipPosition.y),\n\t\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\n\t\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\n\t\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\n\t\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\n\t\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\n\t\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\n\t\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\n\t\t\t\t\t\t\tcaretHeight: this.options.tooltipCaretSize,\n\t\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\n\t\t\t\t\t\t\ttext: template(this.options.tooltipTemplate, Element),\n\t\t\t\t\t\t\tchart: this.chart\n\t\t\t\t\t\t}).draw();\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\ttoBase64Image : function(){\n\t\t\treturn this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments);\n\t\t}\n\t});\n\n\tChart.Type.extend = function(extensions){\n\n\t\tvar parent = this;\n\n\t\tvar ChartType = function(){\n\t\t\treturn parent.apply(this,arguments);\n\t\t};\n\n\t\t//Copy the prototype object of the this class\n\t\tChartType.prototype = clone(parent.prototype);\n\t\t//Now overwrite some of the properties in the base class with the new extensions\n\t\textend(ChartType.prototype, extensions);\n\n\t\tChartType.extend = Chart.Type.extend;\n\n\t\tif (extensions.name || parent.prototype.name){\n\n\t\t\tvar chartName = extensions.name || parent.prototype.name;\n\t\t\t//Assign any potential default values of the new chart type\n\n\t\t\t//If none are defined, we'll use a clone of the chart type this is being extended from.\n\t\t\t//I.e. if we extend a line chart, we'll use the defaults from the line chart if our new chart\n\t\t\t//doesn't define some defaults of their own.\n\n\t\t\tvar baseDefaults = (Chart.defaults[parent.prototype.name]) ? clone(Chart.defaults[parent.prototype.name]) : {};\n\n\t\t\tChart.defaults[chartName] = extend(baseDefaults,extensions.defaults);\n\n\t\t\tChart.types[chartName] = ChartType;\n\n\t\t\t//Register this new chart type in the Chart prototype\n\t\t\tChart.prototype[chartName] = function(data,options){\n\t\t\t\tvar config = merge(Chart.defaults.global, Chart.defaults[chartName], options || {});\n\t\t\t\treturn new ChartType(data,config,this);\n\t\t\t};\n\t\t} else{\n\t\t\twarn(\"Name not provided for this chart, so it hasn't been registered\");\n\t\t}\n\t\treturn parent;\n\t};\n\n\tChart.Element = function(configuration){\n\t\textend(this,configuration);\n\t\tthis.initialize.apply(this,arguments);\n\t\tthis.save();\n\t};\n\textend(Chart.Element.prototype,{\n\t\tinitialize : function(){},\n\t\trestore : function(props){\n\t\t\tif (!props){\n\t\t\t\textend(this,this._saved);\n\t\t\t} else {\n\t\t\t\teach(props,function(key){\n\t\t\t\t\tthis[key] = this._saved[key];\n\t\t\t\t},this);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tsave : function(){\n\t\t\tthis._saved = clone(this);\n\t\t\tdelete this._saved._saved;\n\t\t\treturn this;\n\t\t},\n\t\tupdate : function(newProps){\n\t\t\teach(newProps,function(value,key){\n\t\t\t\tthis._saved[key] = this[key];\n\t\t\t\tthis[key] = value;\n\t\t\t},this);\n\t\t\treturn this;\n\t\t},\n\t\ttransition : function(props,ease){\n\t\t\teach(props,function(value,key){\n\t\t\t\tthis[key] = ((value - this._saved[key]) * ease) + this._saved[key];\n\t\t\t},this);\n\t\t\treturn this;\n\t\t},\n\t\ttooltipPosition : function(){\n\t\t\treturn {\n\t\t\t\tx : this.x,\n\t\t\t\ty : this.y\n\t\t\t};\n\t\t},\n\t\thasValue: function(){\n\t\t\treturn isNumber(this.value);\n\t\t}\n\t});\n\n\tChart.Element.extend = inherits;\n\n\n\tChart.Point = Chart.Element.extend({\n\t\tdisplay: true,\n\t\tinRange: function(chartX,chartY){\n\t\t\tvar hitDetectionRange = this.hitDetectionRadius + this.radius;\n\t\t\treturn ((Math.pow(chartX-this.x, 2)+Math.pow(chartY-this.y, 2)) < Math.pow(hitDetectionRange,2));\n\t\t},\n\t\tdraw : function(){\n\t\t\tif (this.display){\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\tctx.beginPath();\n\n\t\t\t\tctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);\n\t\t\t\tctx.closePath();\n\n\t\t\t\tctx.strokeStyle = this.strokeColor;\n\t\t\t\tctx.lineWidth = this.strokeWidth;\n\n\t\t\t\tctx.fillStyle = this.fillColor;\n\n\t\t\t\tctx.fill();\n\t\t\t\tctx.stroke();\n\t\t\t}\n\n\n\t\t\t//Quick debug for bezier curve splining\n\t\t\t//Highlights control points and the line between them.\n\t\t\t//Handy for dev - stripped in the min version.\n\n\t\t\t// ctx.save();\n\t\t\t// ctx.fillStyle = \"black\";\n\t\t\t// ctx.strokeStyle = \"black\"\n\t\t\t// ctx.beginPath();\n\t\t\t// ctx.arc(this.controlPoints.inner.x,this.controlPoints.inner.y, 2, 0, Math.PI*2);\n\t\t\t// ctx.fill();\n\n\t\t\t// ctx.beginPath();\n\t\t\t// ctx.arc(this.controlPoints.outer.x,this.controlPoints.outer.y, 2, 0, Math.PI*2);\n\t\t\t// ctx.fill();\n\n\t\t\t// ctx.moveTo(this.controlPoints.inner.x,this.controlPoints.inner.y);\n\t\t\t// ctx.lineTo(this.x, this.y);\n\t\t\t// ctx.lineTo(this.controlPoints.outer.x,this.controlPoints.outer.y);\n\t\t\t// ctx.stroke();\n\n\t\t\t// ctx.restore();\n\n\n\n\t\t}\n\t});\n\n\tChart.Arc = Chart.Element.extend({\n\t\tinRange : function(chartX,chartY){\n\n\t\t\tvar pointRelativePosition = helpers.getAngleFromPoint(this, {\n\t\t\t\tx: chartX,\n\t\t\t\ty: chartY\n\t\t\t});\n\n\t\t\t//Check if within the range of the open/close angle\n\t\t\tvar betweenAngles = (pointRelativePosition.angle >= this.startAngle && pointRelativePosition.angle <= this.endAngle),\n\t\t\t\twithinRadius = (pointRelativePosition.distance >= this.innerRadius && pointRelativePosition.distance <= this.outerRadius);\n\n\t\t\treturn (betweenAngles && withinRadius);\n\t\t\t//Ensure within the outside of the arc centre, but inside arc outer\n\t\t},\n\t\ttooltipPosition : function(){\n\t\t\tvar centreAngle = this.startAngle + ((this.endAngle - this.startAngle) / 2),\n\t\t\t\trangeFromCentre = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius;\n\t\t\treturn {\n\t\t\t\tx : this.x + (Math.cos(centreAngle) * rangeFromCentre),\n\t\t\t\ty : this.y + (Math.sin(centreAngle) * rangeFromCentre)\n\t\t\t};\n\t\t},\n\t\tdraw : function(animationPercent){\n\n\t\t\tvar easingDecimal = animationPercent || 1;\n\n\t\t\tvar ctx = this.ctx;\n\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(this.x, this.y, this.outerRadius, this.startAngle, this.endAngle);\n\n\t\t\tctx.arc(this.x, this.y, this.innerRadius, this.endAngle, this.startAngle, true);\n\n\t\t\tctx.closePath();\n\t\t\tctx.strokeStyle = this.strokeColor;\n\t\t\tctx.lineWidth = this.strokeWidth;\n\n\t\t\tctx.fillStyle = this.fillColor;\n\n\t\t\tctx.fill();\n\t\t\tctx.lineJoin = 'bevel';\n\n\t\t\tif (this.showStroke){\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t});\n\n\tChart.Rectangle = Chart.Element.extend({\n\t\tdraw : function(){\n\t\t\tvar ctx = this.ctx,\n\t\t\t\thalfWidth = this.width/2,\n\t\t\t\tleftX = this.x - halfWidth,\n\t\t\t\trightX = this.x + halfWidth,\n\t\t\t\ttop = this.base - (this.base - this.y),\n\t\t\t\thalfStroke = this.strokeWidth / 2;\n\n\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\n\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\n\t\t\tif (this.showStroke){\n\t\t\t\tleftX += halfStroke;\n\t\t\t\trightX -= halfStroke;\n\t\t\t\ttop += halfStroke;\n\t\t\t}\n\n\t\t\tctx.beginPath();\n\n\t\t\tctx.fillStyle = this.fillColor;\n\t\t\tctx.strokeStyle = this.strokeColor;\n\t\t\tctx.lineWidth = this.strokeWidth;\n\n\t\t\t// It'd be nice to keep this class totally generic to any rectangle\n\t\t\t// and simply specify which border to miss out.\n\t\t\tctx.moveTo(leftX, this.base);\n\t\t\tctx.lineTo(leftX, top);\n\t\t\tctx.lineTo(rightX, top);\n\t\t\tctx.lineTo(rightX, this.base);\n\t\t\tctx.fill();\n\t\t\tif (this.showStroke){\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\t\theight : function(){\n\t\t\treturn this.base - this.y;\n\t\t},\n\t\tinRange : function(chartX,chartY){\n\t\t\treturn (chartX >= this.x - this.width/2 && chartX <= this.x + this.width/2) && (chartY >= this.y && chartY <= this.base);\n\t\t}\n\t});\n\n\tChart.Tooltip = Chart.Element.extend({\n\t\tdraw : function(){\n\n\t\t\tvar ctx = this.chart.ctx;\n\n\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\n\n\t\t\tthis.xAlign = \"center\";\n\t\t\tthis.yAlign = \"above\";\n\n\t\t\t//Distance between the actual element.y position and the start of the tooltip caret\n\t\t\tvar caretPadding = 2;\n\n\t\t\tvar tooltipWidth = ctx.measureText(this.text).width + 2*this.xPadding,\n\t\t\t\ttooltipRectHeight = this.fontSize + 2*this.yPadding,\n\t\t\t\ttooltipHeight = tooltipRectHeight + this.caretHeight + caretPadding;\n\n\t\t\tif (this.x + tooltipWidth/2 >this.chart.width){\n\t\t\t\tthis.xAlign = \"left\";\n\t\t\t} else if (this.x - tooltipWidth/2 < 0){\n\t\t\t\tthis.xAlign = \"right\";\n\t\t\t}\n\n\t\t\tif (this.y - tooltipHeight < 0){\n\t\t\t\tthis.yAlign = \"below\";\n\t\t\t}\n\n\n\t\t\tvar tooltipX = this.x - tooltipWidth/2,\n\t\t\t\ttooltipY = this.y - tooltipHeight;\n\n\t\t\tctx.fillStyle = this.fillColor;\n\n\t\t\tswitch(this.yAlign)\n\t\t\t{\n\t\t\tcase \"above\":\n\t\t\t\t//Draw a caret above the x/y\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(this.x,this.y - caretPadding);\n\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y - (caretPadding + this.caretHeight));\n\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y - (caretPadding + this.caretHeight));\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.fill();\n\t\t\t\tbreak;\n\t\t\tcase \"below\":\n\t\t\t\ttooltipY = this.y + caretPadding + this.caretHeight;\n\t\t\t\t//Draw a caret below the x/y\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(this.x, this.y + caretPadding);\n\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y + caretPadding + this.caretHeight);\n\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y + caretPadding + this.caretHeight);\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.fill();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch(this.xAlign)\n\t\t\t{\n\t\t\tcase \"left\":\n\t\t\t\ttooltipX = this.x - tooltipWidth + (this.cornerRadius + this.caretHeight);\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\ttooltipX = this.x - (this.cornerRadius + this.caretHeight);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdrawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius);\n\n\t\t\tctx.fill();\n\n\t\t\tctx.fillStyle = this.textColor;\n\t\t\tctx.textAlign = \"center\";\n\t\t\tctx.textBaseline = \"middle\";\n\t\t\tctx.fillText(this.text, tooltipX + tooltipWidth/2, tooltipY + tooltipRectHeight/2);\n\t\t}\n\t});\n\n\tChart.MultiTooltip = Chart.Element.extend({\n\t\tinitialize : function(){\n\t\t\tthis.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\n\n\t\t\tthis.titleFont = fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);\n\n\t\t\tthis.height = (this.labels.length * this.fontSize) + ((this.labels.length-1) * (this.fontSize/2)) + (this.yPadding*2) + this.titleFontSize *1.5;\n\n\t\t\tthis.ctx.font = this.titleFont;\n\n\t\t\tvar titleWidth = this.ctx.measureText(this.title).width,\n\t\t\t\t//Label has a legend square as well so account for this.\n\t\t\t\tlabelWidth = longestText(this.ctx,this.font,this.labels) + this.fontSize + 3,\n\t\t\t\tlongestTextWidth = max([labelWidth,titleWidth]);\n\n\t\t\tthis.width = longestTextWidth + (this.xPadding*2);\n\n\n\t\t\tvar halfHeight = this.height/2;\n\n\t\t\t//Check to ensure the height will fit on the canvas\n\t\t\t//The three is to buffer form the very\n\t\t\tif (this.y - halfHeight < 0 ){\n\t\t\t\tthis.y = halfHeight;\n\t\t\t} else if (this.y + halfHeight > this.chart.height){\n\t\t\t\tthis.y = this.chart.height - halfHeight;\n\t\t\t}\n\n\t\t\t//Decide whether to align left or right based on position on canvas\n\t\t\tif (this.x > this.chart.width/2){\n\t\t\t\tthis.x -= this.xOffset + this.width;\n\t\t\t} else {\n\t\t\t\tthis.x += this.xOffset;\n\t\t\t}\n\n\n\t\t},\n\t\tgetLineHeight : function(index){\n\t\t\tvar baseLineHeight = this.y - (this.height/2) + this.yPadding,\n\t\t\t\tafterTitleIndex = index-1;\n\n\t\t\t//If the index is zero, we're getting the title\n\t\t\tif (index === 0){\n\t\t\t\treturn baseLineHeight + this.titleFontSize/2;\n\t\t\t} else{\n\t\t\t\treturn baseLineHeight + ((this.fontSize*1.5*afterTitleIndex) + this.fontSize/2) + this.titleFontSize * 1.5;\n\t\t\t}\n\n\t\t},\n\t\tdraw : function(){\n\t\t\tdrawRoundedRectangle(this.ctx,this.x,this.y - this.height/2,this.width,this.height,this.cornerRadius);\n\t\t\tvar ctx = this.ctx;\n\t\t\tctx.fillStyle = this.fillColor;\n\t\t\tctx.fill();\n\t\t\tctx.closePath();\n\n\t\t\tctx.textAlign = \"left\";\n\t\t\tctx.textBaseline = \"middle\";\n\t\t\tctx.fillStyle = this.titleTextColor;\n\t\t\tctx.font = this.titleFont;\n\n\t\t\tctx.fillText(this.title,this.x + this.xPadding, this.getLineHeight(0));\n\n\t\t\tctx.font = this.font;\n\t\t\thelpers.each(this.labels,function(label,index){\n\t\t\t\tctx.fillStyle = this.textColor;\n\t\t\t\tctx.fillText(label,this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(index + 1));\n\n\t\t\t\t//A bit gnarly, but clearing this rectangle breaks when using explorercanvas (clears whole canvas)\n\t\t\t\t//ctx.clearRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\n\t\t\t\t//Instead we'll make a white filled block to put the legendColour palette over.\n\n\t\t\t\tctx.fillStyle = this.legendColorBackground;\n\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\n\n\t\t\t\tctx.fillStyle = this.legendColors[index].fill;\n\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\n\n\n\t\t\t},this);\n\t\t}\n\t});\n\n\tChart.Scale = Chart.Element.extend({\n\t\tinitialize : function(){\n\t\t\tthis.fit();\n\t\t},\n\t\tbuildYLabels : function(){\n\t\t\tthis.yLabels = [];\n\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\n\n\t\t\tfor (var i=0; i<=this.steps; i++){\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\n\t\t\t}\n\t\t\tthis.yLabelWidth = (this.display && this.showLabels) ? longestText(this.ctx,this.font,this.yLabels) : 0;\n\t\t},\n\t\taddXLabel : function(label){\n\t\t\tthis.xLabels.push(label);\n\t\t\tthis.valuesCount++;\n\t\t\tthis.fit();\n\t\t},\n\t\tremoveXLabel : function(){\n\t\t\tthis.xLabels.shift();\n\t\t\tthis.valuesCount--;\n\t\t\tthis.fit();\n\t\t},\n\t\t// Fitting loop to rotate x Labels and figure out what fits there, and also calculate how many Y steps to use\n\t\tfit: function(){\n\t\t\t// First we need the width of the yLabels, assuming the xLabels aren't rotated\n\n\t\t\t// To do that we need the base line at the top and base of the chart, assuming there is no x label rotation\n\t\t\tthis.startPoint = (this.display) ? this.fontSize : 0;\n\t\t\tthis.endPoint = (this.display) ? this.height - (this.fontSize * 1.5) - 5 : this.height; // -5 to pad labels\n\n\t\t\t// Apply padding settings to the start and end point.\n\t\t\tthis.startPoint += this.padding;\n\t\t\tthis.endPoint -= this.padding;\n\n\t\t\t// Cache the starting height, so can determine if we need to recalculate the scale yAxis\n\t\t\tvar cachedHeight = this.endPoint - this.startPoint,\n\t\t\t\tcachedYLabelWidth;\n\n\t\t\t// Build the current yLabels so we have an idea of what size they'll be to start\n\t\t\t/*\n\t\t\t *\tThis sets what is returned from calculateScaleRange as static properties of this class:\n\t\t\t *\n\t\t\t\tthis.steps;\n\t\t\t\tthis.stepValue;\n\t\t\t\tthis.min;\n\t\t\t\tthis.max;\n\t\t\t *\n\t\t\t */\n\t\t\tthis.calculateYRange(cachedHeight);\n\n\t\t\t// With these properties set we can now build the array of yLabels\n\t\t\t// and also the width of the largest yLabel\n\t\t\tthis.buildYLabels();\n\n\t\t\tthis.calculateXLabelRotation();\n\n\t\t\twhile((cachedHeight > this.endPoint - this.startPoint)){\n\t\t\t\tcachedHeight = this.endPoint - this.startPoint;\n\t\t\t\tcachedYLabelWidth = this.yLabelWidth;\n\n\t\t\t\tthis.calculateYRange(cachedHeight);\n\t\t\t\tthis.buildYLabels();\n\n\t\t\t\t// Only go through the xLabel loop again if the yLabel width has changed\n\t\t\t\tif (cachedYLabelWidth < this.yLabelWidth){\n\t\t\t\t\tthis.calculateXLabelRotation();\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tcalculateXLabelRotation : function(){\n\t\t\t//Get the width of each grid by calculating the difference\n\t\t\t//between x offsets between 0 and 1.\n\n\t\t\tthis.ctx.font = this.font;\n\n\t\t\tvar firstWidth = this.ctx.measureText(this.xLabels[0]).width,\n\t\t\t\tlastWidth = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width,\n\t\t\t\tfirstRotated,\n\t\t\t\tlastRotated;\n\n\n\t\t\tthis.xScalePaddingRight = lastWidth/2 + 3;\n\t\t\tthis.xScalePaddingLeft = (firstWidth/2 > this.yLabelWidth + 10) ? firstWidth/2 : this.yLabelWidth + 10;\n\n\t\t\tthis.xLabelRotation = 0;\n\t\t\tif (this.display){\n\t\t\t\tvar originalLabelWidth = longestText(this.ctx,this.font,this.xLabels),\n\t\t\t\t\tcosRotation,\n\t\t\t\t\tfirstRotatedWidth;\n\t\t\t\tthis.xLabelWidth = originalLabelWidth;\n\t\t\t\t//Allow 3 pixels x2 padding either side for label readability\n\t\t\t\tvar xGridWidth = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6;\n\n\t\t\t\t//Max label rotate should be 90 - also act as a loop counter\n\t\t\t\twhile ((this.xLabelWidth > xGridWidth && this.xLabelRotation === 0) || (this.xLabelWidth > xGridWidth && this.xLabelRotation <= 90 && this.xLabelRotation > 0)){\n\t\t\t\t\tcosRotation = Math.cos(toRadians(this.xLabelRotation));\n\n\t\t\t\t\tfirstRotated = cosRotation * firstWidth;\n\t\t\t\t\tlastRotated = cosRotation * lastWidth;\n\n\t\t\t\t\t// We're right aligning the text now.\n\t\t\t\t\tif (firstRotated + this.fontSize / 2 > this.yLabelWidth + 8){\n\t\t\t\t\t\tthis.xScalePaddingLeft = firstRotated + this.fontSize / 2;\n\t\t\t\t\t}\n\t\t\t\t\tthis.xScalePaddingRight = this.fontSize/2;\n\n\n\t\t\t\t\tthis.xLabelRotation++;\n\t\t\t\t\tthis.xLabelWidth = cosRotation * originalLabelWidth;\n\n\t\t\t\t}\n\t\t\t\tif (this.xLabelRotation > 0){\n\t\t\t\t\tthis.endPoint -= Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth + 3;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.xLabelWidth = 0;\n\t\t\t\tthis.xScalePaddingRight = this.padding;\n\t\t\t\tthis.xScalePaddingLeft = this.padding;\n\t\t\t}\n\n\t\t},\n\t\t// Needs to be overidden in each Chart type\n\t\t// Otherwise we need to pass all the data into the scale class\n\t\tcalculateYRange: noop,\n\t\tdrawingArea: function(){\n\t\t\treturn this.startPoint - this.endPoint;\n\t\t},\n\t\tcalculateY : function(value){\n\t\t\tvar scalingFactor = this.drawingArea() / (this.min - this.max);\n\t\t\treturn this.endPoint - (scalingFactor * (value - this.min));\n\t\t},\n\t\tcalculateX : function(index){\n\t\t\tvar isRotated = (this.xLabelRotation > 0),\n\t\t\t\t// innerWidth = (this.offsetGridLines) ? this.width - offsetLeft - this.padding : this.width - (offsetLeft + halfLabelWidth * 2) - this.padding,\n\t\t\t\tinnerWidth = this.width - (this.xScalePaddingLeft + this.xScalePaddingRight),\n\t\t\t\tvalueWidth = innerWidth/(this.valuesCount - ((this.offsetGridLines) ? 0 : 1)),\n\t\t\t\tvalueOffset = (valueWidth * index) + this.xScalePaddingLeft;\n\n\t\t\tif (this.offsetGridLines){\n\t\t\t\tvalueOffset += (valueWidth/2);\n\t\t\t}\n\n\t\t\treturn Math.round(valueOffset);\n\t\t},\n\t\tupdate : function(newProps){\n\t\t\thelpers.extend(this, newProps);\n\t\t\tthis.fit();\n\t\t},\n\t\tdraw : function(){\n\t\t\tvar ctx = this.ctx,\n\t\t\t\tyLabelGap = (this.endPoint - this.startPoint) / this.steps,\n\t\t\t\txStart = Math.round(this.xScalePaddingLeft);\n\t\t\tif (this.display){\n\t\t\t\tctx.fillStyle = this.textColor;\n\t\t\t\tctx.font = this.font;\n\t\t\t\teach(this.yLabels,function(labelString,index){\n\t\t\t\t\tvar yLabelCenter = this.endPoint - (yLabelGap * index),\n\t\t\t\t\t\tlinePositionY = Math.round(yLabelCenter);\n\n\t\t\t\t\tctx.textAlign = \"right\";\n\t\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\t\tif (this.showLabels){\n\t\t\t\t\t\tctx.fillText(labelString,xStart - 10,yLabelCenter);\n\t\t\t\t\t}\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tif (index > 0){\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// This is the first line on the scale\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tlinePositionY += helpers.aliasPixel(ctx.lineWidth);\n\n\t\t\t\t\tctx.moveTo(xStart, linePositionY);\n\t\t\t\t\tctx.lineTo(this.width, linePositionY);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(xStart - 5, linePositionY);\n\t\t\t\t\tctx.lineTo(xStart, linePositionY);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\t\t\t\t},this);\n\n\t\t\t\teach(this.xLabels,function(label,index){\n\t\t\t\t\tvar xPos = this.calculateX(index) + aliasPixel(this.lineWidth),\n\t\t\t\t\t\t// Check to see if line/bar here and decide where to place the line\n\t\t\t\t\t\tlinePos = this.calculateX(index - (this.offsetGridLines ? 0.5 : 0)) + aliasPixel(this.lineWidth),\n\t\t\t\t\t\tisRotated = (this.xLabelRotation > 0);\n\n\t\t\t\t\tctx.beginPath();\n\n\t\t\t\t\tif (index > 0){\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// This is the first line on the scale\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\t}\n\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\n\t\t\t\t\tctx.lineTo(linePos,this.startPoint - 3);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\n\n\t\t\t\t\t// Small lines at the bottom of the base grid line\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\n\t\t\t\t\tctx.lineTo(linePos,this.endPoint + 5);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\t\t\t\t\tctx.save();\n\t\t\t\t\tctx.translate(xPos,(isRotated) ? this.endPoint + 12 : this.endPoint + 8);\n\t\t\t\t\tctx.rotate(toRadians(this.xLabelRotation)*-1);\n\t\t\t\t\tctx.font = this.font;\n\t\t\t\t\tctx.textAlign = (isRotated) ? \"right\" : \"center\";\n\t\t\t\t\tctx.textBaseline = (isRotated) ? \"middle\" : \"top\";\n\t\t\t\t\tctx.fillText(label, 0, 0);\n\t\t\t\t\tctx.restore();\n\t\t\t\t},this);\n\n\t\t\t}\n\t\t}\n\n\t});\n\n\tChart.RadialScale = Chart.Element.extend({\n\t\tinitialize: function(){\n\t\t\tthis.size = min([this.height, this.width]);\n\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\n\t\t},\n\t\tcalculateCenterOffset: function(value){\n\t\t\t// Take into account half font size + the yPadding of the top value\n\t\t\tvar scalingFactor = this.drawingArea / (this.max - this.min);\n\n\t\t\treturn (value - this.min) * scalingFactor;\n\t\t},\n\t\tupdate : function(){\n\t\t\tif (!this.lineArc){\n\t\t\t\tthis.setScaleSize();\n\t\t\t} else {\n\t\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\n\t\t\t}\n\t\t\tthis.buildYLabels();\n\t\t},\n\t\tbuildYLabels: function(){\n\t\t\tthis.yLabels = [];\n\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\n\n\t\t\tfor (var i=0; i<=this.steps; i++){\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\n\t\t\t}\n\t\t},\n\t\tgetCircumference : function(){\n\t\t\treturn ((Math.PI*2) / this.valuesCount);\n\t\t},\n\t\tsetScaleSize: function(){\n\t\t\t/*\n\t\t\t * Right, this is really confusing and there is a lot of maths going on here\n\t\t\t * The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n\t\t\t *\n\t\t\t * Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n\t\t\t *\n\t\t\t * Solution:\n\t\t\t *\n\t\t\t * We assume the radius of the polygon is half the size of the canvas at first\n\t\t\t * at each index we check if the text overlaps.\n\t\t\t *\n\t\t\t * Where it does, we store that angle and that index.\n\t\t\t *\n\t\t\t * After finding the largest index and angle we calculate how much we need to remove\n\t\t\t * from the shape radius to move the point inwards by that x.\n\t\t\t *\n\t\t\t * We average the left and right distances to get the maximum shape radius that can fit in the box\n\t\t\t * along with labels.\n\t\t\t *\n\t\t\t * Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n\t\t\t * on each side, removing that from the size, halving it and adding the left x protrusion width.\n\t\t\t *\n\t\t\t * This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n\t\t\t * and position it in the most space efficient manner\n\t\t\t *\n\t\t\t * https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\t\t\t */\n\n\n\t\t\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n\t\t\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n\t\t\tvar largestPossibleRadius = min([(this.height/2 - this.pointLabelFontSize - 5), this.width/2]),\n\t\t\t\tpointPosition,\n\t\t\t\ti,\n\t\t\t\ttextWidth,\n\t\t\t\thalfTextWidth,\n\t\t\t\tfurthestRight = this.width,\n\t\t\t\tfurthestRightIndex,\n\t\t\t\tfurthestRightAngle,\n\t\t\t\tfurthestLeft = 0,\n\t\t\t\tfurthestLeftIndex,\n\t\t\t\tfurthestLeftAngle,\n\t\t\t\txProtrusionLeft,\n\t\t\t\txProtrusionRight,\n\t\t\t\tradiusReductionRight,\n\t\t\t\tradiusReductionLeft,\n\t\t\t\tmaxWidthRadius;\n\t\t\tthis.ctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\n\t\t\tfor (i=0;i<this.valuesCount;i++){\n\t\t\t\t// 5px to space the text slightly out - similar to what we do in the draw function.\n\t\t\t\tpointPosition = this.getPointPosition(i, largestPossibleRadius);\n\t\t\t\ttextWidth = this.ctx.measureText(template(this.templateString, { value: this.labels[i] })).width + 5;\n\t\t\t\tif (i === 0 || i === this.valuesCount/2){\n\t\t\t\t\t// If we're at index zero, or exactly the middle, we're at exactly the top/bottom\n\t\t\t\t\t// of the radar chart, so text will be aligned centrally, so we'll half it and compare\n\t\t\t\t\t// w/left and right text sizes\n\t\t\t\t\thalfTextWidth = textWidth/2;\n\t\t\t\t\tif (pointPosition.x + halfTextWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + halfTextWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t\tif (pointPosition.x - halfTextWidth < furthestLeft) {\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - halfTextWidth;\n\t\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (i < this.valuesCount/2) {\n\t\t\t\t\t// Less than half the values means we'll left align the text\n\t\t\t\t\tif (pointPosition.x + textWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + textWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (i > this.valuesCount/2){\n\t\t\t\t\t// More than half the values means we'll right align the text\n\t\t\t\t\tif (pointPosition.x - textWidth < furthestLeft) {\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - textWidth;\n\t\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txProtrusionLeft = furthestLeft;\n\n\t\t\txProtrusionRight = Math.ceil(furthestRight - this.width);\n\n\t\t\tfurthestRightAngle = this.getIndexAngle(furthestRightIndex);\n\n\t\t\tfurthestLeftAngle = this.getIndexAngle(furthestLeftIndex);\n\n\t\t\tradiusReductionRight = xProtrusionRight / Math.sin(furthestRightAngle + Math.PI/2);\n\n\t\t\tradiusReductionLeft = xProtrusionLeft / Math.sin(furthestLeftAngle + Math.PI/2);\n\n\t\t\t// Ensure we actually need to reduce the size of the chart\n\t\t\tradiusReductionRight = (isNumber(radiusReductionRight)) ? radiusReductionRight : 0;\n\t\t\tradiusReductionLeft = (isNumber(radiusReductionLeft)) ? radiusReductionLeft : 0;\n\n\t\t\tthis.drawingArea = largestPossibleRadius - (radiusReductionLeft + radiusReductionRight)/2;\n\n\t\t\t//this.drawingArea = min([maxWidthRadius, (this.height - (2 * (this.pointLabelFontSize + 5)))/2])\n\t\t\tthis.setCenterPoint(radiusReductionLeft, radiusReductionRight);\n\n\t\t},\n\t\tsetCenterPoint: function(leftMovement, rightMovement){\n\n\t\t\tvar maxRight = this.width - rightMovement - this.drawingArea,\n\t\t\t\tmaxLeft = leftMovement + this.drawingArea;\n\n\t\t\tthis.xCenter = (maxLeft + maxRight)/2;\n\t\t\t// Always vertically in the centre as the text height doesn't change\n\t\t\tthis.yCenter = (this.height/2);\n\t\t},\n\n\t\tgetIndexAngle : function(index){\n\t\t\tvar angleMultiplier = (Math.PI * 2) / this.valuesCount;\n\t\t\t// Start from the top instead of right, so remove a quarter of the circle\n\n\t\t\treturn index * angleMultiplier - (Math.PI/2);\n\t\t},\n\t\tgetPointPosition : function(index, distanceFromCenter){\n\t\t\tvar thisAngle = this.getIndexAngle(index);\n\t\t\treturn {\n\t\t\t\tx : (Math.cos(thisAngle) * distanceFromCenter) + this.xCenter,\n\t\t\t\ty : (Math.sin(thisAngle) * distanceFromCenter) + this.yCenter\n\t\t\t};\n\t\t},\n\t\tdraw: function(){\n\t\t\tif (this.display){\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\teach(this.yLabels, function(label, index){\n\t\t\t\t\t// Don't draw a centre value\n\t\t\t\t\tif (index > 0){\n\t\t\t\t\t\tvar yCenterOffset = index * (this.drawingArea/this.steps),\n\t\t\t\t\t\t\tyHeight = this.yCenter - yCenterOffset,\n\t\t\t\t\t\t\tpointPosition;\n\n\t\t\t\t\t\t// Draw circular lines around the scale\n\t\t\t\t\t\tif (this.lineWidth > 0){\n\t\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\n\t\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\n\n\t\t\t\t\t\t\tif(this.lineArc){\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tctx.arc(this.xCenter, this.yCenter, yCenterOffset, 0, Math.PI*2);\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tfor (var i=0;i<this.valuesCount;i++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpointPosition = this.getPointPosition(i, this.calculateCenterOffset(this.min + (index * this.stepValue)));\n\t\t\t\t\t\t\t\t\tif (i === 0){\n\t\t\t\t\t\t\t\t\t\tctx.moveTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this.showLabels){\n\t\t\t\t\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\n\t\t\t\t\t\t\tif (this.showLabelBackdrop){\n\t\t\t\t\t\t\t\tvar labelWidth = ctx.measureText(label).width;\n\t\t\t\t\t\t\t\tctx.fillStyle = this.backdropColor;\n\t\t\t\t\t\t\t\tctx.fillRect(\n\t\t\t\t\t\t\t\t\tthis.xCenter - labelWidth/2 - this.backdropPaddingX,\n\t\t\t\t\t\t\t\t\tyHeight - this.fontSize/2 - this.backdropPaddingY,\n\t\t\t\t\t\t\t\t\tlabelWidth + this.backdropPaddingX*2,\n\t\t\t\t\t\t\t\t\tthis.fontSize + this.backdropPaddingY*2\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\t\t\t\tctx.fillStyle = this.fontColor;\n\t\t\t\t\t\t\tctx.fillText(label, this.xCenter, yHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tif (!this.lineArc){\n\t\t\t\t\tctx.lineWidth = this.angleLineWidth;\n\t\t\t\t\tctx.strokeStyle = this.angleLineColor;\n\t\t\t\t\tfor (var i = this.valuesCount - 1; i >= 0; i--) {\n\t\t\t\t\t\tif (this.angleLineWidth > 0){\n\t\t\t\t\t\t\tvar outerPosition = this.getPointPosition(i, this.calculateCenterOffset(this.max));\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\tctx.moveTo(this.xCenter, this.yCenter);\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Extra 3px out for some label spacing\n\t\t\t\t\t\tvar pointLabelPosition = this.getPointPosition(i, this.calculateCenterOffset(this.max) + 5);\n\t\t\t\t\t\tctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\n\t\t\t\t\t\tctx.fillStyle = this.pointLabelFontColor;\n\n\t\t\t\t\t\tvar labelsCount = this.labels.length,\n\t\t\t\t\t\t\thalfLabelsCount = this.labels.length/2,\n\t\t\t\t\t\t\tquarterLabelsCount = halfLabelsCount/2,\n\t\t\t\t\t\t\tupperHalf = (i < quarterLabelsCount || i > labelsCount - quarterLabelsCount),\n\t\t\t\t\t\t\texactQuarter = (i === quarterLabelsCount || i === labelsCount - quarterLabelsCount);\n\t\t\t\t\t\tif (i === 0){\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t} else if(i === halfLabelsCount){\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t} else if (i < halfLabelsCount){\n\t\t\t\t\t\t\tctx.textAlign = 'left';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textAlign = 'right';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set the correct text baseline based on outer positioning\n\t\t\t\t\t\tif (exactQuarter){\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\t\t} else if (upperHalf){\n\t\t\t\t\t\t\tctx.textBaseline = 'bottom';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tctx.fillText(this.labels[i], pointLabelPosition.x, pointLabelPosition.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// Attach global event to resize each chart instance when the browser resizes\n\thelpers.addEvent(window, \"resize\", (function(){\n\t\t// Basic debounce of resize function so it doesn't hurt performance when resizing browser.\n\t\tvar timeout;\n\t\treturn function(){\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(function(){\n\t\t\t\teach(Chart.instances,function(instance){\n\t\t\t\t\t// If the responsive flag is set in the chart instance config\n\t\t\t\t\t// Cascade the resize event down to the chart.\n\t\t\t\t\tif (instance.options.responsive){\n\t\t\t\t\t\tinstance.resize(instance.render, true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 50);\n\t\t};\n\t})());\n\n\n\tif (amd) {\n\t\tdefine(function(){\n\t\t\treturn Chart;\n\t\t});\n\t} else if (typeof module === 'object' && module.exports) {\n\t\tmodule.exports = Chart;\n\t}\n\n\troot.Chart = Chart;\n\n\tChart.noConflict = function(){\n\t\troot.Chart = previous;\n\t\treturn Chart;\n\t};\n\n}).call(this);\n\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\thelpers = Chart.helpers;\n\n\n\tvar defaultConfig = {\n\t\t//Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\n\t\tscaleBeginAtZero : true,\n\n\t\t//Boolean - Whether grid lines are shown across the chart\n\t\tscaleShowGridLines : true,\n\n\t\t//String - Colour of the grid lines\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\n\n\t\t//Number - Width of the grid lines\n\t\tscaleGridLineWidth : 1,\n\n\t\t//Boolean - If there is a stroke on each bar\n\t\tbarShowStroke : true,\n\n\t\t//Number - Pixel width of the bar stroke\n\t\tbarStrokeWidth : 2,\n\n\t\t//Number - Spacing between each of the X value sets\n\t\tbarValueSpacing : 5,\n\n\t\t//Number - Spacing between data sets within X values\n\t\tbarDatasetSpacing : 1,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].fillColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>\"\n\n\t};\n\n\n\tChart.Type.extend({\n\t\tname: \"Bar\",\n\t\tdefaults : defaultConfig,\n\t\tinitialize:  function(data){\n\n\t\t\t//Expose options as a scope variable here so we can access it in the ScaleClass\n\t\t\tvar options = this.options;\n\n\t\t\tthis.ScaleClass = Chart.Scale.extend({\n\t\t\t\toffsetGridLines : true,\n\t\t\t\tcalculateBarX : function(datasetCount, datasetIndex, barIndex){\n\t\t\t\t\t//Reusable method for calculating the xPosition of a given bar based on datasetIndex & width of the bar\n\t\t\t\t\tvar xWidth = this.calculateBaseWidth(),\n\t\t\t\t\t\txAbsolute = this.calculateX(barIndex) - (xWidth/2),\n\t\t\t\t\t\tbarWidth = this.calculateBarWidth(datasetCount);\n\n\t\t\t\t\treturn xAbsolute + (barWidth * datasetIndex) + (datasetIndex * options.barDatasetSpacing) + barWidth/2;\n\t\t\t\t},\n\t\t\t\tcalculateBaseWidth : function(){\n\t\t\t\t\treturn (this.calculateX(1) - this.calculateX(0)) - (2*options.barValueSpacing);\n\t\t\t\t},\n\t\t\t\tcalculateBarWidth : function(datasetCount){\n\t\t\t\t\t//The padding between datasets is to the right of each bar, providing that there are more than 1 dataset\n\t\t\t\t\tvar baseWidth = this.calculateBaseWidth() - ((datasetCount - 1) * options.barDatasetSpacing);\n\n\t\t\t\t\treturn (baseWidth / datasetCount);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.datasets = [];\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activeBars = (evt.type !== 'mouseout') ? this.getBarsAtEvent(evt) : [];\n\n\t\t\t\t\tthis.eachBars(function(bar){\n\t\t\t\t\t\tbar.restore(['fillColor', 'strokeColor']);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activeBars, function(activeBar){\n\t\t\t\t\t\tactiveBar.fillColor = activeBar.highlightFill;\n\t\t\t\t\t\tactiveBar.strokeColor = activeBar.highlightStroke;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activeBars);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\n\t\t\tthis.BarClass = Chart.Rectangle.extend({\n\t\t\t\tstrokeWidth : this.options.barStrokeWidth,\n\t\t\t\tshowStroke : this.options.barShowStroke,\n\t\t\t\tctx : this.chart.ctx\n\t\t\t});\n\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\n\t\t\thelpers.each(data.datasets,function(dataset,datasetIndex){\n\n\t\t\t\tvar datasetObject = {\n\t\t\t\t\tlabel : dataset.label || null,\n\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\tbars : []\n\t\t\t\t};\n\n\t\t\t\tthis.datasets.push(datasetObject);\n\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\t\tdatasetObject.bars.push(new this.BarClass({\n\t\t\t\t\t\tvalue : dataPoint,\n\t\t\t\t\t\tlabel : data.labels[index],\n\t\t\t\t\t\tdatasetLabel: dataset.label,\n\t\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\t\thighlightFill : dataset.highlightFill || dataset.fillColor,\n\t\t\t\t\t\thighlightStroke : dataset.highlightStroke || dataset.strokeColor\n\t\t\t\t\t}));\n\t\t\t\t},this);\n\n\t\t\t},this);\n\n\t\t\tthis.buildScale(data.labels);\n\n\t\t\tthis.BarClass.prototype.base = this.scale.endPoint;\n\n\t\t\tthis.eachBars(function(bar, index, datasetIndex){\n\t\t\t\thelpers.extend(bar, {\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\n\t\t\t\t\ty: this.scale.endPoint\n\t\t\t\t});\n\t\t\t\tbar.save();\n\t\t\t}, this);\n\n\t\t\tthis.render();\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.scale.update();\n\t\t\t// Reset any highlight colours before updating.\n\t\t\thelpers.each(this.activeElements, function(activeElement){\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\n\t\t\t});\n\n\t\t\tthis.eachBars(function(bar){\n\t\t\t\tbar.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\t\teachBars : function(callback){\n\t\t\thelpers.each(this.datasets,function(dataset, datasetIndex){\n\t\t\t\thelpers.each(dataset.bars, callback, this, datasetIndex);\n\t\t\t},this);\n\t\t},\n\t\tgetBarsAtEvent : function(e){\n\t\t\tvar barsArray = [],\n\t\t\t\teventPosition = helpers.getRelativePosition(e),\n\t\t\t\tdatasetIterator = function(dataset){\n\t\t\t\t\tbarsArray.push(dataset.bars[barIndex]);\n\t\t\t\t},\n\t\t\t\tbarIndex;\n\n\t\t\tfor (var datasetIndex = 0; datasetIndex < this.datasets.length; datasetIndex++) {\n\t\t\t\tfor (barIndex = 0; barIndex < this.datasets[datasetIndex].bars.length; barIndex++) {\n\t\t\t\t\tif (this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){\n\t\t\t\t\t\thelpers.each(this.datasets, datasetIterator);\n\t\t\t\t\t\treturn barsArray;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn barsArray;\n\t\t},\n\t\tbuildScale : function(labels){\n\t\t\tvar self = this;\n\n\t\t\tvar dataTotal = function(){\n\t\t\t\tvar values = [];\n\t\t\t\tself.eachBars(function(bar){\n\t\t\t\t\tvalues.push(bar.value);\n\t\t\t\t});\n\t\t\t\treturn values;\n\t\t\t};\n\n\t\t\tvar scaleOptions = {\n\t\t\t\ttemplateString : this.options.scaleLabel,\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttextColor : this.options.scaleFontColor,\n\t\t\t\tfontSize : this.options.scaleFontSize,\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\n\t\t\t\tvaluesCount : labels.length,\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\n\t\t\t\tcalculateYRange: function(currentHeight){\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\n\t\t\t\t\t\tdataTotal(),\n\t\t\t\t\t\tcurrentHeight,\n\t\t\t\t\t\tthis.fontSize,\n\t\t\t\t\t\tthis.beginAtZero,\n\t\t\t\t\t\tthis.integersOnly\n\t\t\t\t\t);\n\t\t\t\t\thelpers.extend(this, updatedRanges);\n\t\t\t\t},\n\t\t\t\txLabels : labels,\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\n\t\t\t\tlineColor : this.options.scaleLineColor,\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\n\t\t\t\tpadding : (this.options.showScale) ? 0 : (this.options.barShowStroke) ? this.options.barStrokeWidth : 0,\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\n\t\t\t\tdisplay : this.options.showScale\n\t\t\t};\n\n\t\t\tif (this.options.scaleOverride){\n\t\t\t\thelpers.extend(scaleOptions, {\n\t\t\t\t\tcalculateYRange: helpers.noop,\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.scale = new this.ScaleClass(scaleOptions);\n\t\t},\n\t\taddData : function(valuesArray,label){\n\t\t\t//Map the values array for each of the datasets\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\tthis.datasets[datasetIndex].bars.push(new this.BarClass({\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tlabel : label,\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, this.scale.valuesCount+1),\n\t\t\t\t\ty: this.scale.endPoint,\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\n\t\t\t\t\tbase : this.scale.endPoint,\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].strokeColor,\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].fillColor\n\t\t\t\t}));\n\t\t\t},this);\n\n\t\t\tthis.scale.addXLabel(label);\n\t\t\t//Then re-render the chart.\n\t\t\tthis.update();\n\t\t},\n\t\tremoveData : function(){\n\t\t\tthis.scale.removeXLabel();\n\t\t\t//Then re-render the chart.\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tdataset.bars.shift();\n\t\t\t},this);\n\t\t\tthis.update();\n\t\t},\n\t\treflow : function(){\n\t\t\thelpers.extend(this.BarClass.prototype,{\n\t\t\t\ty: this.scale.endPoint,\n\t\t\t\tbase : this.scale.endPoint\n\t\t\t});\n\t\t\tvar newScaleProps = helpers.extend({\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width\n\t\t\t});\n\t\t\tthis.scale.update(newScaleProps);\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tthis.clear();\n\n\t\t\tvar ctx = this.chart.ctx;\n\n\t\t\tthis.scale.draw(easingDecimal);\n\n\t\t\t//Draw all the bars for each dataset\n\t\t\thelpers.each(this.datasets,function(dataset,datasetIndex){\n\t\t\t\thelpers.each(dataset.bars,function(bar,index){\n\t\t\t\t\tif (bar.hasValue()){\n\t\t\t\t\t\tbar.base = this.scale.endPoint;\n\t\t\t\t\t\t//Transition then draw\n\t\t\t\t\t\tbar.transition({\n\t\t\t\t\t\t\tx : this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\n\t\t\t\t\t\t\ty : this.scale.calculateY(bar.value),\n\t\t\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length)\n\t\t\t\t\t\t}, easingDecimal).draw();\n\t\t\t\t\t}\n\t\t\t\t},this);\n\n\t\t\t},this);\n\t\t}\n\t});\n\n\n}).call(this);\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\t//Cache a local reference to Chart.helpers\n\t\thelpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\t//Boolean - Whether we should show a stroke on each segment\n\t\tsegmentShowStroke : true,\n\n\t\t//String - The colour of each segment stroke\n\t\tsegmentStrokeColor : \"#fff\",\n\n\t\t//Number - The width of each segment stroke\n\t\tsegmentStrokeWidth : 2,\n\n\t\t//The percentage of the chart that we cut out of the middle.\n\t\tpercentageInnerCutout : 50,\n\n\t\t//Number - Amount of animation steps\n\t\tanimationSteps : 100,\n\n\t\t//String - Animation easing effect\n\t\tanimationEasing : \"easeOutBounce\",\n\n\t\t//Boolean - Whether we animate the rotation of the Doughnut\n\t\tanimateRotate : true,\n\n\t\t//Boolean - Whether we animate scaling the Doughnut from the centre\n\t\tanimateScale : false,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>\"\n\n\t};\n\n\n\tChart.Type.extend({\n\t\t//Passing in a name registers this chart in the Chart namespace\n\t\tname: \"Doughnut\",\n\t\t//Providing a defaults will also register the deafults in the chart namespace\n\t\tdefaults : defaultConfig,\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\n\t\tinitialize:  function(data){\n\n\t\t\t//Declare segments as a static property to prevent inheriting across the Chart type prototype\n\t\t\tthis.segments = [];\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\n\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\n\n\t\t\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activeSegments);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.calculateTotal(data);\n\n\t\t\thelpers.each(data,function(datapoint, index){\n\t\t\t\tthis.addData(datapoint, index, true);\n\t\t\t},this);\n\n\t\t\tthis.render();\n\t\t},\n\t\tgetSegmentsAtEvent : function(e){\n\t\t\tvar segmentsArray = [];\n\n\t\t\tvar location = helpers.getRelativePosition(e);\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\n\t\t\t},this);\n\t\t\treturn segmentsArray;\n\t\t},\n\t\taddData : function(segment, atIndex, silent){\n\t\t\tvar index = atIndex || this.segments.length;\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\n\t\t\t\tvalue : segment.value,\n\t\t\t\touterRadius : (this.options.animateScale) ? 0 : this.outerRadius,\n\t\t\t\tinnerRadius : (this.options.animateScale) ? 0 : (this.outerRadius/100) * this.options.percentageInnerCutout,\n\t\t\t\tfillColor : segment.color,\n\t\t\t\thighlightColor : segment.highlight || segment.color,\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\n\t\t\t\tstartAngle : Math.PI * 1.5,\n\t\t\t\tcircumference : (this.options.animateRotate) ? 0 : this.calculateCircumference(segment.value),\n\t\t\t\tlabel : segment.label\n\t\t\t}));\n\t\t\tif (!silent){\n\t\t\t\tthis.reflow();\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t},\n\t\tcalculateCircumference : function(value){\n\t\t\treturn (Math.PI*2)*(value / this.total);\n\t\t},\n\t\tcalculateTotal : function(data){\n\t\t\tthis.total = 0;\n\t\t\thelpers.each(data,function(segment){\n\t\t\t\tthis.total += segment.value;\n\t\t\t},this);\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.calculateTotal(this.segments);\n\n\t\t\t// Reset any highlight colours before updating.\n\t\t\thelpers.each(this.activeElements, function(activeElement){\n\t\t\t\tactiveElement.restore(['fillColor']);\n\t\t\t});\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tsegment.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\n\t\tremoveData: function(atIndex){\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\n\t\t\tthis.segments.splice(indexToDelete, 1);\n\t\t\tthis.reflow();\n\t\t\tthis.update();\n\t\t},\n\n\t\treflow : function(){\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\n\t\t\thelpers.each(this.segments, function(segment){\n\t\t\t\tsegment.update({\n\t\t\t\t\touterRadius : this.outerRadius,\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\n\t\t\t\t});\n\t\t\t}, this);\n\t\t},\n\t\tdraw : function(easeDecimal){\n\t\t\tvar animDecimal = (easeDecimal) ? easeDecimal : 1;\n\t\t\tthis.clear();\n\t\t\thelpers.each(this.segments,function(segment,index){\n\t\t\t\tsegment.transition({\n\t\t\t\t\tcircumference : this.calculateCircumference(segment.value),\n\t\t\t\t\touterRadius : this.outerRadius,\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\n\t\t\t\t},animDecimal);\n\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\n\n\t\t\t\tsegment.draw();\n\t\t\t\tif (index === 0){\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\n\t\t\t\t}\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\n\t\t\t\tif (index < this.segments.length-1){\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\n\t\t\t\t}\n\t\t\t},this);\n\n\t\t}\n\t});\n\n\tChart.types.Doughnut.extend({\n\t\tname : \"Pie\",\n\t\tdefaults : helpers.merge(defaultConfig,{percentageInnerCutout : 0})\n\t});\n\n}).call(this);\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\thelpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\n\t\t///Boolean - Whether grid lines are shown across the chart\n\t\tscaleShowGridLines : true,\n\n\t\t//String - Colour of the grid lines\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\n\n\t\t//Number - Width of the grid lines\n\t\tscaleGridLineWidth : 1,\n\n\t\t//Boolean - Whether the line is curved between points\n\t\tbezierCurve : true,\n\n\t\t//Number - Tension of the bezier curve between points\n\t\tbezierCurveTension : 0.4,\n\n\t\t//Boolean - Whether to show a dot for each point\n\t\tpointDot : true,\n\n\t\t//Number - Radius of each point dot in pixels\n\t\tpointDotRadius : 4,\n\n\t\t//Number - Pixel width of point dot stroke\n\t\tpointDotStrokeWidth : 1,\n\n\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\n\t\tpointHitDetectionRadius : 20,\n\n\t\t//Boolean - Whether to show a stroke for datasets\n\t\tdatasetStroke : true,\n\n\t\t//Number - Pixel width of dataset stroke\n\t\tdatasetStrokeWidth : 2,\n\n\t\t//Boolean - Whether to fill the dataset with a colour\n\t\tdatasetFill : true,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>\"\n\n\t};\n\n\n\tChart.Type.extend({\n\t\tname: \"Line\",\n\t\tdefaults : defaultConfig,\n\t\tinitialize:  function(data){\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\n\t\t\tthis.PointClass = Chart.Point.extend({\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\n\t\t\t\tradius : this.options.pointDotRadius,\n\t\t\t\tdisplay: this.options.pointDot,\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\tinRange : function(mouseX){\n\t\t\t\t\treturn (Math.pow(mouseX-this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius,2));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.datasets = [];\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activePoints = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\n\t\t\t\t\tthis.eachPoints(function(point){\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activePoints, function(activePoint){\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activePoints);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\n\t\t\thelpers.each(data.datasets,function(dataset){\n\n\t\t\t\tvar datasetObject = {\n\t\t\t\t\tlabel : dataset.label || null,\n\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\tpointColor : dataset.pointColor,\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\tpoints : []\n\t\t\t\t};\n\n\t\t\t\tthis.datasets.push(datasetObject);\n\n\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\n\t\t\t\t\t\tvalue : dataPoint,\n\t\t\t\t\t\tlabel : data.labels[index],\n\t\t\t\t\t\tdatasetLabel: dataset.label,\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\t\tfillColor : dataset.pointColor,\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\n\t\t\t\t\t}));\n\t\t\t\t},this);\n\n\t\t\t\tthis.buildScale(data.labels);\n\n\n\t\t\t\tthis.eachPoints(function(point, index){\n\t\t\t\t\thelpers.extend(point, {\n\t\t\t\t\t\tx: this.scale.calculateX(index),\n\t\t\t\t\t\ty: this.scale.endPoint\n\t\t\t\t\t});\n\t\t\t\t\tpoint.save();\n\t\t\t\t}, this);\n\n\t\t\t},this);\n\n\n\t\t\tthis.render();\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.scale.update();\n\t\t\t// Reset any highlight colours before updating.\n\t\t\thelpers.each(this.activeElements, function(activeElement){\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\n\t\t\t});\n\t\t\tthis.eachPoints(function(point){\n\t\t\t\tpoint.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\t\teachPoints : function(callback){\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\thelpers.each(dataset.points,callback,this);\n\t\t\t},this);\n\t\t},\n\t\tgetPointsAtEvent : function(e){\n\t\t\tvar pointsArray = [],\n\t\t\t\teventPosition = helpers.getRelativePosition(e);\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\thelpers.each(dataset.points,function(point){\n\t\t\t\t\tif (point.inRange(eventPosition.x,eventPosition.y)) pointsArray.push(point);\n\t\t\t\t});\n\t\t\t},this);\n\t\t\treturn pointsArray;\n\t\t},\n\t\tbuildScale : function(labels){\n\t\t\tvar self = this;\n\n\t\t\tvar dataTotal = function(){\n\t\t\t\tvar values = [];\n\t\t\t\tself.eachPoints(function(point){\n\t\t\t\t\tvalues.push(point.value);\n\t\t\t\t});\n\n\t\t\t\treturn values;\n\t\t\t};\n\n\t\t\tvar scaleOptions = {\n\t\t\t\ttemplateString : this.options.scaleLabel,\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttextColor : this.options.scaleFontColor,\n\t\t\t\tfontSize : this.options.scaleFontSize,\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\n\t\t\t\tvaluesCount : labels.length,\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\n\t\t\t\tcalculateYRange : function(currentHeight){\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\n\t\t\t\t\t\tdataTotal(),\n\t\t\t\t\t\tcurrentHeight,\n\t\t\t\t\t\tthis.fontSize,\n\t\t\t\t\t\tthis.beginAtZero,\n\t\t\t\t\t\tthis.integersOnly\n\t\t\t\t\t);\n\t\t\t\t\thelpers.extend(this, updatedRanges);\n\t\t\t\t},\n\t\t\t\txLabels : labels,\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\n\t\t\t\tlineColor : this.options.scaleLineColor,\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\n\t\t\t\tpadding: (this.options.showScale) ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth,\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\n\t\t\t\tdisplay : this.options.showScale\n\t\t\t};\n\n\t\t\tif (this.options.scaleOverride){\n\t\t\t\thelpers.extend(scaleOptions, {\n\t\t\t\t\tcalculateYRange: helpers.noop,\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tthis.scale = new Chart.Scale(scaleOptions);\n\t\t},\n\t\taddData : function(valuesArray,label){\n\t\t\t//Map the values array for each of the datasets\n\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tlabel : label,\n\t\t\t\t\tx: this.scale.calculateX(this.scale.valuesCount+1),\n\t\t\t\t\ty: this.scale.endPoint,\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\n\t\t\t\t}));\n\t\t\t},this);\n\n\t\t\tthis.scale.addXLabel(label);\n\t\t\t//Then re-render the chart.\n\t\t\tthis.update();\n\t\t},\n\t\tremoveData : function(){\n\t\t\tthis.scale.removeXLabel();\n\t\t\t//Then re-render the chart.\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tdataset.points.shift();\n\t\t\t},this);\n\t\t\tthis.update();\n\t\t},\n\t\treflow : function(){\n\t\t\tvar newScaleProps = helpers.extend({\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth : this.chart.width\n\t\t\t});\n\t\t\tthis.scale.update(newScaleProps);\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tthis.clear();\n\n\t\t\tvar ctx = this.chart.ctx;\n\n\t\t\t// Some helper methods for getting the next/prev points\n\t\t\tvar hasValue = function(item){\n\t\t\t\treturn item.value !== null;\n\t\t\t},\n\t\t\tnextPoint = function(point, collection, index){\n\t\t\t\treturn helpers.findNextWhere(collection, hasValue, index) || point;\n\t\t\t},\n\t\t\tpreviousPoint = function(point, collection, index){\n\t\t\t\treturn helpers.findPreviousWhere(collection, hasValue, index) || point;\n\t\t\t};\n\n\t\t\tthis.scale.draw(easingDecimal);\n\n\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tvar pointsWithValues = helpers.where(dataset.points, hasValue);\n\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\n\t\t\t\t//We can use this extra loop to calculate the control points of this dataset also in this loop\n\n\t\t\t\thelpers.each(dataset.points, function(point, index){\n\t\t\t\t\tif (point.hasValue()){\n\t\t\t\t\t\tpoint.transition({\n\t\t\t\t\t\t\ty : this.scale.calculateY(point.value),\n\t\t\t\t\t\t\tx : this.scale.calculateX(index)\n\t\t\t\t\t\t}, easingDecimal);\n\t\t\t\t\t}\n\t\t\t\t},this);\n\n\n\t\t\t\t// Control points need to be calculated in a seperate loop, because we need to know the current x/y of the point\n\t\t\t\t// This would cause issues when there is no animation, because the y of the next point would be 0, so beziers would be skewed\n\t\t\t\tif (this.options.bezierCurve){\n\t\t\t\t\thelpers.each(pointsWithValues, function(point, index){\n\t\t\t\t\t\tvar tension = (index > 0 && index < pointsWithValues.length - 1) ? this.options.bezierCurveTension : 0;\n\t\t\t\t\t\tpoint.controlPoints = helpers.splineCurve(\n\t\t\t\t\t\t\tpreviousPoint(point, pointsWithValues, index),\n\t\t\t\t\t\t\tpoint,\n\t\t\t\t\t\t\tnextPoint(point, pointsWithValues, index),\n\t\t\t\t\t\t\ttension\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Prevent the bezier going outside of the bounds of the graph\n\n\t\t\t\t\t\t// Cap puter bezier handles to the upper/lower scale bounds\n\t\t\t\t\t\tif (point.controlPoints.outer.y > this.scale.endPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.endPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (point.controlPoints.outer.y < this.scale.startPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.startPoint;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Cap inner bezier handles to the upper/lower scale bounds\n\t\t\t\t\t\tif (point.controlPoints.inner.y > this.scale.endPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.endPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (point.controlPoints.inner.y < this.scale.startPoint){\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.startPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t},this);\n\t\t\t\t}\n\n\n\t\t\t\t//Draw the line between all the points\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\n\t\t\t\tctx.beginPath();\n\n\t\t\t\thelpers.each(pointsWithValues, function(point, index){\n\t\t\t\t\tif (index === 0){\n\t\t\t\t\t\tctx.moveTo(point.x, point.y);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(this.options.bezierCurve){\n\t\t\t\t\t\t\tvar previous = previousPoint(point, pointsWithValues, index);\n\n\t\t\t\t\t\t\tctx.bezierCurveTo(\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.x,\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.y,\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.x,\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.y,\n\t\t\t\t\t\t\t\tpoint.x,\n\t\t\t\t\t\t\t\tpoint.y\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tctx.lineTo(point.x,point.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tctx.stroke();\n\n\t\t\t\tif (this.options.datasetFill && pointsWithValues.length > 0){\n\t\t\t\t\t//Round off the line by going to the base of the chart, back to the start, then fill.\n\t\t\t\t\tctx.lineTo(pointsWithValues[pointsWithValues.length - 1].x, this.scale.endPoint);\n\t\t\t\t\tctx.lineTo(pointsWithValues[0].x, this.scale.endPoint);\n\t\t\t\t\tctx.fillStyle = dataset.fillColor;\n\t\t\t\t\tctx.closePath();\n\t\t\t\t\tctx.fill();\n\t\t\t\t}\n\n\t\t\t\t//Now draw the points over the line\n\t\t\t\t//A little inefficient double looping, but better than the line\n\t\t\t\t//lagging behind the point positions\n\t\t\t\thelpers.each(pointsWithValues,function(point){\n\t\t\t\t\tpoint.draw();\n\t\t\t\t});\n\t\t\t},this);\n\t\t}\n\t});\n\n\n}).call(this);\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\t//Cache a local reference to Chart.helpers\n\t\thelpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\t//Boolean - Show a backdrop to the scale label\n\t\tscaleShowLabelBackdrop : true,\n\n\t\t//String - The colour of the label backdrop\n\t\tscaleBackdropColor : \"rgba(255,255,255,0.75)\",\n\n\t\t// Boolean - Whether the scale should begin at zero\n\t\tscaleBeginAtZero : true,\n\n\t\t//Number - The backdrop padding above & below the label in pixels\n\t\tscaleBackdropPaddingY : 2,\n\n\t\t//Number - The backdrop padding to the side of the label in pixels\n\t\tscaleBackdropPaddingX : 2,\n\n\t\t//Boolean - Show line for each value in the scale\n\t\tscaleShowLine : true,\n\n\t\t//Boolean - Stroke a line around each segment in the chart\n\t\tsegmentShowStroke : true,\n\n\t\t//String - The colour of the stroke on each segement.\n\t\tsegmentStrokeColor : \"#fff\",\n\n\t\t//Number - The width of the stroke value in pixels\n\t\tsegmentStrokeWidth : 2,\n\n\t\t//Number - Amount of animation steps\n\t\tanimationSteps : 100,\n\n\t\t//String - Animation easing effect.\n\t\tanimationEasing : \"easeOutBounce\",\n\n\t\t//Boolean - Whether to animate the rotation of the chart\n\t\tanimateRotate : true,\n\n\t\t//Boolean - Whether to animate scaling the chart from the centre\n\t\tanimateScale : false,\n\n\t\t//String - A legend template\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>\"\n\t};\n\n\n\tChart.Type.extend({\n\t\t//Passing in a name registers this chart in the Chart namespace\n\t\tname: \"PolarArea\",\n\t\t//Providing a defaults will also register the deafults in the chart namespace\n\t\tdefaults : defaultConfig,\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\n\t\tinitialize:  function(data){\n\t\t\tthis.segments = [];\n\t\t\t//Declare segment class as a chart instance specific class, so it can share props for this instance\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\tinnerRadius : 0,\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\t\t\tthis.scale = new Chart.RadialScale({\n\t\t\t\tdisplay: this.options.showScale,\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\n\t\t\t\tfontSize: this.options.scaleFontSize,\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\n\t\t\t\tfontColor: this.options.scaleFontColor,\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\n\t\t\t\tlineColor: this.options.scaleLineColor,\n\t\t\t\tlineArc: true,\n\t\t\t\twidth: this.chart.width,\n\t\t\t\theight: this.chart.height,\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttemplateString: this.options.scaleLabel,\n\t\t\t\tvaluesCount: data.length\n\t\t\t});\n\n\t\t\tthis.updateScaleRange(data);\n\n\t\t\tthis.scale.update();\n\n\t\t\thelpers.each(data,function(segment,index){\n\t\t\t\tthis.addData(segment,index,true);\n\t\t\t},this);\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\n\t\t\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\n\t\t\t\t\t});\n\t\t\t\t\tthis.showTooltip(activeSegments);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.render();\n\t\t},\n\t\tgetSegmentsAtEvent : function(e){\n\t\t\tvar segmentsArray = [];\n\n\t\t\tvar location = helpers.getRelativePosition(e);\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\n\t\t\t},this);\n\t\t\treturn segmentsArray;\n\t\t},\n\t\taddData : function(segment, atIndex, silent){\n\t\t\tvar index = atIndex || this.segments.length;\n\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\n\t\t\t\tfillColor: segment.color,\n\t\t\t\thighlightColor: segment.highlight || segment.color,\n\t\t\t\tlabel: segment.label,\n\t\t\t\tvalue: segment.value,\n\t\t\t\touterRadius: (this.options.animateScale) ? 0 : this.scale.calculateCenterOffset(segment.value),\n\t\t\t\tcircumference: (this.options.animateRotate) ? 0 : this.scale.getCircumference(),\n\t\t\t\tstartAngle: Math.PI * 1.5\n\t\t\t}));\n\t\t\tif (!silent){\n\t\t\t\tthis.reflow();\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t},\n\t\tremoveData: function(atIndex){\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\n\t\t\tthis.segments.splice(indexToDelete, 1);\n\t\t\tthis.reflow();\n\t\t\tthis.update();\n\t\t},\n\t\tcalculateTotal: function(data){\n\t\t\tthis.total = 0;\n\t\t\thelpers.each(data,function(segment){\n\t\t\t\tthis.total += segment.value;\n\t\t\t},this);\n\t\t\tthis.scale.valuesCount = this.segments.length;\n\t\t},\n\t\tupdateScaleRange: function(datapoints){\n\t\t\tvar valuesArray = [];\n\t\t\thelpers.each(datapoints,function(segment){\n\t\t\t\tvaluesArray.push(segment.value);\n\t\t\t});\n\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\n\t\t\t\t{\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t} :\n\t\t\t\thelpers.calculateScaleRange(\n\t\t\t\t\tvaluesArray,\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\n\t\t\t\t\tthis.options.scaleFontSize,\n\t\t\t\t\tthis.options.scaleBeginAtZero,\n\t\t\t\t\tthis.options.scaleIntegersOnly\n\t\t\t\t);\n\n\t\t\thelpers.extend(\n\t\t\t\tthis.scale,\n\t\t\t\tscaleSizes,\n\t\t\t\t{\n\t\t\t\t\tsize: helpers.min([this.chart.width, this.chart.height]),\n\t\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\t\tyCenter: this.chart.height/2\n\t\t\t\t}\n\t\t\t);\n\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.calculateTotal(this.segments);\n\n\t\t\thelpers.each(this.segments,function(segment){\n\t\t\t\tsegment.save();\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\t\treflow : function(){\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\n\t\t\t\tx : this.chart.width/2,\n\t\t\t\ty : this.chart.height/2\n\t\t\t});\n\t\t\tthis.updateScaleRange(this.segments);\n\t\t\tthis.scale.update();\n\n\t\t\thelpers.extend(this.scale,{\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2\n\t\t\t});\n\n\t\t\thelpers.each(this.segments, function(segment){\n\t\t\t\tsegment.update({\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\n\t\t\t\t});\n\t\t\t}, this);\n\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\t//Clear & draw the canvas\n\t\t\tthis.clear();\n\t\t\thelpers.each(this.segments,function(segment, index){\n\t\t\t\tsegment.transition({\n\t\t\t\t\tcircumference : this.scale.getCircumference(),\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\n\t\t\t\t},easingDecimal);\n\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\n\n\t\t\t\t// If we've removed the first segment we need to set the first one to\n\t\t\t\t// start at the top.\n\t\t\t\tif (index === 0){\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\n\t\t\t\t}\n\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\n\t\t\t\tif (index < this.segments.length - 1){\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\n\t\t\t\t}\n\t\t\t\tsegment.draw();\n\t\t\t}, this);\n\t\t\tthis.scale.draw();\n\t\t}\n\t});\n\n}).call(this);\n(function(){\n\t\"use strict\";\n\n\tvar root = this,\n\t\tChart = root.Chart,\n\t\thelpers = Chart.helpers;\n\n\n\n\tChart.Type.extend({\n\t\tname: \"Radar\",\n\t\tdefaults:{\n\t\t\t//Boolean - Whether to show lines for each scale point\n\t\t\tscaleShowLine : true,\n\n\t\t\t//Boolean - Whether we show the angle lines out of the radar\n\t\t\tangleShowLineOut : true,\n\n\t\t\t//Boolean - Whether to show labels on the scale\n\t\t\tscaleShowLabels : false,\n\n\t\t\t// Boolean - Whether the scale should begin at zero\n\t\t\tscaleBeginAtZero : true,\n\n\t\t\t//String - Colour of the angle line\n\t\t\tangleLineColor : \"rgba(0,0,0,.1)\",\n\n\t\t\t//Number - Pixel width of the angle line\n\t\t\tangleLineWidth : 1,\n\n\t\t\t//String - Point label font declaration\n\t\t\tpointLabelFontFamily : \"'Arial'\",\n\n\t\t\t//String - Point label font weight\n\t\t\tpointLabelFontStyle : \"normal\",\n\n\t\t\t//Number - Point label font size in pixels\n\t\t\tpointLabelFontSize : 10,\n\n\t\t\t//String - Point label font colour\n\t\t\tpointLabelFontColor : \"#666\",\n\n\t\t\t//Boolean - Whether to show a dot for each point\n\t\t\tpointDot : true,\n\n\t\t\t//Number - Radius of each point dot in pixels\n\t\t\tpointDotRadius : 3,\n\n\t\t\t//Number - Pixel width of point dot stroke\n\t\t\tpointDotStrokeWidth : 1,\n\n\t\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\n\t\t\tpointHitDetectionRadius : 20,\n\n\t\t\t//Boolean - Whether to show a stroke for datasets\n\t\t\tdatasetStroke : true,\n\n\t\t\t//Number - Pixel width of dataset stroke\n\t\t\tdatasetStrokeWidth : 2,\n\n\t\t\t//Boolean - Whether to fill the dataset with a colour\n\t\t\tdatasetFill : true,\n\n\t\t\t//String - A legend template\n\t\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>\"\n\n\t\t},\n\n\t\tinitialize: function(data){\n\t\t\tthis.PointClass = Chart.Point.extend({\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\n\t\t\t\tradius : this.options.pointDotRadius,\n\t\t\t\tdisplay: this.options.pointDot,\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\n\t\t\t\tctx : this.chart.ctx\n\t\t\t});\n\n\t\t\tthis.datasets = [];\n\n\t\t\tthis.buildScale(data);\n\n\t\t\t//Set up tooltip events on the chart\n\t\t\tif (this.options.showTooltips){\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\n\t\t\t\t\tvar activePointsCollection = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\n\n\t\t\t\t\tthis.eachPoints(function(point){\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\n\t\t\t\t\t});\n\t\t\t\t\thelpers.each(activePointsCollection, function(activePoint){\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.showTooltip(activePointsCollection);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\n\t\t\thelpers.each(data.datasets,function(dataset){\n\n\t\t\t\tvar datasetObject = {\n\t\t\t\t\tlabel: dataset.label || null,\n\t\t\t\t\tfillColor : dataset.fillColor,\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\n\t\t\t\t\tpointColor : dataset.pointColor,\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\tpoints : []\n\t\t\t\t};\n\n\t\t\t\tthis.datasets.push(datasetObject);\n\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\n\t\t\t\t\tvar pointPosition;\n\t\t\t\t\tif (!this.scale.animation){\n\t\t\t\t\t\tpointPosition = this.scale.getPointPosition(index, this.scale.calculateCenterOffset(dataPoint));\n\t\t\t\t\t}\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\n\t\t\t\t\t\tvalue : dataPoint,\n\t\t\t\t\t\tlabel : data.labels[index],\n\t\t\t\t\t\tdatasetLabel: dataset.label,\n\t\t\t\t\t\tx: (this.options.animation) ? this.scale.xCenter : pointPosition.x,\n\t\t\t\t\t\ty: (this.options.animation) ? this.scale.yCenter : pointPosition.y,\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\n\t\t\t\t\t\tfillColor : dataset.pointColor,\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\n\t\t\t\t\t}));\n\t\t\t\t},this);\n\n\t\t\t},this);\n\n\t\t\tthis.render();\n\t\t},\n\t\teachPoints : function(callback){\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\thelpers.each(dataset.points,callback,this);\n\t\t\t},this);\n\t\t},\n\n\t\tgetPointsAtEvent : function(evt){\n\t\t\tvar mousePosition = helpers.getRelativePosition(evt),\n\t\t\t\tfromCenter = helpers.getAngleFromPoint({\n\t\t\t\t\tx: this.scale.xCenter,\n\t\t\t\t\ty: this.scale.yCenter\n\t\t\t\t}, mousePosition);\n\n\t\t\tvar anglePerIndex = (Math.PI * 2) /this.scale.valuesCount,\n\t\t\t\tpointIndex = Math.round((fromCenter.angle - Math.PI * 1.5) / anglePerIndex),\n\t\t\t\tactivePointsCollection = [];\n\n\t\t\t// If we're at the top, make the pointIndex 0 to get the first of the array.\n\t\t\tif (pointIndex >= this.scale.valuesCount || pointIndex < 0){\n\t\t\t\tpointIndex = 0;\n\t\t\t}\n\n\t\t\tif (fromCenter.distance <= this.scale.drawingArea){\n\t\t\t\thelpers.each(this.datasets, function(dataset){\n\t\t\t\t\tactivePointsCollection.push(dataset.points[pointIndex]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn activePointsCollection;\n\t\t},\n\n\t\tbuildScale : function(data){\n\t\t\tthis.scale = new Chart.RadialScale({\n\t\t\t\tdisplay: this.options.showScale,\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\n\t\t\t\tfontSize: this.options.scaleFontSize,\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\n\t\t\t\tfontColor: this.options.scaleFontColor,\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\n\t\t\t\tlineColor: this.options.scaleLineColor,\n\t\t\t\tangleLineColor : this.options.angleLineColor,\n\t\t\t\tangleLineWidth : (this.options.angleShowLineOut) ? this.options.angleLineWidth : 0,\n\t\t\t\t// Point labels at the edge of each line\n\t\t\t\tpointLabelFontColor : this.options.pointLabelFontColor,\n\t\t\t\tpointLabelFontSize : this.options.pointLabelFontSize,\n\t\t\t\tpointLabelFontFamily : this.options.pointLabelFontFamily,\n\t\t\t\tpointLabelFontStyle : this.options.pointLabelFontStyle,\n\t\t\t\theight : this.chart.height,\n\t\t\t\twidth: this.chart.width,\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2,\n\t\t\t\tctx : this.chart.ctx,\n\t\t\t\ttemplateString: this.options.scaleLabel,\n\t\t\t\tlabels: data.labels,\n\t\t\t\tvaluesCount: data.datasets[0].data.length\n\t\t\t});\n\n\t\t\tthis.scale.setScaleSize();\n\t\t\tthis.updateScaleRange(data.datasets);\n\t\t\tthis.scale.buildYLabels();\n\t\t},\n\t\tupdateScaleRange: function(datasets){\n\t\t\tvar valuesArray = (function(){\n\t\t\t\tvar totalDataArray = [];\n\t\t\t\thelpers.each(datasets,function(dataset){\n\t\t\t\t\tif (dataset.data){\n\t\t\t\t\t\ttotalDataArray = totalDataArray.concat(dataset.data);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thelpers.each(dataset.points, function(point){\n\t\t\t\t\t\t\ttotalDataArray.push(point.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn totalDataArray;\n\t\t\t})();\n\n\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\n\t\t\t\t{\n\t\t\t\t\tsteps: this.options.scaleSteps,\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\n\t\t\t\t\tmin: this.options.scaleStartValue,\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\n\t\t\t\t} :\n\t\t\t\thelpers.calculateScaleRange(\n\t\t\t\t\tvaluesArray,\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\n\t\t\t\t\tthis.options.scaleFontSize,\n\t\t\t\t\tthis.options.scaleBeginAtZero,\n\t\t\t\t\tthis.options.scaleIntegersOnly\n\t\t\t\t);\n\n\t\t\thelpers.extend(\n\t\t\t\tthis.scale,\n\t\t\t\tscaleSizes\n\t\t\t);\n\n\t\t},\n\t\taddData : function(valuesArray,label){\n\t\t\t//Map the values array for each of the datasets\n\t\t\tthis.scale.valuesCount++;\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\n\t\t\t\tvar pointPosition = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(value));\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\n\t\t\t\t\tvalue : value,\n\t\t\t\t\tlabel : label,\n\t\t\t\t\tx: pointPosition.x,\n\t\t\t\t\ty: pointPosition.y,\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\n\t\t\t\t}));\n\t\t\t},this);\n\n\t\t\tthis.scale.labels.push(label);\n\n\t\t\tthis.reflow();\n\n\t\t\tthis.update();\n\t\t},\n\t\tremoveData : function(){\n\t\t\tthis.scale.valuesCount--;\n\t\t\tthis.scale.labels.shift();\n\t\t\thelpers.each(this.datasets,function(dataset){\n\t\t\t\tdataset.points.shift();\n\t\t\t},this);\n\t\t\tthis.reflow();\n\t\t\tthis.update();\n\t\t},\n\t\tupdate : function(){\n\t\t\tthis.eachPoints(function(point){\n\t\t\t\tpoint.save();\n\t\t\t});\n\t\t\tthis.reflow();\n\t\t\tthis.render();\n\t\t},\n\t\treflow: function(){\n\t\t\thelpers.extend(this.scale, {\n\t\t\t\twidth : this.chart.width,\n\t\t\t\theight: this.chart.height,\n\t\t\t\tsize : helpers.min([this.chart.width, this.chart.height]),\n\t\t\t\txCenter: this.chart.width/2,\n\t\t\t\tyCenter: this.chart.height/2\n\t\t\t});\n\t\t\tthis.updateScaleRange(this.datasets);\n\t\t\tthis.scale.setScaleSize();\n\t\t\tthis.scale.buildYLabels();\n\t\t},\n\t\tdraw : function(ease){\n\t\t\tvar easeDecimal = ease || 1,\n\t\t\t\tctx = this.chart.ctx;\n\t\t\tthis.clear();\n\t\t\tthis.scale.draw();\n\n\t\t\thelpers.each(this.datasets,function(dataset){\n\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\n\t\t\t\thelpers.each(dataset.points,function(point,index){\n\t\t\t\t\tif (point.hasValue()){\n\t\t\t\t\t\tpoint.transition(this.scale.getPointPosition(index, this.scale.calculateCenterOffset(point.value)), easeDecimal);\n\t\t\t\t\t}\n\t\t\t\t},this);\n\n\n\n\t\t\t\t//Draw the line between all the points\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\n\t\t\t\tctx.beginPath();\n\t\t\t\thelpers.each(dataset.points,function(point,index){\n\t\t\t\t\tif (index === 0){\n\t\t\t\t\t\tctx.moveTo(point.x,point.y);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tctx.lineTo(point.x,point.y);\n\t\t\t\t\t}\n\t\t\t\t},this);\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.stroke();\n\n\t\t\t\tctx.fillStyle = dataset.fillColor;\n\t\t\t\tctx.fill();\n\n\t\t\t\t//Now draw the points over the line\n\t\t\t\t//A little inefficient double looping, but better than the line\n\t\t\t\t//lagging behind the point positions\n\t\t\t\thelpers.each(dataset.points,function(point){\n\t\t\t\t\tif (point.hasValue()){\n\t\t\t\t\t\tpoint.draw();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t},this);\n\n\t\t}\n\n\t});\n\n\n\n\n\n}).call(this);\n})"],"sourceRoot":"/source/"}